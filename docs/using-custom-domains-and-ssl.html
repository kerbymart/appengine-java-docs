<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-13T01:56:44.128542489"><title>Using Custom Domains and SSL | Google App Engine Java Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"contents","level":0,"title":"Contents","anchor":"#contents"},{"id":"adding-a-custom-domain-for-your-application","level":0,"title":"Adding a custom domain for your application","anchor":"#adding-a-custom-domain-for-your-application"},{"id":"adding-ssl-to-your-custom-domain","level":0,"title":"Adding SSL to your custom domain","anchor":"#adding-ssl-to-your-custom-domain"},{"id":"obtaining-a-certificate","level":0,"title":"Obtaining a certificate","anchor":"#obtaining-a-certificate"},{"id":"purchasing-a-virtual-ip-vip","level":0,"title":"Purchasing a virtual IP (VIP)","anchor":"#purchasing-a-virtual-ip-vip"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Using Custom Domains and SSL | Google App Engine Java Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Google App Engine Java Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/using-custom-domains-and-ssl.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Using Custom Domains and SSL | Google App Engine Java Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/using-custom-domains-and-ssl.html#webpage",
    "url": "writerside-documentation/using-custom-domains-and-ssl.html",
    "name": "Using Custom Domains and SSL | Google App Engine Java Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Google App Engine Java Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Using-Custom-Domains-and-SSL" data-main-title="Using Custom Domains and SSL" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Guides.md|Guides///Managing-and-Configuring-Your-App.md|Managing and Configuring Your App"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Google App Engine Java Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Using-Custom-Domains-and-SSL" id="Using-Custom-Domains-and-SSL.md">Using Custom Domains and SSL</h1><p id="z1ni0w8_3"><a href="https://web.archive.org/web/20160424231054/https://cloud.google.com/appengine/docs/python/console/using-custom-domains-and-ssl" id="z1ni0w8_12" data-tooltip="View this page in the Python runtime" data-external="true" rel="noopener noreferrer" target="_blank">Python</a> |Java |<a href="https://web.archive.org/web/20160424231054/https://cloud.google.com/appengine/docs/php/console/using-custom-domains-and-ssl" id="z1ni0w8_13" data-tooltip="View this page in the PHP runtime" data-external="true" rel="noopener noreferrer" target="_blank">PHP</a> |<a href="https://web.archive.org/web/20160424231054/https://cloud.google.com/appengine/docs/go/console/using-custom-domains-and-ssl" id="z1ni0w8_14" data-tooltip="View this page in the Go runtime" data-external="true" rel="noopener noreferrer" target="_blank">Go</a></p><p id="z1ni0w8_4">App Engine allows applications to be served via a custom domain, such as <code class="code" id="z1ni0w8_15">example.com</code>, instead of an <code class="code" id="z1ni0w8_16">appspot.com</code> address. You can use a custom domain with or without SSL.</p><p id="z1ni0w8_5">This page describes how to use a custom domain with an App Engine app and, optionally, how to set up SSL for the custom domain. It assumes that you already have an App Engine project created and deployed.</p><p id="z1ni0w8_6">SSL support for your App Engine application goes above and beyond basic SSL by offering globally-distributed SSL endpoints and built-in load balancing to serve your app securely, reliably, and quickly to a worldwide audience.</p><section class="chapter"><h2 id="contents" data-toc="contents">Contents</h2><ol class="list _decimal" id="z1ni0w8_17" type="1"><li class="list__item" id="z1ni0w8_18"><p id="z1ni0w8_22"><span id="z1ni0w8_24">Adding a custom domain for your application</span></p><ol class="list _decimal" id="z1ni0w8_23" type="1"><li class="list__item" id="z1ni0w8_25"><p id="z1ni0w8_28"><span id="z1ni0w8_29">Using subdomains</span></p></li><li class="list__item" id="z1ni0w8_26"><p id="z1ni0w8_30"><span id="z1ni0w8_31">Wildcard mappings</span></p></li><li class="list__item" id="z1ni0w8_27"><p id="z1ni0w8_32"><span id="z1ni0w8_33">Using Strict-Transport-Security headers in a custom domain</span></p></li></ol></li><li class="list__item" id="z1ni0w8_19"><p id="z1ni0w8_34"><span id="z1ni0w8_35">Adding SSL to your custom domain</span></p></li><li class="list__item" id="z1ni0w8_20"><p id="z1ni0w8_36"><span id="z1ni0w8_38">Obtaining a certificate</span></p><ol class="list _decimal" id="z1ni0w8_37" type="1"><li class="list__item" id="z1ni0w8_39"><p id="z1ni0w8_40"><span id="z1ni0w8_41">More about App Engine support for SSL certificates</span></p></li></ol></li><li class="list__item" id="z1ni0w8_21"><p id="z1ni0w8_42"><span id="z1ni0w8_44">Purchasing a virtual IP (VIP)</span></p><ol class="list _decimal" id="z1ni0w8_43" type="1"><li class="list__item" id="z1ni0w8_45"><p id="z1ni0w8_47"><span id="z1ni0w8_48">VIP versus SNI</span></p></li><li class="list__item" id="z1ni0w8_46"><p id="z1ni0w8_49"><span id="z1ni0w8_50">How to purchase</span></p></li></ol></li></ol></section><section class="chapter"><h2 id="adding-a-custom-domain-for-your-application" data-toc="adding-a-custom-domain-for-your-application">Adding a custom domain for your application</h2><p id="z1ni0w8_51">To add a custom domain for your App Engine application:</p><ol class="list _decimal" id="z1ni0w8_52" type="1"><li class="list__item" id="z1ni0w8_56"><p id="z1ni0w8_62">Purchase a new domain, unless you already have one you want to use. You can use any domain name registrar, including <a href="https://web.archive.org/web/20160424231054/https://domains.google.com/" id="z1ni0w8_63" data-external="true" rel="noopener noreferrer" target="_blank">Google Domains</a>.</p></li><li class="list__item" id="z1ni0w8_57"><p id="z1ni0w8_64">Add the domain to your app by clicking <span class="control" id="z1ni0w8_66">Add a custom domain</span> in the <a href="https://web.archive.org/web/20160424231054/https://console.cloud.google.com/appengine/settings/domains" id="z1ni0w8_67" data-external="true" rel="noopener noreferrer" target="_blank">custom domains</a> console page for your project: to display the <span class="emphasis" id="z1ni0w8_68">Add a new custom domain</span> form:</p><figure id="z1ni0w8_65"><img alt="Add a custom domain" src="https://web.archive.org/web/20160424231054im_/https://cloud.google.com/appengine/docs/images/domain_add2.png" title="Add a custom domain"></figure></li><li class="list__item" id="z1ni0w8_58"><p id="z1ni0w8_69">In the <span class="emphasis" id="z1ni0w8_71">Add new custom domain</span> form, verify that you own the custom domain you want to use:</p><ol class="list _decimal" id="z1ni0w8_70" type="1"><li class="list__item" id="z1ni0w8_72"><p id="z1ni0w8_75">Supply the domain name (&quot;example.com&quot;) and click <span class="control" id="z1ni0w8_76">Verify</span>: this opens up a new tab titled <span class="emphasis" id="z1ni0w8_77">Webmaster Central</span>:</p></li><li class="list__item" id="z1ni0w8_73"><p id="z1ni0w8_78">Follow the directions provided by the <span class="emphasis" id="z1ni0w8_79">Webmaster Central</span> tab, then click <span class="control" id="z1ni0w8_80">Verify</span>.</p></li><li class="list__item" id="z1ni0w8_74"><p id="z1ni0w8_81">Return to the <span class="emphasis" id="z1ni0w8_82">Add new custom domain</span> form in the Cloud Platform Console.</p></li></ol></li><li class="list__item" id="z1ni0w8_59"><p id="z1ni0w8_83">Continue to the next step the <span class="emphasis" id="z1ni0w8_85">Add new custom domain</span> form, selecting the custom domain you want to point to your App Engine app:</p><ol class="list _decimal" id="z1ni0w8_84" type="1"><li class="list__item" id="z1ni0w8_86"><p id="z1ni0w8_90">Refresh the console domain page so it will list the domains properly.</p></li><li class="list__item" id="z1ni0w8_87"><p id="z1ni0w8_91">If you want to use a subdomain, such as <code class="code" id="z1ni0w8_92">www</code>, use the second option (<code class="code" id="z1ni0w8_93">http://www.example.com</code>).</p></li><li class="list__item" id="z1ni0w8_88"><p id="z1ni0w8_94">If you want to use a <a href="https://web.archive.org/web/20160424231054/http://www.pcmag.com/encyclopedia/term/62630/naked-domain" id="z1ni0w8_95" data-external="true" rel="noopener noreferrer" target="_blank">naked domain</a>, use the first option to specify a naked domain (such as <code class="code" id="z1ni0w8_96">http://example.com</code>).</p></li><li class="list__item" id="z1ni0w8_89"><p id="z1ni0w8_97">Click <span class="control" id="z1ni0w8_98">Add</span> to create the desired mapping.</p></li></ol></li><li class="list__item" id="z1ni0w8_60"><p id="z1ni0w8_99">In the final step in the <span class="emphasis" id="z1ni0w8_101">Add new custom domain</span> form, note the resource records listed along with their type (CNAME in this example) and the canonical name (<code class="code" id="z1ni0w8_102">ghs.googlehosted.com</code> in this example). You'll need to add the resource records listed to the DNS configuration of your custom domain:</p><ol class="list _decimal" id="z1ni0w8_100" type="1"><li class="list__item" id="z1ni0w8_103"><p id="z1ni0w8_106">Log into your account at your domain registrar and open the DNS configuration page.</p></li><li class="list__item" id="z1ni0w8_104"><p id="z1ni0w8_107">In the host records section, add each of the records listed in the <span class="emphasis" id="z1ni0w8_108">Add new custom domain</span> form. Typically you list the host name along with the canonical name as the address. In our example, we would add the host name <code class="code" id="z1ni0w8_109">www</code> with the address <code class="code" id="z1ni0w8_110">ghs.googlehosted.com</code>. (If you use a naked domain, you would use <code class="code" id="z1ni0w8_111">@</code> as the host name and a corresponding value from the <span class="emphasis" id="z1ni0w8_112">Add new custom domain</span> form.)</p></li><li class="list__item" id="z1ni0w8_105"><p id="z1ni0w8_113">Save your changes in your domain account. It may take awhile for these changes to take effect.</p></li></ol></li><li class="list__item" id="z1ni0w8_61"><p id="z1ni0w8_114">Test for success by browsing to your app via its new custom domain URL: <code class="code" id="z1ni0w8_115">www.example.com</code>.</p></li></ol><section class="chapter"><h3 id="using-subdomains" data-toc="using-subdomains">Using subdomains</h3><p id="z1ni0w8_116">If you set up a wildcard subdomain mapping for your custom domain, then your application serves requests for any subdomain that matches.</p><ul class="list _bullet" id="z1ni0w8_117"><li class="list__item" id="z1ni0w8_118"><p id="z1ni0w8_120">If the user browses a domain that matches an application version name or module name, the application serves that version.</p></li><li class="list__item" id="z1ni0w8_119"><p id="z1ni0w8_121">If the user browses a domain that matches a module name, the application serves that module.</p></li></ul></section><section class="chapter"><h3 id="wildcard-mappings" data-toc="wildcard-mappings">Wildcard mappings</h3><p id="z1ni0w8_122">Note that wildcard mappings will work with App Engine modules.</p><p id="z1ni0w8_123">You can use wildcards to map subdomains at any level, starting at third-level subdomains. For example, if your domain is <code class="code" id="z1ni0w8_128">example.com</code> and you enter text in the web address field:</p><ul class="list _bullet" id="z1ni0w8_124"><li class="list__item" id="z1ni0w8_129"><p id="z1ni0w8_133">Entering <code class="code" id="z1ni0w8_134">*</code> maps all subdomains of <code class="code" id="z1ni0w8_135">example.com</code> to your app.</p></li><li class="list__item" id="z1ni0w8_130"><p id="z1ni0w8_136">Entering <code class="code" id="z1ni0w8_137">*.private</code> maps all subdomains of <code class="code" id="z1ni0w8_138">private.example.com</code> to your app.</p></li><li class="list__item" id="z1ni0w8_131"><p id="z1ni0w8_139">Entering <code class="code" id="z1ni0w8_140">*.nichol.sharks.nhl</code> maps all subdomains of <code class="code" id="z1ni0w8_141">nichol.sharks.nhl.example.com</code> to your app.</p></li><li class="list__item" id="z1ni0w8_132"><p id="z1ni0w8_142">Entering <code class="code" id="z1ni0w8_143">*.excogitate.system</code> maps all subdomains of <code class="code" id="z1ni0w8_144">excogitate.system.example.com</code> to your app.</p></li></ul><p id="z1ni0w8_125">If you use Google Apps with other subdomains on your domain, such as <code class="code" id="z1ni0w8_145">sites</code> and <code class="code" id="z1ni0w8_146">mail</code>, those mappings have higher priority and are matched first, before any wildcard mapping takes place. In addition, if you have other App Engine apps mapped to other subdomains, those mappings also have higher priority than any wildcard mapping.</p><p id="z1ni0w8_126">Note that some DNS providers might not work with wildcard subdomain mapping. In particular, a DNS provider must permit wildcards in CNAME host entries.</p><section class="chapter"><h4 id="wildcards-and-modules-versions" data-toc="wildcards-and-modules-versions">Wildcards and modules/versions</h4><p id="z1ni0w8_147">The above wildcard routing rules apply to URLs that contain components for modules, versions, and instances as well, following the module routing rules for the App Engine<br> (<a href="https://web.archive.org/web/20160424231054/https://cloud.google.com/appengine/docs/java/modules/routing#routing_via_url" id="z1ni0w8_149" data-external="true" rel="noopener noreferrer" target="_blank">Java</a> | <a href="https://web.archive.org/web/20160424231054/https://cloud.google.com/appengine/docs/python/modules/routing#routing_via_url" id="z1ni0w8_150" data-external="true" rel="noopener noreferrer" target="_blank">Python</a> | <a href="https://web.archive.org/web/20160424231054/https://cloud.google.com/appengine/docs/go/modules/routing#routing_via_url" id="z1ni0w8_151" data-external="true" rel="noopener noreferrer" target="_blank">Go</a> | <a href="https://web.archive.org/web/20160424231054/https://cloud.google.com/appengine/docs/php/modules/routing#routing_via_url" id="z1ni0w8_152" data-external="true" rel="noopener noreferrer" target="_blank">PHP</a>) SDK.</p></section></section><section class="chapter"><h3 id="using-strict-transport-security-headers-in-a-custom-domain" data-toc="using-strict-transport-security-headers-in-a-custom-domain">Using Strict-Transport-Security headers in a custom domain</h3><p id="z1ni0w8_153">You cannot use <code class="code" id="z1ni0w8_154">Strict-Transport-Security</code> headers unless your domain is whitelisted. To place your domain in the whitelist, contact <code class="code" id="z1ni0w8_155">lgarron@chromium.org</code>.</p></section></section><section class="chapter"><h2 id="adding-ssl-to-your-custom-domain" data-toc="adding-ssl-to-your-custom-domain">Adding SSL to your custom domain</h2><p id="z1ni0w8_156">To enable SSL for the custom domain used with your App Engine application:</p><ol class="list _decimal" id="z1ni0w8_157" type="1"><li class="list__item" id="z1ni0w8_158"><p id="z1ni0w8_165">Make sure you have already <span id="z1ni0w8_166">set up your custom domain</span> in your App Engine project.</p></li><li class="list__item" id="z1ni0w8_159"><p id="z1ni0w8_167">Get a certificate for your domain from the certificate authority of your choice. The exact procedure can vary depending on the authority: see <span id="z1ni0w8_168">Obtaining a certificate</span> for details.</p></li><li class="list__item" id="z1ni0w8_160"><p id="z1ni0w8_169">Open your App Engine project in the <a href="https://web.archive.org/web/20160424231054/https://console.cloud.google.com/" id="z1ni0w8_170" data-external="true" rel="noopener noreferrer" target="_blank">Google Cloud Platform Console</a>.</p></li><li class="list__item" id="z1ni0w8_161"><p id="z1ni0w8_171">Ensure you have the right permissions. In order to upload an SSL certificate, you must have <span id="z1ni0w8_173">verified ownership</span> (step 4) of all domains that it may serve, or their parent domains. For example:</p><ul class="list _bullet" id="z1ni0w8_172"><li class="list__item" id="z1ni0w8_174"><p id="z1ni0w8_177">If the certificate is for <code class="code" id="z1ni0w8_178">www.example.com</code> you may verify ownership of either <code class="code" id="z1ni0w8_179">www.example.com</code> or <code class="code" id="z1ni0w8_180">example.com</code>.</p></li><li class="list__item" id="z1ni0w8_175"><p id="z1ni0w8_181">If the certificate is for <code class="code" id="z1ni0w8_182">www.example.com</code> and <code class="code" id="z1ni0w8_183">sub.example.com</code> you can either verify ownership of both <code class="code" id="z1ni0w8_184">www.example.com</code> and <code class="code" id="z1ni0w8_185">sub.example.com</code>, or of <code class="code" id="z1ni0w8_186">example.com</code>.</p></li><li class="list__item" id="z1ni0w8_176"><p id="z1ni0w8_187">If the certificate is for <code class="code" id="z1ni0w8_188">*.example.com</code> you must verify ownership of <code class="code" id="z1ni0w8_189">example.com</code>.</p></li></ul></li><li class="list__item" id="z1ni0w8_162"><p id="z1ni0w8_190">Upload the SSL certificate to be used with your domain by clicking <span class="control" id="z1ni0w8_193">Upload a new certificate</span> in the <a href="https://web.archive.org/web/20160424231054/https://console.cloud.google.com/appengine/settings/certificates" id="z1ni0w8_194" data-external="true" rel="noopener noreferrer" target="_blank">SSL certificates</a> page.</p><figure id="z1ni0w8_191"><img alt="Upload a cert" src="https://web.archive.org/web/20160424231054im_/https://cloud.google.com/appengine/docs/images/upload_cert.png" title="Upload a cert"></figure><ol class="list _decimal" id="z1ni0w8_192" type="1"><li class="list__item" id="z1ni0w8_195"><p id="z1ni0w8_197">Follow the prompts to upload the public certificate and the unencrypted private key. (See the last step under <span id="z1ni0w8_198">Obtaining a certificate</span> for more details on what these are and how to get them.)</p></li><li class="list__item" id="z1ni0w8_196"><p id="z1ni0w8_199">Click <span class="control" id="z1ni0w8_200">Upload</span>.</p></li></ol></li><li class="list__item" id="z1ni0w8_163"><p id="z1ni0w8_201">Select the certificate you want to configure in the list displayed in the <a href="https://web.archive.org/web/20160424231054/https://console.cloud.google.com/appengine/settings/certificates" id="z1ni0w8_202" data-external="true" rel="noopener noreferrer" target="_blank">SSL certificates</a> page for your App Engine project, then select the domain you are enabling for SSL and click <span class="control" id="z1ni0w8_203">Save</span>.</p></li><li class="list__item" id="z1ni0w8_164"><p id="z1ni0w8_204">Test your changes by visiting your custom domain in your browser, using <code class="code" id="z1ni0w8_205">https</code>, for example, <code class="code" id="z1ni0w8_206">https://www.example.com</code>.</p></li></ol></section><section class="chapter"><h2 id="obtaining-a-certificate" data-toc="obtaining-a-certificate">Obtaining a certificate</h2><p id="z1ni0w8_207"><span class="control" id="z1ni0w8_217">Important:</span> These instructions assume you have already <span id="z1ni0w8_218">set up a custom domain</span> for your App Engine application. If you haven't done that yet, you'll need to do it before proceding.</p><p id="z1ni0w8_208">The process for getting an SSL certificate will vary depending on the certificate authority you use. The instructions provided here might need to be adjusted slightly. Typically, each certificate authority provides instructions to lead you through the process.</p><p id="z1ni0w8_209">To obtain a certificate for use with your App Engine app:</p><ol class="list _decimal" id="z1ni0w8_210" type="1"><li class="list__item" id="z1ni0w8_219"><p id="z1ni0w8_226">Generate a certificate signing request (CSR):</p><ol class="list _decimal" id="z1ni0w8_227" type="1"><li class="list__item" id="z1ni0w8_229"><p id="z1ni0w8_231">Invoke the <a href="https://web.archive.org/web/20160424231054/https://www.openssl.org/source/" id="z1ni0w8_233" data-external="true" rel="noopener noreferrer" target="_blank">openssl</a> tool:</p><div class="code-block" data-lang="none">
openssl req -nodes -newkey rsa:2048 -keyout myserver.key -out server.csr
</div></li><li class="list__item" id="z1ni0w8_230"><p id="z1ni0w8_234">When prompted, supply</p><ul class="list _bullet" id="z1ni0w8_235"><li class="list__item" id="z1ni0w8_236"><p id="z1ni0w8_242">your 2 digit country code (e.g., US for United States),</p></li><li class="list__item" id="z1ni0w8_237"><p id="z1ni0w8_243">your city name</p></li><li class="list__item" id="z1ni0w8_238"><p id="z1ni0w8_244">your company name (or your own name if you don't have a company)</p></li><li class="list__item" id="z1ni0w8_239"><p id="z1ni0w8_245">your organizational unit or NA if you don't have this</p></li><li class="list__item" id="z1ni0w8_240"><p id="z1ni0w8_246">your domain name: www.example.com</p></li><li class="list__item" id="z1ni0w8_241"><p id="z1ni0w8_247">your email address</p></li></ul></li></ol><p id="z1ni0w8_228">You don't need to supply the other, optional values. The resulting CSR file is <code class="code" id="z1ni0w8_248">server.csr</code>, which you'll use in a moment.</p></li><li class="list__item" id="z1ni0w8_220"><p id="z1ni0w8_249">Locate the certificate authority (CA) that you want to use, such as <a href="https://web.archive.org/web/20160424231054/https://www.thawte.com/" id="z1ni0w8_250" data-external="true" rel="noopener noreferrer" target="_blank">Thawte</a>, <a href="https://web.archive.org/web/20160424231054/https://www.comodo.com/" id="z1ni0w8_251" data-external="true" rel="noopener noreferrer" target="_blank">Comodo</a>, or other certificate authority, and purchase a certificate.</p></li><li class="list__item" id="z1ni0w8_221"><p id="z1ni0w8_252">The CA will request the contents of your CSR file: copy and paste the contents of <code class="code" id="z1ni0w8_253">server.csr</code> as directed by your CA.</p></li><li class="list__item" id="z1ni0w8_222"><p id="z1ni0w8_254">The CA will request domain owner approval: follow the prompts to do this. You might find it easiest to use the email approval method, in which case you may need to set up an expected email address at your domain account so you can receive the approval request email from the CA and follow the instructions provided in that email. A typical expected address is <code class="code" id="z1ni0w8_255">admin@example.com</code>.</p></li><li class="list__item" id="z1ni0w8_223"><p id="z1ni0w8_256">After you provide domain owner approval, the CA sends the certificate to you, typically as a <code class="code" id="z1ni0w8_257">.zip</code> file: unzip this file.</p></li><li class="list__item" id="z1ni0w8_224"><p id="z1ni0w8_258">Convert the private key you created above (<code class="code" id="z1ni0w8_260">myserver.key</code>) into the format expected by App Engine, unencrypted:</p><div class="code-block" data-lang="none">
openssl rsa -in myserver.key -out myserver.key.pem
</div></li><li class="list__item" id="z1ni0w8_225"><p id="z1ni0w8_261">Concatenate all of the <code class="code" id="z1ni0w8_264">.crt</code> files from your CA into one file, using this command:</p><div class="code-block" data-lang="none">
cat www_example_com.crt ASecureServerCA.crt ATrustCA.crt ATrustExternal.crt &gt; concat.crt
</div><p id="z1ni0w8_263">When you upload the private key and the concatenated certs using the Google Cloud Platform Console <a href="https://web.archive.org/web/20160424231054/https://console.cloud.google.com/appengine/settings/certificates" id="z1ni0w8_265" data-external="true" rel="noopener noreferrer" target="_blank">SSL</a> page within the App Engine settings for your project, in the file selector for <span class="control" id="z1ni0w8_266">private key</span>, supply the private key file you just converted into a pem file: <code class="code" id="z1ni0w8_267">myserver.key.pem</code>. And in the file selector for <span class="control" id="z1ni0w8_268">PEM encoded X.509 public key certificate</span>, supply the concatenated file containing all the certificates from your CA: <code class="code" id="z1ni0w8_269">concat.crt</code></p></li></ol><p id="z1ni0w8_211">To verify that the private key and certificate <a href="https://web.archive.org/web/20160424231054/http://httpd.apache.org/docs/2.0/ssl/ssl_faq.html#verify" id="z1ni0w8_270" data-external="true" rel="noopener noreferrer" target="_blank">match</a>, use the following commands:</p><div class="code-block" data-lang="none">
    openssl x509 -noout -modulus -in concat.crt | openssl md5
    openssl rsa -noout -modulus -in myserver.key.pem | openssl md5
</div><p id="z1ni0w8_213">Both commands should return the same output.</p><p id="z1ni0w8_214">To verify that a certificate and its CA chain is valid, the <a href="https://web.archive.org/web/20160424231054/https://www.openssl.org/docs/manmaster/apps/verify.html" id="z1ni0w8_271" data-external="true" rel="noopener noreferrer" target="_blank">openssl verify</a> command may be useful:</p><div class="code-block" data-lang="none">
    openssl verify -verbose -CAfile concat.crt  concat.crt
</div><section class="chapter"><h3 id="more-about-app-engine-support-for-ssl-certificates" data-toc="more-about-app-engine-support-for-ssl-certificates">More about App Engine support for SSL certificates</h3><p id="z1ni0w8_272">App Engine supports the following certificate types:</p><ul class="list _bullet" id="z1ni0w8_273"><li class="list__item" id="z1ni0w8_278"><p id="z1ni0w8_282">Single Domain/Hostname</p></li><li class="list__item" id="z1ni0w8_279"><p id="z1ni0w8_283">Self-signed</p></li><li class="list__item" id="z1ni0w8_280"><p id="z1ni0w8_284">Wildcard</p></li><li class="list__item" id="z1ni0w8_281"><p id="z1ni0w8_285">Subject Alternative Name (SAN) / Multi Domain</p></li></ul><p id="z1ni0w8_274">It requires some things of your certificates and keys:</p><ul class="list _bullet" id="z1ni0w8_275"><li class="list__item" id="z1ni0w8_286"><p id="z1ni0w8_292">Private Key and Certificate should be uploaded in PEM format.</p></li><li class="list__item" id="z1ni0w8_287"><p id="z1ni0w8_293">Private Keys must not be encrypted.</p></li><li class="list__item" id="z1ni0w8_288"><p id="z1ni0w8_294">A certificate file can contain at most five certificates; this number includes chained and intermediate certificates.</p></li><li class="list__item" id="z1ni0w8_289"><p id="z1ni0w8_295">All subject names on the host certificate should match or be subdomains of the user's verified domains.</p></li><li class="list__item" id="z1ni0w8_290"><p id="z1ni0w8_296">Private keys must use RSA encryption.</p></li><li class="list__item" id="z1ni0w8_291"><p id="z1ni0w8_297"><span class="control" id="z1ni0w8_298">Maximum allowed key modulus: 2048 bits</span></p></li></ul><p id="z1ni0w8_276">If the host certificate requires an intermediate or chained certificate (as many Certificate Authorities (CAs) issue), you will need to append the intermediate or chained certificates to the end of the public certificate file.</p><p id="z1ni0w8_277">Some App Engine features use special subdomains. For example, an application can use subdomains to address application modules, or to address different versions of your application. To use these with SSL, it makes sense to set up a SAN or wildcard certificate. Wildcard certificates only support one level of subdomain.</p></section></section><section class="chapter"><h2 id="purchasing-a-virtual-ip-vip" data-toc="purchasing-a-virtual-ip-vip">Purchasing a virtual IP (VIP)</h2><p id="z1ni0w8_299"><span class="control" id="z1ni0w8_302">Important:</span> these instructions assume you have already <span id="z1ni0w8_303">set up a custom domain</span> for your app and have uploaded your SSL certificate (see <span id="z1ni0w8_304">Adding SSL to your custom domain</span>).</p><section class="chapter"><h3 id="vip-versus-sni" data-toc="vip-versus-sni">VIP versus SNI</h3><p id="z1ni0w8_305">By default, App Engine SSL support uses server name indication (SNI): you don't need to set up or purchase anything to use it. Server Name Indication is a feature that extends SSL and <a href="https://web.archive.org/web/20160424231054/https://wikipedia.org/wiki/Transport_Layer_Security" id="z1ni0w8_308" data-external="true" rel="noopener noreferrer" target="_blank">TLS</a>. This extension allows multiple domains to share the same IP address while still allowing separate valid certificates for all the domains. Some older browsers and operating systems don't support SNI, most notably Internet Explorer and Safari on Windows XP and the default Android browser pre-Honeycomb. When a user visits an SNI site with a client that does not support SNI they will be unable to view the page when connecting via HTTPS. We recommend detecting browsers that do not support SNI and recommending a browser that supports it.</p><p id="z1ni0w8_306">However, if you wish, you could alternatively use a virtual IP (VIP). A VIP is a dedicated IP address assigned for your application. This allows TLS to be used without the SNI extension and as such it will work on any browser or OS that supports SSL. Each VIP only supports one certificate. The Virtual IP address may change and therefore you should not use DNS&nbsp;A records; instead, use a CNAME record to avoid any issues caused by Virtual IP changes.</p><p id="z1ni0w8_307">Be aware that SNI slots are free; VIPs are not. If you need to use a virtual IP (VIP) you will need to purchase it first: these are about $39 per month per VIP.</p></section><section class="chapter"><h3 id="how-to-purchase" data-toc="how-to-purchase">How to purchase</h3><p id="z1ni0w8_309">To purchase a virtual IP address:</p><ol class="list _decimal" id="z1ni0w8_310" type="1"><li class="list__item" id="z1ni0w8_312"><p id="z1ni0w8_324">Set up a <a href="https://web.archive.org/web/20160424231054/https://www.google.com/work/apps/business/" id="z1ni0w8_325" data-external="true" rel="noopener noreferrer" target="_blank">Google Apps account</a> for your custom domain. When you sign up for this account, you must use your custom domain email as your login, for example, <code class="code" id="z1ni0w8_326">admin@www.example.com</code>.</p></li><li class="list__item" id="z1ni0w8_313"><p id="z1ni0w8_327">Enable billing for your application in the Google Cloud Platform Console <a href="https://web.archive.org/web/20160424231054/https://console.cloud.google.com/settings" id="z1ni0w8_328" data-external="true" rel="noopener noreferrer" target="_blank">billing</a> page.</p></li><li class="list__item" id="z1ni0w8_314"><p id="z1ni0w8_329">Set the daily <a href="https://web.archive.org/web/20160424231054/https://cloud.google.com/appengine/pricing/#spending_limit" id="z1ni0w8_330" data-external="true" rel="noopener noreferrer" target="_blank">spending limit</a> high enough to pay for your VIPs, using the <a href="https://web.archive.org/web/20160424231054/https://console.cloud.google.com/appengine/settings" id="z1ni0w8_331" data-external="true" rel="noopener noreferrer" target="_blank">application settings</a> page.</p></li><li class="list__item" id="z1ni0w8_315"><p id="z1ni0w8_332">Register the email address you used for your Google Apps account as a project owner in the <a href="https://web.archive.org/web/20160424231054/https://console.cloud.google.com/permissions/projectpermissions" id="z1ni0w8_333" data-external="true" rel="noopener noreferrer" target="_blank">Permissions</a> page for your App Engine project.</p></li><li class="list__item" id="z1ni0w8_316"><p id="z1ni0w8_334">Log into the <a href="https://web.archive.org/web/20160424231054/https://admin.google.com/" id="z1ni0w8_335" data-external="true" rel="noopener noreferrer" target="_blank">Google Apps admin console</a>.</p></li><li class="list__item" id="z1ni0w8_317"><p id="z1ni0w8_336">Click the <span class="emphasis" id="z1ni0w8_337">Security</span> icon.</p></li><li class="list__item" id="z1ni0w8_318"><p id="z1ni0w8_338">Click <span class="control" id="z1ni0w8_340">Show more</span> &gt; <span class="control" id="z1ni0w8_341">SSL for App Engine Apps</span> to display the VIP form:</p><figure id="z1ni0w8_339"><img alt="VIP form" src="https://web.archive.org/web/20160424231054im_/https://cloud.google.com/appengine/docs/images/buy_vip.png" title="VIP form"></figure></li><li class="list__item" id="z1ni0w8_319"><p id="z1ni0w8_342">Click <span class="control" id="z1ni0w8_343">Add a VIP</span> once for each VIP you wish to add. You will be charged monthly for each VIP. Note that if you add a VIP and then remove it immediately, you will still be billed for an entire day.</p></li><li class="list__item" id="z1ni0w8_320"><p id="z1ni0w8_344">Return to the <a href="https://web.archive.org/web/20160424231054/https://console.cloud.google.com/appengine/settings/certificates" id="z1ni0w8_345" data-external="true" rel="noopener noreferrer" target="_blank">SSL certificates</a> page in the Google Cloud Platform Console, then click on the certificate you are using with this VIP.</p></li><li class="list__item" id="z1ni0w8_321"><p id="z1ni0w8_346">In the dropdown menu under <span class="emphasis" id="z1ni0w8_348">Select SSL serving mode</span>, select <span class="control" id="z1ni0w8_349">SNI+VIP</span>:</p><figure id="z1ni0w8_347"><img alt="serve as VIP" src="https://web.archive.org/web/20160424231054im_/https://cloud.google.com/appengine/docs/images/vip_cert.png" title="serve as VIP"></figure></li><li class="list__item" id="z1ni0w8_322"><p id="z1ni0w8_350">Click <span class="control" id="z1ni0w8_351">Save</span>.</p></li><li class="list__item" id="z1ni0w8_323"><p id="z1ni0w8_352">Locate the CNAME that is displayed under the cert. You'll need to log into your domain account and open the DNS configuration page, then copy this value into the CNAME records for all domains using the certificate. Allow time for the DNS changes to propagate out.</p></li></ol><p id="z1ni0w8_311">Your SSL cert will now be served as a VIP.</p></section></section><div class="last-modified">10 April 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="access-control.html" class="navigation-links__prev">Access Control</a><a href="managing-app-resources.html" class="navigation-links__next">Managing App Resources</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>