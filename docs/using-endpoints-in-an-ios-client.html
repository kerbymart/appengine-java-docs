<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-13T01:56:45.707755446"><title>Using Endpoints in an iOS Client | Google App Engine Java Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"compiling-the-client-library-generator-and-generating-your-library","level":0,"title":"Compiling the client library generator and generating your library","anchor":"#compiling-the-client-library-generator-and-generating-your-library"},{"id":"adding-required-files-to-your-ios-project","level":0,"title":"Adding required files to your iOS project","anchor":"#adding-required-files-to-your-ios-project"},{"id":"creating-the-service-object","level":0,"title":"Creating the service object","anchor":"#creating-the-service-object"},{"id":"calling-the-endpoint-api-unauthenticated","level":0,"title":"Calling the Endpoint API (unauthenticated)","anchor":"#calling-the-endpoint-api-unauthenticated"},{"id":"sample-client-source-code","level":0,"title":"Sample client source code","anchor":"#sample-client-source-code"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Using Endpoints in an iOS Client | Google App Engine Java Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Google App Engine Java Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/using-endpoints-in-an-ios-client.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Using Endpoints in an iOS Client | Google App Engine Java Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/using-endpoints-in-an-ios-client.html#webpage",
    "url": "writerside-documentation/using-endpoints-in-an-ios-client.html",
    "name": "Using Endpoints in an iOS Client | Google App Engine Java Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Google App Engine Java Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Using-Endpoints-in-an-iOS-Client" data-main-title="Using Endpoints in an iOS Client" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Guides.md|Guides///Mobile-Backends.md|Mobile Backends///Using-Endpoints-in-Clients.md|Using Endpoints in Clients"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Google App Engine Java Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Using-Endpoints-in-an-iOS-Client" id="Using-Endpoints-in-an-iOS-Client.md">Using Endpoints in an iOS Client</h1><p id="bz63ki_3"><span class="control" id="bz63ki_11">Note:</span> This document assumes you familiar with Apple iOS development, including Objective-C&reg;, Xcode&reg;, and general project setup. If you are unfamiliar with these, refer to the documentation and examples on the Apple <a href="https://web.archive.org/web/20160424225755/https://developer.apple.com/devcenter/ios/index.action" id="bz63ki_12" data-external="true" rel="noopener noreferrer" target="_blank">iOS developer site</a>.</p><p id="bz63ki_4">To use Endpoints in an iOS app, you need to:</p><ol class="list _decimal" id="bz63ki_5" type="1"><li class="list__item" id="bz63ki_13"><p id="bz63ki_20">Have access to the backend API project that the client is going to access.</p></li><li class="list__item" id="bz63ki_14"><p id="bz63ki_21">Have a system running Mac OSX and Xcode.</p></li><li class="list__item" id="bz63ki_15"><p id="bz63ki_22"><span id="bz63ki_23">Compile the client library generator and generate your library</span>.</p></li><li class="list__item" id="bz63ki_16"><p id="bz63ki_24"><span id="bz63ki_25">Add required files</span> to your iOS project.</p></li><li class="list__item" id="bz63ki_17"><p id="bz63ki_26"><span id="bz63ki_27">Create the service object</span> to be used for making requests.</p></li><li class="list__item" id="bz63ki_18"><p id="bz63ki_28"><span id="bz63ki_29">Call the API</span> exposed by the Endpoint.</p></li><li class="list__item" id="bz63ki_19"><p id="bz63ki_30">Optionally, <span id="bz63ki_31">add support for authenticated calls</span>.</p></li></ol><section class="chapter"><h2 id="compiling-the-client-library-generator-and-generating-your-library" data-toc="compiling-the-client-library-generator-and-generating-your-library">Compiling the client library generator and generating your library</h2><p id="bz63ki_32">To compile the library generator and then use it to generate your client library:</p><ol class="list _decimal" id="bz63ki_33" type="1"><li class="list__item" id="bz63ki_35"><p id="bz63ki_41">On the system where you have your backend API project, generate the discovery document from your backend API in RPC format following the instructions provided in <a href="https://web.archive.org/web/20160424225755/https://cloud.google.com/appengine/docs/java/endpoints/endpoints_tool#generating_a_discovery_doc" id="bz63ki_42" data-external="true" rel="noopener noreferrer" target="_blank">Generating a Discovery Doc</a>.</p></li><li class="list__item" id="bz63ki_36"><p id="bz63ki_43">On a system running a recent version of Mac OSX that has the <a href="https://web.archive.org/web/20160424225755/https://developer.apple.com/devcenter/ios/index.action" id="bz63ki_46" data-external="true" rel="noopener noreferrer" target="_blank">Xcode</a> development environment installed, check out a read-only copy of the Google APIs Client Library as follows:</p><div class="code-block" data-lang="none">
svn checkout \
    http://google-api-objectivec-client.googlecode.com/svn/trunk/ \
    google-api-objectivec-client-read-only
</div><p id="bz63ki_45">The Google APIs Client Library for Objective-C project contains all of the code for the Objective-C client library as well as the client library generator.</p></li><li class="list__item" id="bz63ki_37"><p id="bz63ki_47">Start Xcode, and in the above download of the Google APIs Client source, locate <code class="code" id="bz63ki_48">google-api-objectivec-client-read-only/Source/Tools/ServiceGenerator/ServiceGenerator.xcodeproj</code>. This project contains a single target, <code class="code" id="bz63ki_49">ServiceGenerator</code>. Build this target (<span class="control" id="bz63ki_50">Project-&gt;Build</span> or <span class="control" id="bz63ki_51">?B)</span>.</p></li><li class="list__item" id="bz63ki_38"><p id="bz63ki_52">After you build that target, in the Xcode <span class="control" id="bz63ki_53">Project Navigator</span>, expand the <code class="code" id="bz63ki_54">ServiceGenerator</code> project and <code class="code" id="bz63ki_55">Products</code> arrows to display the output binary. Click on the binary and get the full path from the File Inspector.</p></li><li class="list__item" id="bz63ki_39"><p id="bz63ki_56">Open a new Terminal window and invoke <code class="code" id="bz63ki_59">ServiceGenerator</code>, pasting in the path to the <code class="code" id="bz63ki_60">ServiceGenerator</code> binary. As arguments, include the path to your discovery document in RPC format that you created previously. Use the following invocation:</p><div class="code-block" data-lang="none">
/Users/foo/Library/Developer/Xcode/DerivedData/ServiceGenerator-abc/Build/Products/Debug/ServiceGenerator \
    ~/src/tictactoe-java/war/WEB-INF/tictactoe-v1-rpc.discovery \
    --outputDir ~/API
</div><p id="bz63ki_58">replacing the paths and application name with those for your own project.</p></li><li class="list__item" id="bz63ki_40"><p id="bz63ki_61">After you successfully complete these procedures, you now have an API directory containing all of the supplementary files you&rsquo;ll need to access your API (on top of the existing client library). We'll show you how to add these files to your project in the next section.</p></li></ol><p id="bz63ki_34"><span class="control" id="bz63ki_62">Note:</span> If you modify your Endpoints backend API, you must repeat the above process after regenerating the discovery document.</p></section><section class="chapter"><h2 id="adding-required-files-to-your-ios-project" data-toc="adding-required-files-to-your-ios-project">Adding required files to your iOS project</h2><p id="bz63ki_63">To add the required files:</p><ol class="list _decimal" id="bz63ki_64" type="1"><li class="list__item" id="bz63ki_65"><p id="bz63ki_68">If you are <span class="emphasis" id="bz63ki_70">not</span> using the Google+ iOS SDK, add the client library to your iOS project in Xcode. (If you <span class="emphasis" id="bz63ki_71">are</span> using the Google+ iOS SDK, you must skip this step.) There are two ways to add the client library:</p><ul class="list _bullet" id="bz63ki_69"><li class="list__item" id="bz63ki_72"><p id="bz63ki_74">The first way is to copy the source files for the library into your project and compile them directly. To do this,</p><ol class="list _decimal" id="bz63ki_75" type="1"><li class="list__item" id="bz63ki_76"><p id="bz63ki_83">Open <code class="code" id="bz63ki_84">google-api-objectivec-client-read-only/Source/GTL.xcodeproj</code> and expand GTLSource and Common.</p></li><li class="list__item" id="bz63ki_77"><p id="bz63ki_85">Select all the files in the subgroups, excluding the OAuth 2.0/Mac group.</p></li><li class="list__item" id="bz63ki_78"><p id="bz63ki_86">Drag the selected files into the <span class="control" id="bz63ki_87">Project Navigator</span> of your own open project. (You may wish to put them into their own group for organizational purposes, but that is not required.)</p></li><li class="list__item" id="bz63ki_79"><p id="bz63ki_88">Select your project in the <span class="control" id="bz63ki_89">Add to targets</span> selection area.</p></li><li class="list__item" id="bz63ki_80"><p id="bz63ki_90">If your project uses Automatic Reference Counting (ARC), disable it for the client library files you include.</p></li><li class="list__item" id="bz63ki_81"><p id="bz63ki_91">Under the target <span class="control" id="bz63ki_92">Build Phases</span> tab for your project, and expand the <span class="control" id="bz63ki_93">Compile Sources</span> build phase.</p></li><li class="list__item" id="bz63ki_82"><p id="bz63ki_94">Select the library source files, then press Enter to open the edit field., and type <code class="code" id="bz63ki_95">-fno-objc-arc</code> as the compiler flag for those files.</p></li></ol></li><li class="list__item" id="bz63ki_73"><p id="bz63ki_96">The second way to add the client library is to compile and link to the static iOS framework, and is described in the <a href="https://web.archive.org/web/20160424225755/https://github.com/google/google-api-objectivec-client/wiki/BuildingTheLibrary" id="bz63ki_97" data-external="true" rel="noopener noreferrer" target="_blank">objectivec client</a> documentation.</p></li></ul></li><li class="list__item" id="bz63ki_66"><p id="bz63ki_98">If you are using the Google+ iOS SDK, set up your Xcode project using the <a href="https://web.archive.org/web/20160424225755/https://developers.google.com/+/mobile/ios/getting-started" id="bz63ki_99" data-external="true" rel="noopener noreferrer" target="_blank">instructions provided by that SDK</a>.</p></li><li class="list__item" id="bz63ki_67"><p id="bz63ki_100">Your project needs to include the <code class="code" id="bz63ki_101">foo.h</code> &amp; <code class="code" id="bz63ki_102">foo_Sources.m</code> files generated from ServiceGenerator, which you ran previously, where <code class="code" id="bz63ki_103">foo</code> is your API name. Disabling ARC is not required for these files.</p></li></ol></section><section class="chapter"><h2 id="creating-the-service-object" data-toc="creating-the-service-object">Creating the service object</h2><p id="bz63ki_104">The service object is required for making requests to the Endpoint API. If your app makes unauthenticated requests, you construct a service object as follows:</p><div class="code-block" data-lang="none">
static GTLServiceTictactoe *service = nil;
if (!service) {
  service = [[GTLServiceTictactoe alloc] init];
  service.retryEnabled = YES;
  [GTMHTTPFetcher setLoggingEnabled:YES];
}
</div><p id="bz63ki_106">For authenticated calls, you'll need to <span id="bz63ki_107">supply credentials to the service object</span>.</p></section><section class="chapter"><h2 id="calling-the-endpoint-api-unauthenticated" data-toc="calling-the-endpoint-api-unauthenticated">Calling the Endpoint API (unauthenticated)</h2><p id="bz63ki_108">After you create a service object, calling your API is straightforward, as shown by this example:</p><div class="code-block" data-lang="none">
GTLQueryTictactoe *query = [GTLQueryTictactoe queryForScoresList];
[service executeQuery:query completionHandler:^(GTLServiceTicket *ticket, GTLTictactoeScores *object, NSError *error) {
  NSArray *items = [object items];
  // Do something with items.
}];
</div><p id="bz63ki_110">In the above sample code, the call requests a list of all <code class="code" id="bz63ki_114">Score</code> objects on the server and passes the result to a callback. If <code class="code" id="bz63ki_115">queryForScoresList</code> required parameters, or a request body, you would set them on the query object. (Xcode&rsquo;s hinting is very helpful here).</p><p id="bz63ki_111">If your iOS app is making calls to an Endpoint that requires authentication, you must <span id="bz63ki_116">Add a Sign-in Dialog</span> to your iOS client.</p><p id="bz63ki_112">For more information on making authenticated Endpoints calls, see <a href="https://web.archive.org/web/20160424225755/https://cloud.google.com/appengine/docs/java/endpoints/auth" id="bz63ki_117" data-external="true" rel="noopener noreferrer" target="_blank">Adding Authentication to Endpoints</a>.</p><section class="chapter"><h3 id="adding-a-sign-in-dialog-to-your-ios-client" data-toc="adding-a-sign-in-dialog-to-your-ios-client">Adding a sign-in dialog to your iOS client</h3><p id="bz63ki_118">The client library provides a &quot;ready made&quot; sign-in user interface, which you present to the user by means of the following code:</p><div class="code-block" data-lang="none">
static NSString *const kKeychainItemName = @&quot;Your App Name&quot;;
NSString *kMyClientID = @&quot;your_client_id&quot;;
// Client secret is not required, and can be left blank.
NSString *kMyClientSecret = @&quot;your_client_secret&quot;;

GTMOAuth2ViewControllerTouch *viewController;
viewController = [[GTMOAuth2ViewControllerTouch alloc] initWithScope:scope
    clientID:kMyClientID
    clientSecret:kMyClientSecret
    keychainItemName:kKeychainItemName
    delegate:self
    finishedSelector:@selector(viewController:finishedWithAuth:error:)];

[self presentModalViewController:viewController
    animated:YES];
</div><p id="bz63ki_120">You place this code within a method of your view controller. When the user signs in, this code triggers a callback called <code class="code" id="bz63ki_123">finishedWithAuth</code>. An example implementation follows:</p><div class="code-block" data-lang="none">
- (void)viewController:(GTMOAuth2ViewControllerTouch *)viewController
      finishedWithAuth:(GTMOAuth2Authentication *)auth
                 error:(NSError *)error {
    [self dismissModalViewControllerAnimated:YES];

    if (error != nil) {
        // Authentication failed
    } else {
        // Authentication succeeded
        [[self tictactoeService] setAuthorizer:auth];
        // Make some API calls
    }
}

- (GTLServiceTictactoe *)tictactoeService {
    static GTLServiceTictactoe *service = nil;
    if (!service) {
        service = [[GTLServiceTictactoe alloc] init];

        service.retryEnabled = YES;

        [GTMHTTPFetcher setLoggingEnabled:YES];
    }
    return service;
}
</div><p id="bz63ki_122">As a result of the above code, the service object is set to the user that signed into your application.</p></section></section><section class="chapter"><h2 id="sample-client-source-code" data-toc="sample-client-source-code">Sample client source code</h2><p id="bz63ki_124">For a complete sample client that illustrates the concepts described above, see the <a href="https://web.archive.org/web/20160424225755/https://github.com/GoogleCloudPlatform/appengine-endpoints-tictactoe-ios" id="bz63ki_125" data-external="true" rel="noopener noreferrer" target="_blank">iOS client</a> sample, which uses the sample <a href="https://web.archive.org/web/20160424225755/https://github.com/GoogleCloudPlatform/appengine-endpoints-tictactoe-java" id="bz63ki_126" data-external="true" rel="noopener noreferrer" target="_blank">Tic Tac Toe web backend</a>.</p></section><div class="last-modified">10 April 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="using-endpoints-in-an-android-client.html" class="navigation-links__prev">Using Endpoints in an Android Client</a><a href="namespace-enabled-apps.html" class="navigation-links__next">Namespace-enabled Apps</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>