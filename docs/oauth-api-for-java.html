<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-13T01:56:45.973530135"><title>OAuth API for Java | Google App Engine Java Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"oauth-2-0","level":0,"title":"OAuth 2.0","anchor":"#oauth-2-0"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="OAuth API for Java | Google App Engine Java Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Google App Engine Java Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/oauth-api-for-java.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="OAuth API for Java | Google App Engine Java Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/oauth-api-for-java.html#webpage",
    "url": "writerside-documentation/oauth-api-for-java.html",
    "name": "OAuth API for Java | Google App Engine Java Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Google App Engine Java Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="OAuth-API-for-Java" data-main-title="OAuth API for Java" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Guides.md|Guides///Authenticating-Users.md|Authenticating Users"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Google App Engine Java Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="OAuth-API-for-Java" id="OAuth-API-for-Java.md">OAuth API for Java</h1><p id="-55i5pe_3"><a href="https://web.archive.org/web/20160425100012/https://cloud.google.com/appengine/docs/python/oauth/" id="-55i5pe_11" data-tooltip="View this page in the Python runtime" data-external="true" rel="noopener noreferrer" target="_blank">Python</a> |Java |PHP |<a href="https://web.archive.org/web/20160425100012/https://cloud.google.com/appengine/docs/go/oauth/" id="-55i5pe_12" data-tooltip="View this page in the Go runtime" data-external="true" rel="noopener noreferrer" target="_blank">Go</a></p><p id="-55i5pe_4"><a href="https://web.archive.org/web/20160425100012/http://stackoverflow.com/questions/tagged/google-app-engine+oauth" id="-55i5pe_13" data-external="true" rel="noopener noreferrer" target="_blank"><figure id="-55i5pe_14"><img alt="Stack overflow questions" src="https://web.archive.org/web/20160425100012im_/https://cloud.google.com/cloud/images/stack_overflow_questions.png" title="Stack Overflow Questions" width="240" height="53"></figure></a></p><p id="-55i5pe_5"><a href="https://web.archive.org/web/20160425100012/http://stackoverflow.com/feeds/tag?sort=votes&amp;tagnames=google-app-engine%2Boauth" id="-55i5pe_15" data-external="true" rel="noopener noreferrer" target="_blank">https://web.archive.org/web/20160425100012/http://stackoverflow.com/feeds/tag?sort=votes&amp;tagnames=google-app-engine%2Boauth</a></p><p id="-55i5pe_6"></p><p id="-55i5pe_7"><a href="https://web.archive.org/web/20160425100012/http://stackoverflow.com/questions/tagged/google-app-engine+oauth?sort=votes" id="-55i5pe_16" data-external="true" rel="noopener noreferrer" target="_blank">See more...</a></p><p id="-55i5pe_8">The App Engine OAuth API uses the OAuth protocol and provides a way for your app to authenticate users who are requesting access without asking for their credentials (username and password).</p><ol class="list _decimal" id="-55i5pe_9" type="1"><li class="list__item" id="-55i5pe_17"><p id="-55i5pe_18"><span id="-55i5pe_20">OAuth 2.0</span></p><ol class="list _decimal" id="-55i5pe_19" type="1"><li class="list__item" id="-55i5pe_21"><p id="-55i5pe_23"><span id="-55i5pe_24">Generating an access token</span></p></li><li class="list__item" id="-55i5pe_22"><p id="-55i5pe_25"><span id="-55i5pe_26">Using the API</span></p></li></ol></li></ol><section class="chapter"><h2 id="oauth-2-0" data-toc="oauth-2-0">OAuth 2.0</h2><p id="-55i5pe_27">OAuth 2.0 access tokens supplied by the <a href="https://web.archive.org/web/20160425100012/https://developers.google.com/identity/sign-in/" id="-55i5pe_30" data-external="true" rel="noopener noreferrer" target="_blank">Google Sign-In</a> library and low-level <a href="https://web.archive.org/web/20160425100012/https://developers.google.com/identity/protocols/OAuth2" id="-55i5pe_31" data-external="true" rel="noopener noreferrer" target="_blank">OAuth 2.0 endpoints</a> can be used to authenticate clients with the OAuth API and retrieve user identity information.</p><section class="chapter"><h3 id="generating-an-access-token" data-toc="generating-an-access-token">Generating an access token</h3><p id="-55i5pe_32">Follow the steps outlined at <a href="https://web.archive.org/web/20160425100012/https://developers.google.com/identity/protocols/OAuth2" id="-55i5pe_36" data-external="true" rel="noopener noreferrer" target="_blank">Using OAuth 2.0 to Access Google APIs</a>.</p><p id="-55i5pe_33"><span class="control" id="-55i5pe_37">Note:</span> Be sure you include the email scope (<code class="code" id="-55i5pe_38">https://www.googleapis.com/auth/userinfo.email</code>) in step \#2. This scope is required because the App Engine OAuth API accesses the user's email address.</p><p id="-55i5pe_34">The client should send the resulting OAuth 2.0 access token in the <code class="code" id="-55i5pe_39">Authorization: Bearer</code> HTTP Request Header on every request to your AppEngine app.</p><p id="-55i5pe_35">You can also obtain an access token using one of the <a href="https://web.archive.org/web/20160425100012/https://developers.google.com/identity/" id="-55i5pe_40" data-external="true" rel="noopener noreferrer" target="_blank">Google Sign-in</a> client libraries for <a href="https://web.archive.org/web/20160425100012/https://developers.google.com/identity/toolkit/android/" id="-55i5pe_41" data-external="true" rel="noopener noreferrer" target="_blank">Android</a>, <a href="https://web.archive.org/web/20160425100012/https://developers.google.com/identity/toolkit/ios/" id="-55i5pe_42" data-external="true" rel="noopener noreferrer" target="_blank">iOS</a>, or the <a href="https://web.archive.org/web/20160425100012/https://developers.google.com/identity/toolkit/web/" id="-55i5pe_43" data-external="true" rel="noopener noreferrer" target="_blank">web</a>.</p></section><section class="chapter"><h3 id="using-the-api" data-toc="using-the-api">Using the API</h3><p id="-55i5pe_44">When a client sends a request to your app, the authorization header of the request includes an OAuth access token that has one or more scopes associated with it, indicating what APIs the client can access. Your app can retreive information about the user who granted the access token by running this code:</p><div class="code-block" data-lang="none">
OAuthService oauth = OAuthServiceFactory.getOAuthService();
String scope = &quot;https://www.googleapis.com/auth/userinfo.email&quot;;
Set&lt;String&gt; allowedClients = new HashSet&lt;&gt;();
allowedClients.add(&quot;407408718192.apps.googleusercontent.com&quot;); // list your client ids here

try {
  User user = oauth.getCurrentUser(scope);
  String tokenAudience = oauth.getClientId(scope);
  if (!allowedClients.contains(tokenAudience)) {
    throw new OAuthRequestException(&quot;audience of token '&quot; + tokenAudience
        + &quot;' is not in allowed list &quot; + allowedClients);
  }
  // proceed with authenticated user
  // ...
} catch (OAuthRequestException ex) {
  // handle auth error
  // ...
} catch (OAuthServiceFailureException ex) {
  // optionally, handle an oauth service failure
  // ...
}
</div><p id="-55i5pe_46"><code class="code" id="-55i5pe_47">getCurrentUser</code> returns an object representing the user associated with the request. If the access token is invalid, the method returns an error.</p></section></section><div class="last-modified">10 April 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="authenticating-users.html" class="navigation-links__prev">Authenticating Users</a><a href="users-java-api-overview.html" class="navigation-links__next">Users Java API Overview</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>