<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-13T01:56:44.955212247"><title>Blobstore Java API Overview | Google App Engine Java Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"introducing-the-blobstore","level":0,"title":"Introducing the Blobstore","anchor":"#introducing-the-blobstore"},{"id":"using-the-blobstore","level":0,"title":"Using the Blobstore","anchor":"#using-the-blobstore"},{"id":"uploading-a-blob","level":0,"title":"Uploading a blob","anchor":"#uploading-a-blob"},{"id":"serving-a-blob","level":0,"title":"Serving a blob","anchor":"#serving-a-blob"},{"id":"complete-sample-application","level":0,"title":"Complete sample application","anchor":"#complete-sample-application"},{"id":"using-the-images-service-with-the-blobstore","level":0,"title":"Using the Images service with the Blobstore","anchor":"#using-the-images-service-with-the-blobstore"},{"id":"using-the-blobstore-api-with-google-cloud-storage","level":0,"title":"Using the Blobstore API with Google Cloud Storage","anchor":"#using-the-blobstore-api-with-google-cloud-storage"},{"id":"quotas-and-limits","level":0,"title":"Quotas and limits","anchor":"#quotas-and-limits"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Blobstore Java API Overview | Google App Engine Java Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Google App Engine Java Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/blobstore-java-api-overview.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Blobstore Java API Overview | Google App Engine Java Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/blobstore-java-api-overview.html#webpage",
    "url": "writerside-documentation/blobstore-java-api-overview.html",
    "name": "Blobstore Java API Overview | Google App Engine Java Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Google App Engine Java Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Blobstore-Java-API-Overview" data-main-title="Blobstore Java API Overview" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Guides.md|Guides///Storing-Data.md|Storing Data///Superseded-Storage-Solutions.md|Superseded Storage Solutions///Blobstore.md|Blobstore"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Google App Engine Java Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Blobstore-Java-API-Overview" id="Blobstore-Java-API-Overview.md">Blobstore Java API Overview</h1><p id="kkxepb_3"><a href="https://web.archive.org/web/20160424225902/https://cloud.google.com/appengine/docs/python/blobstore/" id="kkxepb_19" data-tooltip="View this page in the Python runtime" data-external="true" rel="noopener noreferrer" target="_blank">Python</a> |Java |PHP |<a href="https://web.archive.org/web/20160424225902/https://cloud.google.com/appengine/docs/go/blobstore/" id="kkxepb_20" data-tooltip="View this page in the Go runtime" data-external="true" rel="noopener noreferrer" target="_blank">Go</a></p><p id="kkxepb_4"><a href="https://web.archive.org/web/20160424225902/http://stackoverflow.com/questions/tagged/google-app-engine+blobstore" id="kkxepb_21" data-external="true" rel="noopener noreferrer" target="_blank"><figure id="kkxepb_22"><img alt="Stack overflow questions" src="https://web.archive.org/web/20160424225902im_/https://cloud.google.com/cloud/images/stack_overflow_questions.png" title="Stack Overflow Questions" width="240" height="53"></figure></a></p><p id="kkxepb_5"><a href="https://web.archive.org/web/20160424225902/http://stackoverflow.com/feeds/tag?sort=votes&amp;tagnames=google-app-engine%2Bblobstore" id="kkxepb_23" data-external="true" rel="noopener noreferrer" target="_blank">https://web.archive.org/web/20160424225902/http://stackoverflow.com/feeds/tag?sort=votes&amp;tagnames=google-app-engine%2Bblobstore</a></p><p id="kkxepb_6"></p><p id="kkxepb_7"><a href="https://web.archive.org/web/20160424225902/http://stackoverflow.com/questions/tagged/google-app-engine+blobstore?sort=votes" id="kkxepb_24" data-external="true" rel="noopener noreferrer" target="_blank">See more...</a></p><p id="kkxepb_8"><span class="control" id="kkxepb_25">Note:</span> You should consider using <a href="https://web.archive.org/web/20160424225902/https://cloud.google.com/appengine/docs/java/googlecloudstorageclient/" id="kkxepb_26" data-external="true" rel="noopener noreferrer" target="_blank">Google Cloud Storage</a> rather than Blobstore for storing blob data.</p><p id="kkxepb_9">The Blobstore API allows your application to serve data objects, called <span class="emphasis" id="kkxepb_27">blobs,</span> that are much larger than the size allowed for objects in the Datastore service. Blobs are useful for serving large files, such as video or image files, and for allowing users to upload large data files. Blobs are created by uploading a file through an HTTP request. Typically, your applications will do this by presenting a form with a file upload field to the user. When the form is submitted, the Blobstore creates a blob from the file's contents and returns an opaque reference to the blob, called a <span class="emphasis" id="kkxepb_28">blob key,</span> which you can later use to serve the blob. The application can serve the complete blob value in response to a user request, or it can read the value directly using a streaming file-like interface.</p><ol class="list _decimal" id="kkxepb_10" type="1"><li class="list__item" id="kkxepb_29"><p id="kkxepb_37"><span id="kkxepb_38">Introducing the Blobstore</span></p></li><li class="list__item" id="kkxepb_30"><p id="kkxepb_39"><span id="kkxepb_40">Using the Blobstore</span></p></li><li class="list__item" id="kkxepb_31"><p id="kkxepb_41"><span id="kkxepb_42">Uploading a blob</span></p></li><li class="list__item" id="kkxepb_32"><p id="kkxepb_43"><span id="kkxepb_44">Serving a blob</span></p></li><li class="list__item" id="kkxepb_33"><p id="kkxepb_45"><span id="kkxepb_46">Complete sample application</span></p></li><li class="list__item" id="kkxepb_34"><p id="kkxepb_47"><span id="kkxepb_48">Using the Images service with the Blobstore</span></p></li><li class="list__item" id="kkxepb_35"><p id="kkxepb_49"><span id="kkxepb_50">Using the Blobstore API with Google Cloud Storage</span></p></li><li class="list__item" id="kkxepb_36"><p id="kkxepb_51"><span id="kkxepb_52">Quotas and limits</span></p></li></ol><section class="chapter"><h2 id="introducing-the-blobstore" data-toc="introducing-the-blobstore">Introducing the Blobstore</h2><p id="kkxepb_53">Google App Engine includes the Blobstore service, which allows applications to serve data objects limited only by the amount of data that can be uploaded or downloaded over a single HTTP connection. These objects are called <span class="emphasis" id="kkxepb_59">Blobstore values,</span> or <span class="emphasis" id="kkxepb_60">blobs.</span> Blobstore values are served as responses from request handlers and are created as uploads via web forms. Applications do not create blob data directly; instead, blobs are created indirectly, by a submitted web form or other HTTP <code class="code" id="kkxepb_61">POST</code> request. Blobstore values can be served to the user, or accessed by the application in a file-like stream, using the Blobstore API.</p><p id="kkxepb_54"><span class="control" id="kkxepb_62">Note:</span> Blobs as defined by the Blobstore service are not related to blob property values used by the datastore.</p><p id="kkxepb_55">To prompt a user to upload a Blobstore value, your application presents a web form with a file upload field. The application generates the form's action URL by calling the Blobstore API. The user's browser uploads the file directly to the Blobstore via the generated URL. Blobstore then stores the blob, rewrites the request to contain the blob key, and passes it to a path in your application. A request handler at that path in your application can perform additional form processing.</p><p id="kkxepb_56">To serve a blob, your application sets a header on the outgoing response, and App Engine replaces the response with the blob value.</p><p id="kkxepb_57">Blobs can't be modified after they're created, though they can be deleted. Each blob has a corresponding <span class="emphasis" id="kkxepb_63">blob info record</span>, stored in the datastore, that provides details about the blob, such as its creation time and content type. You can use the blob key to fetch blob info records and query their properties.</p><p id="kkxepb_58">An application can read a Blobstore value a portion at a time using an API call. The size of the portion can be up to the maximum size of an API return value. This size is a little less than 32 megabytes, represented in Java by the constant <code class="code" id="kkxepb_64">com.google.appengine.api.blobstore.BlobstoreService.MAX_BLOB_FETCH_SIZE</code>. An application cannot create or modify Blobstore values except through files uploaded by the user.</p></section><section class="chapter"><h2 id="using-the-blobstore" data-toc="using-the-blobstore">Using the Blobstore</h2><p id="kkxepb_65">Applications can use the Blobstore to accept large files as uploads from users and to serve those files. Files are called blobs once they're uploaded. Applications don't access blobs directly. Instead, applications work with blobs through <span class="emphasis" id="kkxepb_68">blob info entities</span> (represented by the <code class="code" id="kkxepb_69">BlobInfo</code> class) in the datastore.</p><p id="kkxepb_66">The user creates a blob by submitting an HTML form that includes one or more file input fields. Your application sets <code class="code" id="kkxepb_70">blobstoreService.createUploadUrl()</code> as the destination (action) of this form, passing the function a URL path of a handler in your application. When the user submits the form, the user's browser uploads the specified files directly to the Blobstore. The Blobstore rewrites the user's request and stores the uploaded file data, replacing the uploaded file data with one or more corresponding blob keys, then passes the rewritten request to the handler at the URL path you provided to <code class="code" id="kkxepb_71">blobstoreService.createUploadUrl()</code>. This handler can do additional processing based on the blob key.</p><p id="kkxepb_67">The application can read portions of a Blobstore value using a file-like streaming interface. See the <a href="https://web.archive.org/web/20160424225902/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/BlobstoreInputStream" id="kkxepb_72" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="kkxepb_73">BlobstoreInputStream</code></a> class.</p></section><section class="chapter"><h2 id="uploading-a-blob" data-toc="uploading-a-blob">Uploading a blob</h2><p id="kkxepb_74">To create and upload a blob, follow this procedure:</p><section class="chapter"><h3 id="1-create-an-upload-url" data-toc="1-create-an-upload-url">1. Create an upload URL</h3><p id="kkxepb_78">Call <code class="code" id="kkxepb_81">blobstoreService.createUploadUrl</code> to create an upload URL for the form that the user will fill out, passing the application path to load when the <code class="code" id="kkxepb_82">POST</code> of the form is completed.</p><div class="code-block" data-lang="none">
&lt;body&gt;
    &lt;form action=&quot;&lt;%= blobstoreService.createUploadUrl(&quot;/upload&quot;) %&gt;&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
        &lt;input type=&quot;file&quot; name=&quot;myFile&quot;&gt;
        &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;
    &lt;/form&gt;
&lt;/body&gt;
</div><p id="kkxepb_80">Note that this is how the upload form would look if it were created as a JSP.</p></section><section class="chapter"><h3 id="2-create-an-upload-form" data-toc="2-create-an-upload-form">2. Create an upload form</h3><p id="kkxepb_83">The form must include a file upload field, and the form's <code class="code" id="kkxepb_84">enctype</code> must be set to <code class="code" id="kkxepb_85">multipart/form-data</code>. When the user submits the form, the <code class="code" id="kkxepb_86">POST</code> is handled by the Blobstore API, which creates the blob. The API also creates an info record for the blob and stores the record in the datastore, and passes the rewritten request to your application on the given path as a blob key.</p></section><section class="chapter"><h3 id="3-implement-upload-handler" data-toc="3-implement-upload-handler">3. Implement upload handler</h3><p id="kkxepb_87">In this handler, you can store the blob key with the rest of your application's data model. The blob key itself remains accessible from the blob info entity in the datastore. Note that after the user submits the form and your handler is called, the blob has already been saved and the blob info added to the datastore. If your application doesn't want to keep the blob, you should delete the blob immediately to prevent it from becoming orphaned:</p><p id="kkxepb_88">In the following code, <code class="code" id="kkxepb_91">getUploads</code> returns a set of blobs that have been uploaded. The <code class="code" id="kkxepb_92">Map</code> object is a list that associates the names of the upload fields to the blobs they contained.</p><div class="code-block" data-lang="none">
Map&lt;String, List&lt;BlobKey&gt;&gt; blobs = blobstoreService.getUploads(req);
List&lt;BlobKey&gt; blobKeys = blobs.get(&quot;myFile&quot;);

if (blobKeys == null || blobKeys.isEmpty()) {
    res.sendRedirect(&quot;/&quot;);
} else {
    res.sendRedirect(&quot;/serve?blob-key=&quot; + blobKeys.get(0).getKeyString());
}
</div><p id="kkxepb_90">When the Blobstore rewrites the user's request, the MIME parts of the uploaded files have their bodies emptied, and the blob key is added as a MIME part header. All other form fields and parts are preserved and passed to the upload handler. If you don't specify a content type, the Blobstore will try to infer it from the file extension. If no content type can be determined, the newly created blob is assigned content type <code class="code" id="kkxepb_93">application/octet-stream</code>.</p></section></section><section class="chapter"><h2 id="serving-a-blob" data-toc="serving-a-blob">Serving a blob</h2><p id="kkxepb_94"><span class="control" id="kkxepb_99">Note:</span> If you are serving images, a more efficient and potentially less-expensive method is to use <a href="https://web.archive.org/web/20160424225902/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/images/ImagesService#getServingUrl(com.google.appengine.api.blobstore.BlobKey,%20int,%20boolean)" id="kkxepb_100" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="kkxepb_103">getServingUrl()</code></a> using the App Engine Images API rather than <code class="code" id="kkxepb_101">blobstoreService.serve()</code>. The <code class="code" id="kkxepb_102">getServingUrl</code> method lets you serve the image directly, without having to go through your App Engine instances.</p><p id="kkxepb_95">To serve blobs, you must include a blob download handler as a path in your application. This handler should pass the blob key for the desired blob to <code class="code" id="kkxepb_104">blobstoreService.serve(blobKey, res);</code>. In this example, the blob key is passed to the download handler as the URL argument <code class="code" id="kkxepb_105">(req.getParameter('blob-key'))</code>. In practice, the download handler can get the blob key by any means you choose, such as through another method or user action.</p><div class="code-block" data-lang="none">
public void doGet(HttpServletRequest req, HttpServletResponse res)
    throws IOException {
        BlobKey blobKey = new BlobKey(req.getParameter(&quot;blob-key&quot;));
        blobstoreService.serve(blobKey, res);
</div><p id="kkxepb_97">Blobs can be served from any application URL. To serve a blob in your application, you put a special header in the response containing the blob key. App Engine replaces the body of the response with the content of the blob.</p><section class="chapter"><h3 id="blob-byte-ranges" data-toc="blob-byte-ranges">Blob byte ranges</h3><p id="kkxepb_106">The Blobstore supports serving part of a large value instead of the full value in response to a request. To serve a partial value, include the <code class="code" id="kkxepb_110">X-AppEngine-BlobRange</code> header in the outgoing response. Its value is a standard <a href="https://web.archive.org/web/20160424225902/http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html" id="kkxepb_111" data-external="true" rel="noopener noreferrer" target="_blank">HTTP byte range</a>. The byte numbering is zero-based. A blank <code class="code" id="kkxepb_112">X-AppEngine-BlobRange</code> instructs the API to ignore the range header and serve the full blob. Example ranges include:</p><ul class="list _bullet" id="kkxepb_107"><li class="list__item" id="kkxepb_113"><p id="kkxepb_117"><code class="code" id="kkxepb_118">0-499</code> serves the first 500 bytes of the value (bytes 0 through 499, inclusive).</p></li><li class="list__item" id="kkxepb_114"><p id="kkxepb_119"><code class="code" id="kkxepb_120">500-999</code> serves 500 bytes starting with the 501st byte.</p></li><li class="list__item" id="kkxepb_115"><p id="kkxepb_121"><code class="code" id="kkxepb_122">500-</code> serves all bytes starting with the 501st byte to the end of the value.</p></li><li class="list__item" id="kkxepb_116"><p id="kkxepb_123"><code class="code" id="kkxepb_124">-500</code> serves the last 500 bytes of the value.</p></li></ul><p id="kkxepb_108">If the byte range is valid for the Blobstore value, the Blobstore sends a <code class="code" id="kkxepb_125">206</code> <code class="code" id="kkxepb_126">Partial</code> <code class="code" id="kkxepb_127">Content</code> status code and the requested byte range to the client. If the range is not valid for the value, the Blobstore sends <code class="code" id="kkxepb_128">416</code> <code class="code" id="kkxepb_129">Requested</code> <code class="code" id="kkxepb_130">Range</code> <code class="code" id="kkxepb_131">Not</code> <code class="code" id="kkxepb_132">Satisfiable</code>.</p><p id="kkxepb_109">The Blobstore does not support multiple byte ranges in a single request (for example, <code class="code" id="kkxepb_133">100-199,200-299</code>), whether or not they overlap.</p></section></section><section class="chapter"><h2 id="complete-sample-application" data-toc="complete-sample-application">Complete sample application</h2><p id="kkxepb_134">In the following sample application, the application's main URL loads the form that asks the user for a file to upload, and the upload handler immediately calls the download handler to serve the data. This is to simplify the sample application. In practice, you would probably not use the main URL to request upload data, nor would you immediately serve a blob you had just uploaded.</p><div class="code-block" data-lang="none">
// file Upload.java

import java.io.IOException;
import java.util.List;
import java.util.Map;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.google.appengine.api.blobstore.BlobKey;
import com.google.appengine.api.blobstore.BlobstoreService;
import com.google.appengine.api.blobstore.BlobstoreServiceFactory;

public class Upload extends HttpServlet {
    private BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();

    @Override
    public void doPost(HttpServletRequest req, HttpServletResponse res)
        throws ServletException, IOException {

        Map&lt;String, List&lt;BlobKey&gt;&gt; blobs = blobstoreService.getUploads(req);
        List&lt;BlobKey&gt; blobKeys = blobs.get(&quot;myFile&quot;);

        if (blobKeys == null || blobKeys.isEmpty()) {
            res.sendRedirect(&quot;/&quot;);
        } else {
            res.sendRedirect(&quot;/serve?blob-key=&quot; + blobKeys.get(0).getKeyString());
        }
    }
}

// file Serve.java

import java.io.IOException;

import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.google.appengine.api.blobstore.BlobKey;
import com.google.appengine.api.blobstore.BlobstoreService;
import com.google.appengine.api.blobstore.BlobstoreServiceFactory;

public class Serve extends HttpServlet {
    private BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();

    @Override
    public void doGet(HttpServletRequest req, HttpServletResponse res)
        throws IOException {
            BlobKey blobKey = new BlobKey(req.getParameter(&quot;blob-key&quot;));
            blobstoreService.serve(blobKey, res);
        }
}


// file index.jsp

&lt;%@ page import=&quot;com.google.appengine.api.blobstore.BlobstoreServiceFactory&quot; %&gt;
&lt;%@ page import=&quot;com.google.appengine.api.blobstore.BlobstoreService&quot; %&gt;

&lt;%
    BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
%&gt;


&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Upload Test&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form action=&quot;&lt;%= blobstoreService.createUploadUrl(&quot;/upload&quot;) %&gt;&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
            &lt;input type=&quot;text&quot; name=&quot;foo&quot;&gt;
            &lt;input type=&quot;file&quot; name=&quot;myFile&quot;&gt;
            &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;

// web.xml

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
   xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;
   xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;
   xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee
   http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; version=&quot;2.5&quot;&gt;

  &lt;servlet&gt;
    &lt;servlet-name&gt;Upload&lt;/servlet-name&gt;
    &lt;servlet-class&gt;Upload&lt;/servlet-class&gt;
  &lt;/servlet&gt;
  
  &lt;servlet&gt;
    &lt;servlet-name&gt;Serve&lt;/servlet-name&gt;
    &lt;servlet-class&gt;Serve&lt;/servlet-class&gt;
  &lt;/servlet&gt;
 
  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Upload&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/upload&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;

  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Serve&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/serve&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;
  
&lt;/web-app&gt;
</div></section><section class="chapter"><h2 id="using-the-images-service-with-the-blobstore" data-toc="using-the-images-service-with-the-blobstore">Using the Images service with the Blobstore</h2><p id="kkxepb_136">The Images service can use a Blobstore value as the source of a transformation. The source image can be as large as the maximum size for a Blobstore value. The Images service still returns the transformed image to the application, so the transformed image must be smaller than 32 megabytes. This is useful for making thumbnail images of large photographs uploaded by users.</p><p id="kkxepb_137">For information on using the Images service with Blobstore values, see the <a href="https://web.archive.org/web/20160424225902/https://cloud.google.com/appengine/docs/java/images/overview" id="kkxepb_138" data-external="true" rel="noopener noreferrer" target="_blank">Images Service documentation</a>.</p></section><section class="chapter"><h2 id="using-the-blobstore-api-with-google-cloud-storage" data-toc="using-the-blobstore-api-with-google-cloud-storage">Using the Blobstore API with Google Cloud Storage</h2><p id="kkxepb_139">You can use the Blobstore API to store blobs in Cloud Storage instead of storing them in Blobstore. You need to set up a bucket as described in the <a href="https://web.archive.org/web/20160424225902/https://cloud.google.com/appengine/docs/java/googlecloudstorageclient" id="kkxepb_144" data-external="true" rel="noopener noreferrer" target="_blank">Google Cloud Storage</a> documentation and specify the bucket and filename in the <code class="code" id="kkxepb_145">BlobstoreService</code> <a href="https://web.archive.org/web/20160424225902/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/BlobstoreService#createUploadUrl(java.lang.String,%20com.google.appengine.api.blobstore.UploadOptions)" id="kkxepb_146" data-external="true" rel="noopener noreferrer" target="_blank">createUploadUrl</a>, specify the bucket name in the <code class="code" id="kkxepb_147">UploadOptions</code> parameter. In your upload handler, you need to process the returned <a href="https://web.archive.org/web/20160424225902/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/FileInfo" id="kkxepb_148" data-external="true" rel="noopener noreferrer" target="_blank">FileInfo</a> metadata and explicitly store the Google Cloud Storage filename needed to retrieve the blob later.</p><p id="kkxepb_140">You can also serve Cloud Storage objects using the Blobstore API.</p><p id="kkxepb_141">The following code snippets shows how to do this. This sample is in a request handler that gets the bucket name and object name in the request. It creates the Blobstore service and use it to create a blob key for Google Cloud Storage, using the supplied bucket and object name:</p><div class="code-block" data-lang="none">
BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
BlobKey blobKey = blobstoreService.createGsBlobKey(
    &quot;/gs/&quot; + fileName.getBucketName() + &quot;/&quot; + fileName.getObjectName());
blobstoreService.serve(blobKey, resp);
</div><p id="kkxepb_143"><span class="control" id="kkxepb_149">Note:</span> Once you obtain a <code class="code" id="kkxepb_150">blobKey</code> for the Google Cloud Storage object, you can pass it around, serialize it, and otherwise use it interchangeably anywhere you can use a <code class="code" id="kkxepb_151">blobKey</code> for objects stored in Blobstore. This allows for usage where an app stores some data in blobstore and some in Google Cloud Storage, but treats the data otherwise identically by the rest of the app. (However, <code class="code" id="kkxepb_152">BlobInfo</code> objects are not available for Google Cloud Storage objects.)</p></section><section class="chapter"><h2 id="quotas-and-limits" data-toc="quotas-and-limits">Quotas and limits</h2><p id="kkxepb_153">Space used for Blobstore values contributes to the <span class="control" id="kkxepb_156">Stored Data (billable)</span> quota. Blob info entities in the datastore count towards datastore-related limits.</p><p id="kkxepb_154">For more information on system-wide safety quotas, see <a href="https://web.archive.org/web/20160424225902/https://cloud.google.com/appengine/docs/quotas" id="kkxepb_157" data-external="true" rel="noopener noreferrer" target="_blank">Quotas</a>, and the <span class="control" id="kkxepb_158">Quota Details</span> section of <a href="https://web.archive.org/web/20160424225902/https://cloud.google.com/appengine/docs/developers-console/#quotas" id="kkxepb_159" data-external="true" rel="noopener noreferrer" target="_blank">the Cloud Platform Console</a>.</p><p id="kkxepb_155">In addition to system-wide safety quotas, a limit applies specifically to the use of the Blobstore: the maximum size of Blobstore data that can be read by the application with one API call is 32 megabytes.</p></section><div class="last-modified">10 April 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="blobstore.html" class="navigation-links__prev">Blobstore</a><a href="jdo-for-cloud-datastore.html" class="navigation-links__next">JDO for Cloud Datastore</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>