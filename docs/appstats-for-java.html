<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-13T01:56:45.031591397"><title>Appstats for Java | Google App Engine Java Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"contents","level":0,"title":"Contents","anchor":"#contents"},{"id":"setup","level":0,"title":"Setup","anchor":"#setup"},{"id":"a-tour-of-the-appstats-console","level":0,"title":"A tour of the Appstats console","anchor":"#a-tour-of-the-appstats-console"},{"id":"how-it-works","level":0,"title":"How it works","anchor":"#how-it-works"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Appstats for Java | Google App Engine Java Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Google App Engine Java Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/appstats-for-java.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Appstats for Java | Google App Engine Java Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/appstats-for-java.html#webpage",
    "url": "writerside-documentation/appstats-for-java.html",
    "name": "Appstats for Java | Google App Engine Java Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Google App Engine Java Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Appstats-for-Java" data-main-title="Appstats for Java" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="APIs-Reference.md|APIs &amp;amp; Reference///Development-Tools.md|Development Tools"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Google App Engine Java Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Appstats-for-Java" id="Appstats-for-Java.md">Appstats for Java</h1><p id="vkg56w_3">The Java SDK includes the Appstats library used for profiling the RPC (<a href="https://web.archive.org/web/20160424230757/https://en.wikipedia.org/wiki/Remote_procedure_call" id="vkg56w_15" data-external="true" rel="noopener noreferrer" target="_blank">Remote Procedure Call</a>) performance of your application. An App Engine RPC is a roundtrip network call between your application and an <a href="https://web.archive.org/web/20160424230757/https://cloud.google.com/appengine/docs/java/apis" id="vkg56w_16" data-external="true" rel="noopener noreferrer" target="_blank">App Engine Service API</a>. For example, all of these API calls are RPC calls:</p><ul class="list _bullet" id="vkg56w_4"><li class="list__item" id="vkg56w_17"><p id="vkg56w_21"><a href="https://web.archive.org/web/20160424230757/https://cloud.google.com/appengine/docs/java/datastore" id="vkg56w_22" data-external="true" rel="noopener noreferrer" target="_blank">Datastore</a> calls such as <code class="code" id="vkg56w_23">DatastoreService.get()</code>, <code class="code" id="vkg56w_24">DatastoreService.put()</code>, or <code class="code" id="vkg56w_25">DatastoreService.query()</code>.</p></li><li class="list__item" id="vkg56w_18"><p id="vkg56w_26"><a href="https://web.archive.org/web/20160424230757/https://cloud.google.com/appengine/docs/java/memcache" id="vkg56w_27" data-external="true" rel="noopener noreferrer" target="_blank">Memcache</a> calls such as <code class="code" id="vkg56w_28">MemcacheService.get()</code>, or <code class="code" id="vkg56w_29">MemcacheService.getAll()</code>.</p></li><li class="list__item" id="vkg56w_19"><p id="vkg56w_30"><a href="https://web.archive.org/web/20160424230757/https://cloud.google.com/appengine/docs/java/urlfetch" id="vkg56w_31" data-external="true" rel="noopener noreferrer" target="_blank">URL Fetch</a> calls.</p></li><li class="list__item" id="vkg56w_20"><p id="vkg56w_32"><a href="https://web.archive.org/web/20160424230757/https://cloud.google.com/appengine/docs/java/mail" id="vkg56w_33" data-external="true" rel="noopener noreferrer" target="_blank">Mail</a> calls.</p></li></ul><p id="vkg56w_5">Optimizing or debugging a scalable application can be a challenge because numerous issues can cause poor performance or unexpected costs. These issues are very difficult to debug with the usual sources of information, like logs or request time stats. Most application requests spend the majority of their time waiting for network calls to complete as part of satisfying the request.</p><p id="vkg56w_6">To keep your application fast, you need to know:</p><ul class="list _bullet" id="vkg56w_7"><li class="list__item" id="vkg56w_34"><p id="vkg56w_37">Is your application making unnecessary RPC calls?</p></li><li class="list__item" id="vkg56w_35"><p id="vkg56w_38">Should it cache data instead of making repeated RPC calls to get the same data?</p></li><li class="list__item" id="vkg56w_36"><p id="vkg56w_39">Will your application perform better if multiple requests are executed in parallel rather than serially?</p></li></ul><p id="vkg56w_8">The Appstats library helps you answer these questions and verify that your application is using RPC calls in the most efficient way by allowing you to profile your RPC calls. Appstats allows you to trace all RPC calls for a given request and reports on the time and cost of each call.</p><p id="vkg56w_9">(For more information about managing application cost, see the <a href="https://web.archive.org/web/20160424230757/https://cloud.google.com/appengine/articles/managing-resources" id="vkg56w_40" data-external="true" rel="noopener noreferrer" target="_blank">Managing Your App's Resource Usage</a> article.)</p><p id="vkg56w_10"><a href="https://web.archive.org/web/20160424230757/https://www.youtube.com/watch?v=bvp7CuBWVgA" id="vkg56w_41" data-external="true" rel="noopener noreferrer" target="_blank"><span class="control" id="vkg56w_42">Watch a video demonstration.</span></a></p><section class="chapter"><h2 id="contents" data-toc="contents">Contents</h2><ol class="list _decimal" id="vkg56w_43" type="1"><li class="list__item" id="vkg56w_44"><p id="vkg56w_47"><span id="vkg56w_49">Setup</span></p><ol class="list _decimal" id="vkg56w_48" type="1"><li class="list__item" id="vkg56w_50"><p id="vkg56w_55"><span id="vkg56w_56">Install the event recorder</span></p></li><li class="list__item" id="vkg56w_51"><p id="vkg56w_57"><span id="vkg56w_58">Set the console path</span></p></li><li class="list__item" id="vkg56w_52"><p id="vkg56w_59"><span id="vkg56w_60">Optional configuration</span></p></li><li class="list__item" id="vkg56w_53"><p id="vkg56w_61"><span id="vkg56w_62">Test Appstats from the development server</span></p></li><li class="list__item" id="vkg56w_54"><p id="vkg56w_63"><span id="vkg56w_64">Deploy</span></p></li></ol></li><li class="list__item" id="vkg56w_45"><p id="vkg56w_65"><span id="vkg56w_66">A tour of the Appstats console</span></p></li><li class="list__item" id="vkg56w_46"><p id="vkg56w_67"><span id="vkg56w_68">How it works</span></p></li></ol></section><section class="chapter"><h2 id="setup" data-toc="setup">Setup</h2><p id="vkg56w_69">There is nothing to download or install to begin using Appstats. You just need to configure your application, redeploy, and access the Appstats console as described in the steps below. The Appstats library takes care of the rest.</p><section class="chapter"><h3 id="dependencies" data-toc="dependencies">Dependencies</h3><p id="vkg56w_76">You need to add the dependency <code class="code" id="vkg56w_79">appengine-api-labs</code> to your project. The following is one way to do this in the Maven <code class="code" id="vkg56w_80">pom.xml</code> file:</p><div class="code-block" data-lang="none">
&lt;dependency&gt;
 &lt;groupId&gt;com.google.appengine&lt;/groupId&gt;
 &lt;artifactId&gt;appengine-api-labs&lt;/artifactId&gt;
 &lt;version&gt;${gae.version}&lt;/version&gt;
 &lt;!-- &lt;scope&gt;test&lt;/scope&gt; --&gt;
&lt;/dependency&gt;
</div><p id="vkg56w_78">where <code class="code" id="vkg56w_81">gae.version</code> is the App Engine version.</p></section><section class="chapter"><h3 id="1-install-the-event-recorder" data-toc="1-install-the-event-recorder">1. Install the event recorder</h3><p id="vkg56w_82">Appstats gathers information about each request using a servlet filter, a class provided by the SDK. You install the filter on requests you wish to monitor by adding <code class="code" id="vkg56w_86">&lt;filter&gt;</code> and <code class="code" id="vkg56w_87">&lt;filter-mapping&gt;</code> elements to your <a href="https://web.archive.org/web/20160424230757/https://cloud.google.com/appengine/docs/java/config/webxml" id="vkg56w_88" data-external="true" rel="noopener noreferrer" target="_blank">deployment descriptor</a> (<code class="code" id="vkg56w_89">web.xml</code>).</p><p id="vkg56w_83">To install the servlet filter, add a section similar to the following in the top-level element of your <code class="code" id="vkg56w_90">web.xml</code> file:</p><div class="code-block" data-lang="none">
&lt;filter&gt;
  &lt;filter-name&gt;appstats&lt;/filter-name&gt;
   &lt;filter-class&gt;com.google.appengine.tools.appstats.AppstatsFilter&lt;/filter-class&gt;
&lt;/filter&gt;

&lt;filter-mapping&gt;
  &lt;filter-name&gt;appstats&lt;/filter-name&gt;
  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
</div><p id="vkg56w_85">This installs the filter for all URLs, with the <code class="code" id="vkg56w_91">&lt;url-pattern&gt;</code> of <code class="code" id="vkg56w_92">/*</code>. (This includes the Appstats web-based console discussed below, which you may prefer to exclude from recording.) You can specify a different pattern to limit Appstats to URLs that match the pattern.</p></section><section class="chapter"><h3 id="2-set-the-console-path" data-toc="2-set-the-console-path">2. Set the console path</h3><p id="vkg56w_93">The Appstats console is accessed by visiting a URL for your application in a web browser. You set up this console as part of your application, using a servlet class provided by the SDK.</p><p id="vkg56w_94">To set up the console at the URL path <code class="code" id="vkg56w_96">/appstats/</code>, secured so that only application administrators can access it, add the following in the top-level element of your <code class="code" id="vkg56w_97">web.xml</code> file:</p><div class="code-block" data-lang="none">
&lt;servlet&gt;
  &lt;servlet-name&gt;appstats&lt;/servlet-name&gt;
  &lt;servlet-class&gt;com.google.appengine.tools.appstats.AppstatsServlet&lt;/servlet-class&gt;
&lt;/servlet&gt;

&lt;servlet-mapping&gt;
  &lt;servlet-name&gt;appstats&lt;/servlet-name&gt;
  &lt;url-pattern&gt;/appstats/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;

&lt;security-constraint&gt;
  &lt;web-resource-collection&gt;
    &lt;web-resource-name&gt;appstats&lt;/web-resource-name&gt;
    &lt;url-pattern&gt;/appstats/*&lt;/url-pattern&gt;
  &lt;/web-resource-collection&gt;
  &lt;auth-constraint&gt;
    &lt;role-name&gt;admin&lt;/role-name&gt;
  &lt;/auth-constraint&gt;
&lt;/security-constraint&gt;
</div></section><section class="chapter"><h3 id="3-optional-configuration" data-toc="3-optional-configuration">3. Optional configuration</h3><section class="chapter"><h4 id="custom-console" data-toc="custom-console">Custom console</h4><p id="vkg56w_102">You can use <a href="https://web.archive.org/web/20160424230757/https://cloud.google.com/appengine/docs/java/config/appconfig#Java_appengine_web_xml_Administration_console_custom_pages" id="vkg56w_104" data-external="true" rel="noopener noreferrer" target="_blank">Administration Console Custom Pages</a> to add a convenient Appstats console link on the Administration Console. To create a custom link named &quot;Appstats&quot; to the default Appstats console path, add the following in the top-level element of your <code class="code" id="vkg56w_105">appengine-web.xml</code> file:</p><div class="code-block" data-lang="none">
&lt;admin-console&gt;
  &lt;page name=&quot;Appstats&quot; url=&quot;/appstats&quot; /&gt;
&lt;/admin-console&gt;
</div></section><section class="chapter"><h4 id="logging" data-toc="logging">Logging</h4><p id="vkg56w_106">The <code class="code" id="vkg56w_111">AppstatsFilter</code> class can be configured to write request-specific information to <a href="https://web.archive.org/web/20160424230757/https://cloud.google.com/appengine/docs/java/#Java_Logging" id="vkg56w_112" data-external="true" rel="noopener noreferrer" target="_blank">application logs</a>. To enable this logging, modify the <code class="code" id="vkg56w_113">filter</code> element created in <span id="vkg56w_114">step 1</span> to include the <code class="code" id="vkg56w_115">logMessage</code> parameter:</p><div class="code-block" data-lang="none">
&lt;filter&gt;
  &lt;filter-name&gt;appstats&lt;/filter-name&gt;
  &lt;filter-class&gt;com.google.appengine.tools.appstats.AppstatsFilter&lt;/filter-class&gt;
  &lt;init-param&gt;
    &lt;param-name&gt;logMessage&lt;/param-name&gt;
    &lt;param-value&gt;Appstats available: /appstats/details?time={ID}&lt;/param-value&gt;
  &lt;/init-param&gt;
&lt;/filter&gt;
</div><p id="vkg56w_108">The text value of <code class="code" id="vkg56w_116">param-value</code> is appended to the log for each request processed by the filter, with <code class="code" id="vkg56w_117">{ID}</code> replaced by the ID of the request. The text in this example provides a path to the Appstats details for the request.</p><p id="vkg56w_109">These log entries are written at the &quot;INFO&quot; level, so you must also set the log level to &quot;INFO&quot;. This can be set specifically for the <code class="code" id="vkg56w_118">AppstatsFilter</code> class by adding the following to your <code class="code" id="vkg56w_119">logging.properties</code> file:</p><div class="code-block" data-lang="none">
com.google.appengine.tools.appstats.AppstatsFilter.level = INFO
</div></section><section class="chapter"><h4 id="displaying-cost" data-toc="displaying-cost">Displaying cost</h4><p id="vkg56w_120">AppStats can keep track of RPC <span class="emphasis" id="vkg56w_122">cost</span> as well as time. If your application is fast enough but more expensive than you expect, look for operations that cost more than you expect. To turn on cost tracking, set the <code class="code" id="vkg56w_123">calculateRpcCosts</code> parameter of your <code class="code" id="vkg56w_124">appstats</code> filter to <code class="code" id="vkg56w_125">true</code>:</p><div class="code-block" data-lang="none">
&lt;filter&gt;
  &lt;filter-name&gt;appstats&lt;/filter-name&gt;
  &lt;filter-class&gt;com.google.appengine.tools.appstats.AppstatsFilter&lt;/filter-class&gt;
  &lt;init-param&gt;
    &lt;param-name&gt;calculateRpcCosts&lt;/param-name&gt;
    &lt;param-value&gt;true&lt;/param-value&gt;
  &lt;/init-param&gt;
&lt;/filter&gt;
</div></section><section class="chapter"><h4 id="public-access" data-toc="public-access">Public access</h4><p id="vkg56w_126">By default, only authenticated application administrators can access the Appstats console. To allow public access to the console, you must do two things:</p><ul class="list _bullet" id="vkg56w_127"><li class="list__item" id="vkg56w_129"><p id="vkg56w_131">Modify the <code class="code" id="vkg56w_133">servlet</code> element for the <code class="code" id="vkg56w_134">AppstatsServlet</code> class created in <span id="vkg56w_135">step 2</span> to include the <code class="code" id="vkg56w_136">requireAdminAuthentication</code> parameter set to <code class="code" id="vkg56w_137">false</code>:</p><div class="code-block" data-lang="none">
&lt;servlet&gt;
  &lt;servlet-name&gt;appstats&lt;/servlet-name&gt;
  &lt;servlet-class&gt;com.google.appengine.tools.appstats.AppstatsServlet&lt;/servlet-class&gt;
  &lt;init-param&gt;
    &lt;param-name&gt;requireAdminAuthentication&lt;/param-name&gt;
    &lt;param-value&gt;false&lt;/param-value&gt;
  &lt;/init-param&gt;
&lt;/servlet&gt;
</div></li><li class="list__item" id="vkg56w_130"><p id="vkg56w_138">Remove the <code class="code" id="vkg56w_139">security-constraint</code> element created in <span id="vkg56w_140">step 2</span>.</p></li></ul><p id="vkg56w_128"><span class="control" id="vkg56w_141">Warning:</span> Enabling public access to Appstats data allows anyone to access potentially sensitive data for your application.</p></section></section><section class="chapter"><h3 id="4-test-appstats-from-the-development-server" data-toc="4-test-appstats-from-the-development-server">4. Test Appstats from the development server</h3><p id="vkg56w_142">You can test your Appstats setup with the development server:</p><ul class="list _bullet" id="vkg56w_143"><li class="list__item" id="vkg56w_144"><p id="vkg56w_146">If you are using Eclipse, and have not changed the default port, access the console at: <a href="https://web.archive.org/web/20160424230757/http://localhost:8888/appstats" id="vkg56w_147" data-external="true" rel="noopener noreferrer" target="_blank">http://localhost:8888/appstats/</a>.</p></li><li class="list__item" id="vkg56w_145"><p id="vkg56w_148">If you are using the <code class="code" id="vkg56w_149">dev_appserver</code> command to start the server, and have not changed the default port, access the console at: <a href="https://web.archive.org/web/20160424230757/http://localhost:8080/appstats" id="vkg56w_150" data-external="true" rel="noopener noreferrer" target="_blank">http://localhost:8080/appstats/</a>.</p></li></ul></section><section class="chapter"><h3 id="5-deploy" data-toc="5-deploy">5. Deploy</h3><p id="vkg56w_151">Once you are satisfied with your Appstats setup, deploy your application. Access the console at <code class="code" id="vkg56w_152">http://your_app_id.appspot.com/appstats</code>.</p></section></section><section class="chapter"><h2 id="a-tour-of-the-appstats-console" data-toc="a-tour-of-the-appstats-console">A tour of the Appstats console</h2><p id="vkg56w_153">The Appstats Console provides high-level information on RPC calls made, URL paths requested, a history of recent requests, and details of individual requests:</p><ul class="list _bullet" id="vkg56w_154"><li class="list__item" id="vkg56w_155"><p id="vkg56w_159">The <span class="control" id="vkg56w_161">RPC Stats</span> table shows statistics for each type of RPC made by your application. Clicking a plus button expands the entry to show a breakdown by path request for the RPC:</p><figure id="vkg56w_160"><img alt="Appstats rpc stats" src="https://web.archive.org/web/20160424230757im_/https://cloud.google.com/appengine/docs/images/appstats_rpc_stats.png" title="Appstats rpc stats"></figure></li><li class="list__item" id="vkg56w_156"><p id="vkg56w_162">The <span class="control" id="vkg56w_165">Path Stats</span> table shows statistics for each path request sent to your application. Clicking a plus button expands the entry to show a breakdown by RPC for the path request:</p><figure id="vkg56w_163"><img alt="Appstats path stats" src="https://web.archive.org/web/20160424230757im_/https://cloud.google.com/appengine/docs/images/appstats_path_stats.png" title="Appstats path stats"></figure><p id="vkg56w_164">If you have enabled the <span id="vkg56w_166">API cost tracking</span> feature, this will also display costs.</p></li><li class="list__item" id="vkg56w_157"><p id="vkg56w_167">The <span class="control" id="vkg56w_169">Requests History</span> table shows data pertaining to individual requests. Clicking a plus button expands the entry to show a breakdown by RPC. Clicking on a request link shows a timeline for the request including individual RPC timing:</p><figure id="vkg56w_168"><img alt="Appstats requests history" src="https://web.archive.org/web/20160424230757im_/https://cloud.google.com/appengine/docs/images/appstats_requests_history.png" title="Appstats requests history"></figure></li><li class="list__item" id="vkg56w_158"><p id="vkg56w_170">The RPC <span class="control" id="vkg56w_172">Timeline</span> graph shows when specific RPC calls were made and how long the requests took to process. The <span class="control" id="vkg56w_173">RPC Total</span> bar shows the total time spent waiting on RPC calls, and the <span class="control" id="vkg56w_174">Grand Total</span> bar shows total time spent processing the request. As you can see from the timeline below, the majority of time was spent on RPC calls. This is often the case. The other tabs show additional information about the request. Understanding the impact of RPC calls on your application response time is invaluable when analyzing its performance.</p><figure id="vkg56w_171"><img alt="Appstats rpc" src="https://web.archive.org/web/20160424230757im_/https://cloud.google.com/appengine/docs/images/appstats_rpc.png" title="Appstats rpc"></figure></li></ul></section><section class="chapter"><h2 id="how-it-works" data-toc="how-it-works">How it works</h2><p id="vkg56w_175">The Appstats servlet filter adds itself to the remote procedure call framework that underlies the App Engine service APIs. It records statistics for all API calls made during the request handler, then stores the data in memcache, using a namespace of <code class="code" id="vkg56w_177">__appstats__</code>. Appstats retains statistics for the most recent 1,000 requests (approximately). The data includes summary records, about 200 bytes each, and detail records, which can be up to 100 KB each.</p><p id="vkg56w_176">The Java version of Appstats uses fixed values and behaviors for how data is stored in the memcache and the datastore. (These cannot be configured as they can with the Python version of Appstats.)</p></section><div class="last-modified">10 April 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="using-the-eclipse-web-tools-platform-with-google-app-engine.html" class="navigation-links__prev">Using the Eclipse Web Tools Platform with Google App Engine</a><a href="remote-api.html" class="navigation-links__next">Remote API</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>