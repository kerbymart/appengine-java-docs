<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-13T01:56:45.441109677"><title>Java Task Queue Configuration | Google App Engine Java Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"about-queues","level":0,"title":"About queues","anchor":"#about-queues"},{"id":"setting-the-storage-limit-for-all-queues","level":0,"title":"Setting the storage limit for all queues","anchor":"#setting-the-storage-limit-for-all-queues"},{"id":"defining-push-queues-and-processing-rates","level":0,"title":"Defining push queues and processing rates","anchor":"#defining-push-queues-and-processing-rates"},{"id":"defining-pull-queues","level":0,"title":"Defining pull queues","anchor":"#defining-pull-queues"},{"id":"configuring-retry-attempts-for-failed-tasks","level":0,"title":"Configuring retry attempts for failed tasks","anchor":"#configuring-retry-attempts-for-failed-tasks"},{"id":"queue-definitions","level":0,"title":"Queue definitions","anchor":"#queue-definitions"},{"id":"updating-task-queue-configuration","level":0,"title":"Updating task queue configuration","anchor":"#updating-task-queue-configuration"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Java Task Queue Configuration | Google App Engine Java Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Google App Engine Java Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/java-task-queue-configuration.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Java Task Queue Configuration | Google App Engine Java Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/java-task-queue-configuration.html#webpage",
    "url": "writerside-documentation/java-task-queue-configuration.html",
    "name": "Java Task Queue Configuration | Google App Engine Java Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Google App Engine Java Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Java-Task-Queue-Configuration" data-main-title="Java Task Queue Configuration" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Guides.md|Guides///Managing-and-Configuring-Your-App.md|Managing and Configuring Your App///Configuring-Your-Java-App-with-YAML-Files.md|Configuring Your Java App with YAML Files"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Google App Engine Java Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Java-Task-Queue-Configuration" id="Java-Task-Queue-Configuration.md">Java Task Queue Configuration</h1><p id="-g0bku8_3">Applications define task queues in a configuration file called <code class="code" id="-g0bku8_12">queue.yaml</code>. For Java apps, this file is stored in the application's <code class="code" id="-g0bku8_13">WEB-INF</code> directory. You can use <code class="code" id="-g0bku8_14">queue.yaml</code> to configure both <a href="https://web.archive.org/web/20160424225923/https://cloud.google.com/appengine/docs/java/taskqueue/overview-push" id="-g0bku8_15" data-external="true" rel="noopener noreferrer" target="_blank">push queues</a> and <a href="https://web.archive.org/web/20160424225923/https://cloud.google.com/appengine/docs/java/taskqueue/overview-pull" id="-g0bku8_16" data-external="true" rel="noopener noreferrer" target="_blank">pull queues</a>. This configuration file is optional for push queues, which have a <span id="-g0bku8_17">default queue</span>. Pull queues must be specifically configured in <code class="code" id="-g0bku8_18">queue.yaml</code>.</p><ol class="list _decimal" id="-g0bku8_4" type="1"><li class="list__item" id="-g0bku8_19"><p id="-g0bku8_26"><span id="-g0bku8_27">About queues</span></p></li><li class="list__item" id="-g0bku8_20"><p id="-g0bku8_28"><span id="-g0bku8_29">Setting the storage limit for all queues</span></p></li><li class="list__item" id="-g0bku8_21"><p id="-g0bku8_30"><span id="-g0bku8_31">Defining push queues and processing rates</span></p></li><li class="list__item" id="-g0bku8_22"><p id="-g0bku8_32"><span id="-g0bku8_33">Defining pull queues</span></p></li><li class="list__item" id="-g0bku8_23"><p id="-g0bku8_34"><span id="-g0bku8_35">Configuring retry attempts for failed tasks</span></p></li><li class="list__item" id="-g0bku8_24"><p id="-g0bku8_36"><span id="-g0bku8_37">Queue definitions</span></p></li><li class="list__item" id="-g0bku8_25"><p id="-g0bku8_38"><span id="-g0bku8_39">Updating task queue configuration</span></p></li></ol><section class="chapter"><h2 id="about-queues" data-toc="about-queues">About queues</h2><p id="-g0bku8_40">An app can define task queues using a file named <code class="code" id="-g0bku8_43">queue.yaml</code>, in the app's <code class="code" id="-g0bku8_44">WEB-INF/</code> directory in the WAR. The file specifies a directive named <code class="code" id="-g0bku8_45">queue</code>. Within this directive, you can name any number of individual queues and define their processing rates.</p><p id="-g0bku8_41">The app's queue configuration applies to all versions of the app. If a given version of an app enqueues a task, the queue uses the task handler for that version of the app. To control this behavior, see the <span id="-g0bku8_46">target parameter</span>.</p><p id="-g0bku8_42">An app can only add tasks to queues defined in <code class="code" id="-g0bku8_47">queue.yaml</code> and the default queue. If you upload a new <code class="code" id="-g0bku8_48">queue.yaml</code> file that removes a queue, but that queue still has tasks, the queue is &quot;disabled&quot; (its rate is set to 0) but not deleted. You can re-enable the deleted queue by uploading a new <code class="code" id="-g0bku8_49">queue.yaml</code> file with the queue defined.</p></section><section class="chapter"><h2 id="setting-the-storage-limit-for-all-queues" data-toc="setting-the-storage-limit-for-all-queues">Setting the storage limit for all queues</h2><p id="-g0bku8_50">You can use <code class="code" id="-g0bku8_53">queue.yaml</code> to define the total amount of storage that task data can consume over all queues. To define the total storage limit, include a directive named <code class="code" id="-g0bku8_54">total_storage_limit</code> at the top level just above each <code class="code" id="-g0bku8_55">queue</code> line, like this:</p><div class="code-block" data-lang="none">
# Set the total storage limit for all queues to 120MB
total_storage_limit: 120M
queue:
- name: foo
  rate: 35/s
</div><p id="-g0bku8_52">The value is a number followed by a unit: <code class="code" id="-g0bku8_56">B</code> for bytes, <code class="code" id="-g0bku8_57">K</code> for kilobytes, <code class="code" id="-g0bku8_58">M</code> for megabytes, <code class="code" id="-g0bku8_59">G</code> for gigabytes, <code class="code" id="-g0bku8_60">T</code> for terabytes. For example, <code class="code" id="-g0bku8_61">100K</code> specifies a limit of 100 kilobytes. If adding a task would cause the queue to exceed its storage limit, the call to add the task will fail. The default limit is <code class="code" id="-g0bku8_62">500M</code> (500 megabytes) for free apps. For billed apps there is no limit until you explicitly set one. You can use this limit to protect your app from a <a href="https://web.archive.org/web/20160424225923/https://en.wikipedia.org/wiki/Fork_bomb" id="-g0bku8_63" data-external="true" rel="noopener noreferrer" target="_blank">fork bomb</a> programming error in which each task adds multiple other tasks during its execution. If your app is receiving errors for insufficient quota when adding tasks, increasing the total storage limit may help. If you are using this feature, we strongly recommend setting a limit that corresponds to the storage required for several days' worth of tasks. In this way, your app is robust to its queues being temporarily backed up and can continue to accept new tasks while working through the backlog while still being protected from a fork bomb programming error.</p></section><section class="chapter"><h2 id="defining-push-queues-and-processing-rates" data-toc="defining-push-queues-and-processing-rates">Defining push queues and processing rates</h2><p id="-g0bku8_64">You can define any number of individual queues by providing a queue <code class="code" id="-g0bku8_70">name</code>. You can control the rate at which tasks are processed in each queue by defining other directives, such as <code class="code" id="-g0bku8_71">rate</code>, <code class="code" id="-g0bku8_72">bucket_size</code>, and <code class="code" id="-g0bku8_73">max_concurrent_requests</code>.</p><p id="-g0bku8_65">You can read more about these directives in the <span id="-g0bku8_74">Queue Definitions</span> section.</p><p id="-g0bku8_66">The task queue uses <a href="https://web.archive.org/web/20160424225923/https://wikipedia.org/wiki/Token_bucket" id="-g0bku8_75" data-external="true" rel="noopener noreferrer" target="_blank">token buckets</a> to control the rate of task execution. Each named queue has a token bucket that holds a certain number of tokens, defined by the <code class="code" id="-g0bku8_76">bucket_size</code> directive. Each time your application executes a task, it uses a token. Your app continues processing tasks in the queue until the queue's bucket runs out of tokens. App Engine refills the bucket with new tokens continuously based on the <code class="code" id="-g0bku8_77">rate</code> that you specified for the queue.</p><section class="chapter"><h3 id="configuring-the-default-queue" data-toc="configuring-the-default-queue">Configuring the default queue</h3><p id="-g0bku8_78">All apps have a push queue named <code class="code" id="-g0bku8_80">default</code>. This queue has a preset rate of 5 tasks per second, but you can change this rate by defining a default queue in <code class="code" id="-g0bku8_81">queue.yaml</code>. If you do not configure a default queue in <code class="code" id="-g0bku8_82">queue.yaml</code>, the <code class="code" id="-g0bku8_83">default</code> queue doesn't display in the Cloud Platform Console until the first time it is used. You can customize the settings for this queue by defining a queue named <code class="code" id="-g0bku8_84">default</code> in <code class="code" id="-g0bku8_85">queue.yaml</code>:</p><div class="code-block" data-lang="none">
queue:
# Change the refresh rate of the default queue from 5/s to 1/s
- name: default
  rate: 1/s
</div></section><section class="chapter"><h3 id="configuring-the-processing-rate" data-toc="configuring-the-processing-rate">Configuring the processing rate</h3><p id="-g0bku8_86">If your queue contains tasks to process, and the queue's bucket contains tokens, App Engine processes as many tasks as there are tokens remaining in the bucket. This can lead to bursts of processing, consuming system resources and competing with user-serving requests.</p><p id="-g0bku8_87">If you want to prevent too many tasks from running at once or to prevent datastore contention, you use <code class="code" id="-g0bku8_90">max_concurrent_requests</code>.</p><p id="-g0bku8_88">The following samples shows how to set <code class="code" id="-g0bku8_91">max_concurrent_requests</code> to limit tasks and also shows how to adjust the bucket size and rate based on your application's needs and available resources:</p><div class="code-block" data-lang="none">
queue:
- name: optimize-queue
  rate: 20/s
  bucket_size: 40
  max_concurrent_requests: 10
</div></section><section class="chapter"><h3 id="configuring-the-maximum-number-of-concurrent-requests" data-toc="configuring-the-maximum-number-of-concurrent-requests">Configuring the maximum number of concurrent requests</h3><p id="-g0bku8_92">You can further control the processing rate by setting <code class="code" id="-g0bku8_98">max_concurrent_requests</code>, which limits the number of tasks that can execute simultaneously.</p><p id="-g0bku8_93">If your application queue has a rate of 20/s and a bucket size of 40, tasks in that queue execute at a rate of 20/s and can burst up to 40/s briefly. These settings work fine if task latency is relatively low; however, if latency increases significantly, you'll end up processing significantly more concurrent tasks. This extra processing load can consume extra instances and slow down your application.</p><p id="-g0bku8_94">For example, let's assume that your normal task latency is 0.3 seconds. At this latency, you'll process at most around 40 tasks simultaneously. But if your task latency increases to 5 seconds, you could easily have over 100 tasks processing at once. This increase forces your application to consume more instances to process the extra tasks, potentially slowing down the entire application and interfering with user requests.</p><p id="-g0bku8_95">You can avoid this possibility by setting <code class="code" id="-g0bku8_99">max_concurrent_requests</code> to a lower value. For example, if you set <code class="code" id="-g0bku8_100">max_concurrent_requests</code> to 10, our example queue maintains about 20 tasks/second when latency is 0.3 seconds. However, when the latency increases over 0.5 seconds, this setting throttles the processing rate to ensure that no more than 10 tasks run simultaneously.</p><div class="code-block" data-lang="none">
queue:
# Set the max number of concurrent requests to 50
- name: optimize-queue
  rate: 20/s
  bucket_size: 40
  max_concurrent_requests: 10
</div><p id="-g0bku8_97"></p></section></section><section class="chapter"><h2 id="defining-pull-queues" data-toc="defining-pull-queues">Defining pull queues</h2><p id="-g0bku8_101">You can specify any named queue as a <a href="https://web.archive.org/web/20160424225923/https://cloud.google.com/appengine/docs/java/taskqueue/overview-pull" id="-g0bku8_107" data-external="true" rel="noopener noreferrer" target="_blank">pull queue</a> by adding the <code class="code" id="-g0bku8_108">mode: pull</code> directive to <code class="code" id="-g0bku8_109">queue.yaml</code>.</p><p id="-g0bku8_102">If you are using the <a href="https://web.archive.org/web/20160424225923/https://cloud.google.com/appengine/docs/java/taskqueue/rest" id="-g0bku8_110" data-external="true" rel="noopener noreferrer" target="_blank">Task Queue REST API</a>, you also need to create an access control list (ACL) using the <span id="-g0bku8_111">acl</span> directive. This directive allows you to restrict access to user email addresses corresponding to an account hosted by Google.</p><p id="-g0bku8_103">The <code class="code" id="-g0bku8_112">acl</code> element has two available parameters:</p><ul class="list _bullet" id="-g0bku8_104"><li class="list__item" id="-g0bku8_113"><p id="-g0bku8_115"><code class="code" id="-g0bku8_116">user_email</code>: enables the user to list, get, lease, delete, and update tasks.</p></li><li class="list__item" id="-g0bku8_114"><p id="-g0bku8_117"><code class="code" id="-g0bku8_118">writer_email</code>: enables the user to insert tasks.</p></li></ul><p id="-g0bku8_105">In order to access all functions of the API, a developer's email address must be specified both as a <code class="code" id="-g0bku8_119">user_email</code> and a <code class="code" id="-g0bku8_120">writer_email</code>. The following code snippet creates a pull queue named <span class="emphasis" id="-g0bku8_121">pull-queue</span> with two users in the ACL. The email account <code class="code" id="-g0bku8_122">bar@foo.com</code> can access all API calls:</p><div class="code-block" data-lang="none">
queue:
- name: pull-queue
  mode: pull
  acl:
  - user_email: bar@foo.com      # can list, get, lease, delete, and update tasks
  - writer_email: user@gmail.com # can insert tasks
  - writer_email: bar@foo.com    # can insert tasks, in addition to rights granted by being a user_email above
</div></section><section class="chapter"><h2 id="configuring-retry-attempts-for-failed-tasks" data-toc="configuring-retry-attempts-for-failed-tasks">Configuring retry attempts for failed tasks</h2><p id="-g0bku8_123">Tasks executing in the task queue can fail for many reasons. If a task fails to execute (by returning any HTTP status code outside of the range 200&ndash;299), App Engine retries the task until it succeeds. By default, the system gradually reduces the retry rate to avoid flooding your application with too many requests, but schedules retry attempts to recur at a maximum of once per hour until the task succeeds.</p><p id="-g0bku8_124">Push queues and pull queues differ in how they retry tasks, as described in the following sections.</p><p id="-g0bku8_125"><span class="control" id="-g0bku8_128">Important:</span> Retry options can be configured for the queue as well specified on the <a href="https://web.archive.org/web/20160424225923/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/taskqueue/RetryOptions" id="-g0bku8_129" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-g0bku8_131">Queue.add()</code></a> method. When both are specified, the <span class="control" id="-g0bku8_130">latter</span> takes precedence.</p><section class="chapter"><h3 id="retrying-tasks-in-push-queues" data-toc="retrying-tasks-in-push-queues">Retrying tasks in push queues</h3><p id="-g0bku8_132">In push queues, you can specify your own scheme for task retries by adding the <span id="-g0bku8_136">retry_parameters</span> directive in <code class="code" id="-g0bku8_137">queue.yaml</code>. This addition allows you to specify the maximum number of times to retry failed tasks in a specific queue. You can also set a time limit for retry attempts and control the interval between attempts.</p><p id="-g0bku8_133">The following example demonstrates various retry scenarios:</p><ul class="list _bullet" id="-g0bku8_134"><li class="list__item" id="-g0bku8_138"><p id="-g0bku8_141">In <code class="code" id="-g0bku8_142">fooqueue</code>, tasks are retried at least seven times and for up to two days from the first execution attempt. After both limits are passed, it fails permanently.</p></li><li class="list__item" id="-g0bku8_139"><p id="-g0bku8_143">In <code class="code" id="-g0bku8_144">barqueue</code>, App Engine attempts to retry tasks, increasing the interval linearly between each retry until reaching the maximum backoff and retrying indefinitely at the maximum interval (so the intervals between requests are 10s, 20s, 30s, ..., 190s, 200s, 200s, ...).</p></li><li class="list__item" id="-g0bku8_140"><p id="-g0bku8_145">In <code class="code" id="-g0bku8_146">bazqueue</code>, the interval increases to twice the minimum backoff and retries indefinitely at the maximum interval (so the intervals between requests are 10s, 20s, 40s, 80s, 120s, 160s, 200s, 200s, ...).</p></li></ul><div class="code-block" data-lang="none">
queue:
- name: fooqueue
  rate: 1/s
  retry_parameters:
    task_retry_limit: 7
    task_age_limit: 2d
- name: barqueue
  rate: 1/s
  retry_parameters:
    min_backoff_seconds: 10
    max_backoff_seconds: 200
    max_doublings: 0
- name: bazqueue
  rate: 1/s
  retry_parameters:
    min_backoff_seconds: 10
    max_backoff_seconds: 200
    max_doublings: 3
</div></section><section class="chapter"><h3 id="retrying-tasks-in-pull-queues" data-toc="retrying-tasks-in-pull-queues">Retrying tasks in pull queues</h3><p id="-g0bku8_147">In pull queues, you can specify the number of times to retry a task using the retry_parameters directive with the task_retry_limit field. The system counts each time you lease a task using <a href="https://web.archive.org/web/20160424225923/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/taskqueue/Queue#leaseTasks(long,%20java.util.concurrent.TimeUnit,%20long)" id="-g0bku8_150" data-external="true" rel="noopener noreferrer" target="_blank">leaseTasks()</a>. When the count exceeds the <code class="code" id="-g0bku8_151">task_retry_limit</code>, the system deletes the task automatically. If you don't specify a <code class="code" id="-g0bku8_152">task_retry_limit</code>, the system never deletes a task automatically.</p><p id="-g0bku8_148">The following code sample shows how to specify a pull queue limited to seven retry attempts:</p><div class="code-block" data-lang="none">
queue:
- name: pull-queue
  mode: pull
  retry_parameters:
    task_retry_limit: 7
</div></section></section><section class="chapter"><h2 id="queue-definitions" data-toc="queue-definitions">Queue definitions</h2><p id="-g0bku8_153">The <code class="code" id="-g0bku8_164">queue.yaml</code> file is a YAML file whose root directive is <code class="code" id="-g0bku8_165">queue-entries</code>. This directive contains zero or more <code class="code" id="-g0bku8_166">queue</code> directives, one for each named queue.</p><p id="-g0bku8_154">A <code class="code" id="-g0bku8_167">queue</code> directive contains configuration for a queue. It can contain the following directives:</p><p id="-g0bku8_155"></p><section class="chapter"><h3 id="acl-pull-queues-only" data-toc="acl-pull-queues-only"><code class="code" id="-g0bku8_171">acl</code> (pull queues only)</h3><p id="-g0bku8_169">Experimental. Creates an access control list (ACL) for Pull Queues using the Task Queue REST API. The ACL is composed of the specified email addresses. Accepts email addresses only from a <a href="https://web.archive.org/web/20160424225923/http://www.google.com/support/accounts/bin/answer.py?hl=en&amp;answer=27439" id="-g0bku8_172" data-external="true" rel="noopener noreferrer" target="_blank">Google Account</a>. Enter each email address on its own line as follows <code class="code" id="-g0bku8_173">- user_email: user@gmail.com</code>. For more information, please see <span id="-g0bku8_174">Defining Pull Queues</span>.</p><p id="-g0bku8_170"></p></section><section class="chapter"><h3 id="bucket-size-push-queues-only" data-toc="bucket-size-push-queues-only"><code class="code" id="-g0bku8_180">bucket_size</code> (push queues only)</h3><p id="-g0bku8_176">Task queues use a &quot;token bucket&quot; algorithm for dequeueing tasks. The bucket size limits how fast the queue is processed when many tasks are in the queue and the rate is high. <span class="emphasis" id="-g0bku8_181">The maximum value for bucket size is 100.</span> This allows you to have a high rate so processing starts shortly after a task is enqueued, but still limit resource usage when many tasks are enqueued in a short period of time.</p><p id="-g0bku8_177">If no <code class="code" id="-g0bku8_182">bucket_size</code> is specified for a queue, the default value is 5.</p><p id="-g0bku8_178">For more information on the algorithm, see <a href="https://web.archive.org/web/20160424225923/https://en.wikipedia.org/wiki/Token_Bucket" id="-g0bku8_183" data-external="true" rel="noopener noreferrer" target="_blank">the Wikipedia article on token buckets</a>.</p><p id="-g0bku8_179"></p></section><section class="chapter"><h3 id="max-concurrent-requests-push-queues-only" data-toc="max-concurrent-requests-push-queues-only"><code class="code" id="-g0bku8_188">max_concurrent_requests</code> (push queues only)</h3><p id="-g0bku8_185">Sets the maximum number of tasks that can be executed simultaneously from the specified queue. The value is an integer. By default, the limit is 1000 tasks per queue.</p><p id="-g0bku8_186">Restricting the number of concurrent tasks gives you more control over the queue's rate of execution and can prevent too many tasks from running at once. It can also prevent datastore contention and make resources available for other queues or online processing.</p><p id="-g0bku8_187"></p></section><section class="chapter"><h3 id="mode" data-toc="mode"><code class="code" id="-g0bku8_192">mode</code></h3><p id="-g0bku8_190">Identifies the queue mode. This setting defaults to <code class="code" id="-g0bku8_193">push</code>, which identifies a queue as a <a href="https://web.archive.org/web/20160424225923/https://cloud.google.com/appengine/docs/java/taskqueue/overview-push" id="-g0bku8_194" data-external="true" rel="noopener noreferrer" target="_blank">push queue</a>. If you wish to use <a href="https://web.archive.org/web/20160424225923/https://cloud.google.com/appengine/docs/java/taskqueue/overview-pull" id="-g0bku8_195" data-external="true" rel="noopener noreferrer" target="_blank">pull queues</a>, set the mode to <code class="code" id="-g0bku8_196">pull</code>.</p><p id="-g0bku8_191"></p></section><section class="chapter"><h3 id="name" data-toc="name"><code class="code" id="-g0bku8_200">name</code></h3><p id="-g0bku8_198">The name of the queue. This is the name you specify when you call <code class="code" id="-g0bku8_201">QueueFactory.getQueue()</code>.</p><p id="-g0bku8_199">A queue name can contain uppercase and lowercase letters, numbers, and hyphens. The maximum length for a queue name is 100 characters.</p></section><section class="chapter"><h3 id="rate-push-queues-only" data-toc="rate-push-queues-only"><code class="code" id="-g0bku8_206">rate</code> (push queues only)</h3><p id="-g0bku8_203">How often tasks are processed on this queue. The value is a number followed by a slash and a unit of time, where the unit is <code class="code" id="-g0bku8_207">s</code> for seconds, <code class="code" id="-g0bku8_208">m</code> for minutes, <code class="code" id="-g0bku8_209">h</code> for hours, or <code class="code" id="-g0bku8_210">d</code> for days. For example, the value <code class="code" id="-g0bku8_211">5/m</code> says tasks will be processed at a rate of 5 times per minute.</p><p id="-g0bku8_204">If the number is <code class="code" id="-g0bku8_212">0</code> (such as <code class="code" id="-g0bku8_213">0/s</code>), the queue is considered &quot;paused,&quot; and no tasks are processed.</p><p id="-g0bku8_205"></p></section><section class="chapter"><h3 id="retry-parameters" data-toc="retry-parameters"><code class="code" id="-g0bku8_222">retry_parameters</code></h3><p id="-g0bku8_215">Configures retry attempts for failed tasks. This addition allows you to specify the maximum number of times to retry failed tasks in a specific queue. You can also set a time limit for retry attempts and control the interval between attempts.</p><p id="-g0bku8_216"><code class="code" id="-g0bku8_223">task_retry_limit</code><br> The maximum number of retry attempts for a failed task. If specified with <code class="code" id="-g0bku8_225">task_age_limit</code>, App Engine retries the task until both limits are reached.</p><p id="-g0bku8_217"><code class="code" id="-g0bku8_226">task_age_limit</code> (push queues only) <br> The time limit for retrying a failed task, measured from when the task was first run. The value is a number followed by a unit of time, where the unit is <code class="code" id="-g0bku8_228">s</code> for seconds, <code class="code" id="-g0bku8_229">m</code> for minutes, <code class="code" id="-g0bku8_230">h</code> for hours, or <code class="code" id="-g0bku8_231">d</code> for days. For example, the value <code class="code" id="-g0bku8_232">5d</code> specifies a limit of five days after the task's first execution attempt. If specified with <code class="code" id="-g0bku8_233">task_retry_limit</code>, App Engine retries the task until both limits are reached.</p><p id="-g0bku8_218"><code class="code" id="-g0bku8_234">min_backoff_seconds</code> (push queues only) <br> The minimum number of seconds to wait before retrying a task after it fails.</p><p id="-g0bku8_219"><code class="code" id="-g0bku8_236">max_backoff_seconds</code> (push queues only) <br> The maximum number of seconds to wait before retrying a task after it fails.</p><p id="-g0bku8_220"><code class="code" id="-g0bku8_238">max_doublings</code> (push queues only) <br> The maximum number of times that the interval between failed task retries will be doubled before the increase becomes constant. The constant is: 2**(max_doublings - 1) * min_backoff_seconds.</p><p id="-g0bku8_221"></p></section><section class="chapter"><h3 id="target-push-queues-only" data-toc="target-push-queues-only"><code class="code" id="-g0bku8_245">target</code> (push queues only)</h3><p id="-g0bku8_241">A string naming a module/version, a frontend version, or a backend, on which to execute all of the tasks enqueued onto this queue.</p><p id="-g0bku8_242">The string is prepended to the domain name of your app when constructing the HTTP request for a task. For example, if your app ID is <code class="code" id="-g0bku8_246">my-app</code> and you set the target to <code class="code" id="-g0bku8_247">my-version.my-module</code>, the URL hostname will be set to <code class="code" id="-g0bku8_248">my-version.my-module.my-app.appspot.com</code>.</p><p id="-g0bku8_243">If target is unspecified, then tasks are invoked on the same version of the application where they were enqueued. So, if you enqueued a task from the default application version without specifying a target on the queue, the task is invoked in the default application version. Note that if the default application version changes between the time that the task is enqueued and the time that it executes, then the task will run in the new default version.</p><p id="-g0bku8_244"><span class="control" id="-g0bku8_249">Note:</span> If you are using modules along with a <a href="https://web.archive.org/web/20160424225923/https://cloud.google.com/appengine/docs/java/modules/routing#dispatch_file" id="-g0bku8_250" data-external="true" rel="noopener noreferrer" target="_blank">dispatch file</a>, your task's HTTP request may be intercepted and re-routed to another module.</p></section></section><section class="chapter"><h2 id="updating-task-queue-configuration" data-toc="updating-task-queue-configuration">Updating task queue configuration</h2><p id="-g0bku8_251">The task queue configuration for the app is updated when you upload the application using <code class="code" id="-g0bku8_254">appcfg.sh update</code>. You can update just the configuration for an app's task queues without uploading the full application. To upload the <code class="code" id="-g0bku8_255">queue.yaml</code> file, use the <code class="code" id="-g0bku8_256">appcfg.sh update_queues</code> command:</p><div class="code-block" data-lang="none">
./appengine-java-sdk/bin/appcfg.sh update_queues myapp/war
</div><p id="-g0bku8_253">See <a href="https://web.archive.org/web/20160424225923/https://cloud.google.com/appengine/docs/java/tools/uploadinganapp" id="-g0bku8_257" data-external="true" rel="noopener noreferrer" target="_blank">Uploading and Managing a Java App</a> for more information.</p></section><div class="last-modified">10 April 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="java-task-scheduling-with-cron-using-yaml.html" class="navigation-links__prev">Java Task Scheduling with Cron Using YAML</a><a href="java-dos-protection-service-using-yaml.html" class="navigation-links__next">Java DoS Protection Service Using YAML</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>