<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-13T01:56:44.313055109"><title>App Identity Java API Overview | Google App Engine Java Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"contents","level":0,"title":"Contents","anchor":"#contents"},{"id":"getting-the-application-id","level":0,"title":"Getting the application ID","anchor":"#getting-the-application-id"},{"id":"getting-the-application-hostname","level":0,"title":"Getting the application hostname","anchor":"#getting-the-application-hostname"},{"id":"asserting-identity-to-other-app-engine-apps","level":0,"title":"Asserting identity to other App Engine apps","anchor":"#asserting-identity-to-other-app-engine-apps"},{"id":"asserting-identity-to-google-apis","level":0,"title":"Asserting identity to Google APIs","anchor":"#asserting-identity-to-google-apis"},{"id":"asserting-identity-to-third-party-services","level":0,"title":"Asserting identity to third-party services","anchor":"#asserting-identity-to-third-party-services"},{"id":"getting-the-default-cloud-storage-bucket-name","level":0,"title":"Getting the default Cloud Storage Bucket name","anchor":"#getting-the-default-cloud-storage-bucket-name"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="App Identity Java API Overview | Google App Engine Java Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Google App Engine Java Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/app-identity-java-api-overview.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="App Identity Java API Overview | Google App Engine Java Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/app-identity-java-api-overview.html#webpage",
    "url": "writerside-documentation/app-identity-java-api-overview.html",
    "name": "App Identity Java API Overview | Google App Engine Java Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Google App Engine Java Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="App-Identity-Java-API-Overview" data-main-title="App Identity Java API Overview" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Guides.md|Guides///Connecting-to-and-from-Your-App.md|Connecting to and from Your App///Issuing-HTTP-S-Requests.md|Issuing HTTP(S) Requests"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Google App Engine Java Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="App-Identity-Java-API-Overview" id="App-Identity-Java-API-Overview.md">App Identity Java API Overview</h1><p id="-6pttif_3"><a href="https://web.archive.org/web/20160424225320/https://cloud.google.com/appengine/docs/python/appidentity/" id="-6pttif_12" data-tooltip="View this page in the Python runtime" data-external="true" rel="noopener noreferrer" target="_blank">Python</a> |Java |<a href="https://web.archive.org/web/20160424225320/https://cloud.google.com/appengine/docs/php/appidentity/" id="-6pttif_13" data-tooltip="View this page in the PHP runtime" data-external="true" rel="noopener noreferrer" target="_blank">PHP</a> |<a href="https://web.archive.org/web/20160424225320/https://cloud.google.com/appengine/docs/go/appidentity/" id="-6pttif_14" data-tooltip="View this page in the Go runtime" data-external="true" rel="noopener noreferrer" target="_blank">Go</a></p><p id="-6pttif_4">The App Identity API lets an application discover its application ID (also called the <a href="https://web.archive.org/web/20160424225320/https://support.google.com/cloud/answer/6158840" id="-6pttif_15" data-external="true" rel="noopener noreferrer" target="_blank">project ID</a>). Using the ID, an App Engine application can assert its identity to other App Engine Apps, Google APIs, and third-party applications and services. The application ID can also be used to generate a URL or email address, or to make a run-time decision.</p><section class="chapter"><h2 id="contents" data-toc="contents">Contents</h2><ol class="list _decimal" id="-6pttif_16" type="1"><li class="list__item" id="-6pttif_17"><p id="-6pttif_23"><span id="-6pttif_24">Getting the application ID</span></p></li><li class="list__item" id="-6pttif_18"><p id="-6pttif_25"><span id="-6pttif_26">Getting the application hostname</span></p></li><li class="list__item" id="-6pttif_19"><p id="-6pttif_27"><span id="-6pttif_28">Asserting identity to other App Engine apps</span></p></li><li class="list__item" id="-6pttif_20"><p id="-6pttif_29"><span id="-6pttif_30">Asserting identity to Google APIs</span></p></li><li class="list__item" id="-6pttif_21"><p id="-6pttif_31"><span id="-6pttif_32">Asserting identity to third-party services</span></p></li><li class="list__item" id="-6pttif_22"><p id="-6pttif_33"><span id="-6pttif_34">Getting the default Cloud Storage Bucket name</span></p></li></ol></section><section class="chapter"><h2 id="getting-the-application-id" data-toc="getting-the-application-id">Getting the application ID</h2><p id="-6pttif_35">The application ID can be found using the <code class="code" id="-6pttif_36">ApiProxy.getCurrentEnvironment().getAppId()</code> method.</p></section><section class="chapter"><h2 id="getting-the-application-hostname" data-toc="getting-the-application-hostname">Getting the application hostname</h2><p id="-6pttif_37">By default, App Engine apps are served from URLs in the form <code class="code" id="-6pttif_41">http://&lt;your_app_id&gt;.appspot.com</code>, where the app ID is part of the hostname. If an app is served from a custom domain, it may be necessary to retrieve the entire hostname component. You can do this using the <code class="code" id="-6pttif_42">com.google.appengine.runtime.default_version_hostname</code> attribute of the <code class="code" id="-6pttif_43">CurrentEnvironment</code>.</p><p id="-6pttif_38"><a href="https://web.archive.org/web/20160424225320/https://github.com/GoogleCloudPlatform/java-docs-samples/blob/master/appengine/appidentity/src/main/java/com/example/appengine/appidentity/IdentityServlet.java" id="-6pttif_44" data-external="true" rel="noopener noreferrer" target="_blank">appengine/appidentity/src/main/java/com/example/appengine/appidentity/IdentityServlet.java</a></p><p id="-6pttif_39"><a href="https://web.archive.org/web/20160424225320/https://github.com/GoogleCloudPlatform/java-docs-samples/blob/master/appengine/appidentity/src/main/java/com/example/appengine/appidentity/IdentityServlet.java" id="-6pttif_45" data-external="true" rel="noopener noreferrer" target="_blank">View on GitHub</a></p><p id="-6pttif_40">\[This section requires a browser that supports JavaScript and iframes.\]</p></section><section class="chapter"><h2 id="asserting-identity-to-other-app-engine-apps" data-toc="asserting-identity-to-other-app-engine-apps">Asserting identity to other App Engine apps</h2><p id="-6pttif_46">If you want to determine the identity of the App Engine app that is making a request to your App Engine app, you can use the request header <code class="code" id="-6pttif_50">X-Appengine-Inbound-Appid</code>. This header is added to the request by the URLFetch service and is not user modifiable, so it safely indicates the requesting application's ID, if present.</p><p id="-6pttif_47">In order for this header to be added to the request, the app making the request must tell the URLFetch service to not follow redirects. That is, your app must specify <a href="https://web.archive.org/web/20160424225320/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/urlfetch/FetchOptions#doNotFollowRedirects()" id="-6pttif_51" data-external="true" rel="noopener noreferrer" target="_blank">doNotFollowRedirect</a> if it uses the <a href="https://web.archive.org/web/20160424225320/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/urlfetch/URLFetchService" id="-6pttif_52" data-external="true" rel="noopener noreferrer" target="_blank">URLFetchService</a> class. If your app uses <a href="https://web.archive.org/web/20160424225320/https://cloud.google.com/appengine/docs/java/urlfetch/usingjavanet" id="-6pttif_53" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-6pttif_55">java.net</code></a>, it must set the connection as follows: <code class="code" id="-6pttif_54">connection.setInstanceFollowRedirects(false);</code> App Engine will then automatically add the header to the HTTP response.</p><p id="-6pttif_48">In your application handler, you can check the incoming ID by reading the <code class="code" id="-6pttif_56">X-Appengine-Inbound-Appid</code> header and comparing it to a list of IDs allowed to make requests.</p><p id="-6pttif_49"><span class="control" id="-6pttif_57">Note:</span> The <code class="code" id="-6pttif_58">X-Appengine-Inbound-Appid</code> header is only set if the call is made to the <code class="code" id="-6pttif_59">appspot.com</code> domain. If the app has a custom domain, this header <span class="control" id="-6pttif_60">will not be set.</span></p></section><section class="chapter"><h2 id="asserting-identity-to-google-apis" data-toc="asserting-identity-to-google-apis">Asserting identity to Google APIs</h2><p id="-6pttif_61">Google APIs use the OAuth 2.0 protocol for <a href="https://web.archive.org/web/20160424225320/https://developers.google.com/identity/protocols/OAuth2" id="-6pttif_67" data-external="true" rel="noopener noreferrer" target="_blank">authentication and authorization</a>. The App Identity API can create OAuth tokens that can be used to assert that the source of a request is the application itself. The <code class="code" id="-6pttif_68">getAccessToken()</code> method returns an access token for a scope, or list of scopes. This token can then be set in the HTTP headers of a call to identify the calling application.</p><p id="-6pttif_62">The following example shows a REST call to the Google URL Shortener API. Note that the <a href="https://web.archive.org/web/20160424225320/https://developers.google.com/url-shortener/libraries" id="-6pttif_69" data-external="true" rel="noopener noreferrer" target="_blank">Google API Client Libraries</a> can also manage much of this for you automatically.</p><p id="-6pttif_63"><a href="https://web.archive.org/web/20160424225320/https://github.com/GoogleCloudPlatform/java-docs-samples/blob/master/appengine/appidentity/src/main/java/com/example/appengine/appidentity/UrlShortener.java" id="-6pttif_70" data-external="true" rel="noopener noreferrer" target="_blank">appengine/appidentity/src/main/java/com/example/appengine/appidentity/UrlShortener.java</a></p><p id="-6pttif_64"><a href="https://web.archive.org/web/20160424225320/https://github.com/GoogleCloudPlatform/java-docs-samples/blob/master/appengine/appidentity/src/main/java/com/example/appengine/appidentity/UrlShortener.java" id="-6pttif_71" data-external="true" rel="noopener noreferrer" target="_blank">View on GitHub</a></p><p id="-6pttif_65">\[This section requires a browser that supports JavaScript and iframes.\]</p><p id="-6pttif_66">Note that the application's identity is represented by the service account name, which is typically <span class="emphasis" id="-6pttif_72">applicationid@appspot.gserviceaccount.com</span>. You can get the exact value by using the <code class="code" id="-6pttif_73">getServiceAccountName()</code> method. For services which offer ACLs, you can grant the application access by granting this account access.</p></section><section class="chapter"><h2 id="asserting-identity-to-third-party-services" data-toc="asserting-identity-to-third-party-services">Asserting identity to third-party services</h2><p id="-6pttif_74">The token generated by <code class="code" id="-6pttif_80">getAccessToken()</code> only works against Google services. However you can use the underlying signing technology to assert the identity of your application to other services. The <code class="code" id="-6pttif_81">signForApp()</code> method will sign bytes using a private key unique to your application, and the <code class="code" id="-6pttif_82">getPublicCertificatesForApp()</code> method will return certificates which can be used to validate the signature.</p><p id="-6pttif_75"><span class="control" id="-6pttif_83">Note:</span> The certificates may be rotated from time to time, and the method may return multiple certificates. Only certificates that are currently valid are returned; if you store signed messages you will need additional key management in order to verify signatures later.</p><p id="-6pttif_76">Here is an example showing how to sign a blob and validate its signature:</p><p id="-6pttif_77"><a href="https://web.archive.org/web/20160424225320/https://github.com/GoogleCloudPlatform/java-docs-samples/blob/master/appengine/appidentity/src/main/java/com/example/appengine/appidentity/SignForAppServlet.java" id="-6pttif_84" data-external="true" rel="noopener noreferrer" target="_blank">appengine/appidentity/src/main/java/com/example/appengine/appidentity/SignForAppServlet.java</a></p><p id="-6pttif_78"><a href="https://web.archive.org/web/20160424225320/https://github.com/GoogleCloudPlatform/java-docs-samples/blob/master/appengine/appidentity/src/main/java/com/example/appengine/appidentity/SignForAppServlet.java" id="-6pttif_85" data-external="true" rel="noopener noreferrer" target="_blank">View on GitHub</a></p><p id="-6pttif_79">\[This section requires a browser that supports JavaScript and iframes.\]</p></section><section class="chapter"><h2 id="getting-the-default-cloud-storage-bucket-name" data-toc="getting-the-default-cloud-storage-bucket-name">Getting the default Cloud Storage Bucket name</h2><p id="-6pttif_86">Each application can have up to one default Cloud Storage bucket, which has free quota and doesn't require billing to be enabled. The maximum storage of this bucket is 5GB, which you can increase by <a href="https://web.archive.org/web/20160424225320/https://cloud.google.com/appengine/docs/java/console/#billing" id="-6pttif_88" data-external="true" rel="noopener noreferrer" target="_blank">enabling billing</a> for your app and paying for the extra storage making this a paid bucket.</p><p id="-6pttif_87">To get the name of the default bucket, you can use the App Identity API. Call <a href="https://web.archive.org/web/20160424225320/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/appidentity/AppIdentityService.html#getDefaultGcsBucketName--" id="-6pttif_89" data-external="true" rel="noopener noreferrer" target="_blank">AppIdentityService.getDefaultGcsBucketName</a>.</p></section><div class="last-modified">10 April 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="url-fetch-java-api-overview.html" class="navigation-links__prev">URL Fetch Java API Overview</a><a href="using-java-net.html" class="navigation-links__next">Using java.net</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>