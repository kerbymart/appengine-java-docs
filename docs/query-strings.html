<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-13T01:56:44.964828922"><title>Query Strings | Google App Engine Java Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"global-search","level":0,"title":"Global search","anchor":"#global-search"},{"id":"field-search","level":0,"title":"Field search","anchor":"#field-search"},{"id":"mixing-global-and-field-searches","level":0,"title":"Mixing global and field searches","anchor":"#mixing-global-and-field-searches"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Query Strings | Google App Engine Java Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Google App Engine Java Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/query-strings.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Query Strings | Google App Engine Java Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/query-strings.html#webpage",
    "url": "writerside-documentation/query-strings.html",
    "name": "Query Strings | Google App Engine Java Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Google App Engine Java Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Query-Strings" data-main-title="Query Strings" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Guides.md|Guides///Searchable-Document-Indexes.md|Searchable Document Indexes"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Google App Engine Java Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Query-Strings" id="Query-Strings.md">Query Strings</h1><p id="z89sk1s_3"><span class="emphasis" id="z89sk1s_15">A wise owl sat up high in a birch, <br> and he said as he gazed from his perch. <br> I feel so world-weary, think I'll write a query: <br> &quot;the meaning of life&quot; <br> and go <code class="code" id="z89sk1s_20">search()</code>. <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Life, the Universe, and App Engine</span></p><p id="z89sk1s_4">A query string contains Unicode characters. The maximum length of a query string is 2000 characters. All query strings contain at least one field value. It's recommended to write field values in lower case, because searches on atom, text, and HTML fields are case insensitive, and a query string can also contain the boolean operators AND, OR, and NOT, which are recognized by writing them in upper case.</p><p id="z89sk1s_5"><span class="control" id="z89sk1s_22">Note:</span> A comma can appear in a query string only if it is used to separate the arguments of a function: distance(home, geopoint(35.2, 40.5)) &gt; 100 or it's part of a quoted string.</p><p id="z89sk1s_6">A query string can take many forms. There are two main ways to construct a query: with and without field names. A <span class="emphasis" id="z89sk1s_23">global search</span> uses a query string that contains only field values:</p><div class="code-block" data-lang="none">
String query = &quot;blue&quot;;
String query = &quot;NOT white&quot;;
String query = &quot;blue OR red&quot;;
String query = &quot;blue guitar&quot;;
</div><p id="z89sk1s_8">A <span class="emphasis" id="z89sk1s_24">field search</span> uses a query string that contains one or more expressions specifying field names and field values:</p><div class="code-block" data-lang="none">
String query = &quot;model:gibson date &lt; 1965-01-01&quot;;
String query = &quot;title:\&quot;Harry Potter\&quot; AND pages&lt;500&quot;;
String query = &quot;beverage:wine color:(red OR white) NOT country:france&quot;;
</div><p id="z89sk1s_10">This document describes how to construct query strings for global and field searches, and how the search logic works in each case.</p><ol class="list _decimal" id="z89sk1s_11" type="1"><li class="list__item" id="z89sk1s_25"><p id="z89sk1s_28"><span id="z89sk1s_30">Global search</span></p><ul class="list _bullet" id="z89sk1s_29"><li class="list__item" id="z89sk1s_31"><p id="z89sk1s_36"><span id="z89sk1s_37">One-value queries</span></p></li><li class="list__item" id="z89sk1s_32"><p id="z89sk1s_38"><span id="z89sk1s_39">Multi-value queries</span></p></li><li class="list__item" id="z89sk1s_33"><p id="z89sk1s_40"><span id="z89sk1s_41">Boolean operators</span></p></li><li class="list__item" id="z89sk1s_34"><p id="z89sk1s_42"><span id="z89sk1s_43">Stemming</span></p></li><li class="list__item" id="z89sk1s_35"><p id="z89sk1s_44"><span id="z89sk1s_45">Tokenization</span></p></li></ul></li><li class="list__item" id="z89sk1s_26"><p id="z89sk1s_46"><span id="z89sk1s_48">Field search</span></p><ul class="list _bullet" id="z89sk1s_47"><li class="list__item" id="z89sk1s_49"><p id="z89sk1s_55"><span id="z89sk1s_56">Queries on atom fields</span></p></li><li class="list__item" id="z89sk1s_50"><p id="z89sk1s_57"><span id="z89sk1s_58">Queries on text and HTML fields</span></p></li><li class="list__item" id="z89sk1s_51"><p id="z89sk1s_59"><span id="z89sk1s_60">Queries on number fields</span></p></li><li class="list__item" id="z89sk1s_52"><p id="z89sk1s_61"><span id="z89sk1s_62">Queries on date fields</span></p></li><li class="list__item" id="z89sk1s_53"><p id="z89sk1s_63"><span id="z89sk1s_64">Queries on geopoint fields</span></p></li><li class="list__item" id="z89sk1s_54"><p id="z89sk1s_65"><span id="z89sk1s_66">Queries on multiple fields</span></p></li></ul></li><li class="list__item" id="z89sk1s_27"><p id="z89sk1s_67"><span id="z89sk1s_68">Mixing global and field searches</span></p></li></ol><section class="chapter"><h2 id="global-search" data-toc="global-search">Global search</h2><p id="z89sk1s_69">Global search offers the ability to search for documents by specifying values that might appear in <span class="emphasis" id="z89sk1s_75">any</span> document field. To perform a global search you write a query string that contains one or more field values. The search algorithm recognizes the type of each value and searches all the document fields that could contain that value.</p><section class="chapter"><h3 id="one-value-queries" data-toc="one-value-queries">One-value queries</h3><p id="z89sk1s_76">Brevity is the soul of wit, and a global search with one value is the epitome of brevity. A search with a query string that contains a single value is handled according to these rules:</p><p id="z89sk1s_77">If the query string is a word (&quot;red&quot;) or a quoted string (&quot;\red rose\&quot;), search retrieves all documents in an index that have:</p><ul class="list _bullet" id="z89sk1s_78"><li class="list__item" id="z89sk1s_85"><p id="z89sk1s_87">a text or HTML field that contains that word or quoted string (matching is case insensitive)</p></li><li class="list__item" id="z89sk1s_86"><p id="z89sk1s_88">an atom field with a value that matches the word or quoted string (matching is case insensitive)</p></li></ul><p id="z89sk1s_79">If the query string is a number (&quot;3.14159&quot;), search retrieves all documents that have:</p><ul class="list _bullet" id="z89sk1s_80"><li class="list__item" id="z89sk1s_89"><p id="z89sk1s_92">a number field with a value equal to the number in the query (a number field with the value 5 will match the query &quot;5&quot; and &quot;5.0&quot;)</p></li><li class="list__item" id="z89sk1s_90"><p id="z89sk1s_93">a text or HTML field that contains a token that matches the number as it appears in the query (the text field &quot;he took 5 minutes&quot; will match the query &quot;5&quot; but not &quot;5.0&quot;)</p></li><li class="list__item" id="z89sk1s_91"><p id="z89sk1s_94">an atom field that literally matches the number as it appears in the query</p></li></ul><p id="z89sk1s_81">If the query string is a date in yyyy-mm-dd form, search retrieves all documents that have:</p><ul class="list _bullet" id="z89sk1s_82"><li class="list__item" id="z89sk1s_95"><p id="z89sk1s_98">a date field whose value equals that date (leading zeros in the query string are optional, &quot;2012-07-04&quot; and &quot;2012-7-4&quot; are the same date)</p></li><li class="list__item" id="z89sk1s_96"><p id="z89sk1s_99">a text or HTML field that contains a token that literally matches the date as it appears in the query</p></li><li class="list__item" id="z89sk1s_97"><p id="z89sk1s_100">an atom field that literally matches the date as it appears in the query</p></li></ul><p id="z89sk1s_83">You can prepend the NOT boolean operator (upper case) to a one word query. The result is a list of documents that do not have any fields that match the query value, according to the same rules. So the query &quot;NOT red&quot; will retrieve all documents that don't have any text or HTML fields that contain &quot;red&quot;, or any atom fields with the value &quot;red&quot;.</p><p id="z89sk1s_84">You may have noticed that geopoint fields have not been mentioned. At this time, you cannot specify a raw geopoint value as a string, so geopoints cannot appear in global searches.</p></section><section class="chapter"><h3 id="multi-value-queries" data-toc="multi-value-queries">Multi-value queries</h3><p id="z89sk1s_101">You can specify multiple values (separated by spaces) in a global search string. The white space between words, quoted strings, numbers, and dates is treated as an implicit AND operator. The two search strings below are <span class="emphasis" id="z89sk1s_109">almost</span> the same; they differ in how global search treats atom fields, which is explained below:</p><div class="code-block" data-lang="none">
query = &quot;small red&quot;
query = &quot;small AND red&quot;
</div><p id="z89sk1s_103">When performing a global search with multiple values, field matching is done independently on each value in the string, and atom field matching is handled differently, in particular:</p><ul class="list _bullet" id="z89sk1s_104"><li class="list__item" id="z89sk1s_110"><p id="z89sk1s_113">Query values can appear in any order in a text or HTML field</p></li><li class="list__item" id="z89sk1s_111"><p id="z89sk1s_114">Different values can appear in different fields</p></li><li class="list__item" id="z89sk1s_112"><p id="z89sk1s_115">Atom fields are searched only when the query string does not contain any boolean operators (AND, OR, NOT). The entire query string must match an atom field.</p></li></ul><p id="z89sk1s_105">Note the third rule dealing with atom fields. The query string &quot;red small&quot; does not contain the boolean AND (even though it's implied), so search will attempt to find matching atom fields. The string &quot;red AND small&quot; does contain a boolean operator, so search will not try to match the query string against atom fields.</p><p id="z89sk1s_106">The following example shows four documents that were retrieved using the query string &quot;rose bud.&quot; Each document has two text fields and one atom field. The comment column explains why each document satisfies the query.</p><div class="table-wrapper"><table class="wide" id="z89sk1s_107"><thead><tr class="ijRowHead" id="z89sk1s_116"><th id="z89sk1s_121"><p>Doc&nbsp;ID</p></th><th id="z89sk1s_122"><p>Text Field 1</p></th><th id="z89sk1s_123"><p>Text Field 2</p></th><th id="z89sk1s_124"><p>Atom Field</p></th><th id="z89sk1s_125"><p>Comment</p></th></tr></thead><tbody><tr id="z89sk1s_117"><td id="z89sk1s_126"><p>1</p></td><td id="z89sk1s_127"><p>mighty like a <b id="z89sk1s_131">rose</b></p></td><td id="z89sk1s_128"><p>one <b id="z89sk1s_132">bud</b> to bind them all</p></td><td id="z89sk1s_129"><p>thorn bush</p></td><td id="z89sk1s_130"><p>Matching values can appear in different fields</p></td></tr><tr id="z89sk1s_118"><td id="z89sk1s_133"><p>2</p></td><td id="z89sk1s_134"><p>wide like a river</p></td><td id="z89sk1s_135"><p>like a <b id="z89sk1s_138">bud</b> on a <b id="z89sk1s_139">rose</b></p></td><td id="z89sk1s_136"><p>tumble weed</p></td><td id="z89sk1s_137"><p>Matching values can appear in any order in the same text or HTML field, with intervening text</p></td></tr><tr id="z89sk1s_119"><td id="z89sk1s_140"><p>3</p></td><td id="z89sk1s_141"><p>deep like the ocean</p></td><td id="z89sk1s_142"><p>the <b id="z89sk1s_145">rose bud</b> boys</p></td><td id="z89sk1s_143"><p>blue bonnet</p></td><td id="z89sk1s_144"><p>Matching values can appear in any order in the same text or HTML field</p></td></tr><tr id="z89sk1s_120"><td id="z89sk1s_146"><p>4</p></td><td id="z89sk1s_147"><p>tall like a mountain</p></td><td id="z89sk1s_148"><p>the beautiful garden</p></td><td id="z89sk1s_149"><p><b id="z89sk1s_151">rose bud</b></p></td><td id="z89sk1s_150"><p>Atom field matches because its value is the same as the entire query string</p></td></tr></tbody></table></div><p id="z89sk1s_108">Note that if you reversed the values in the query and searched for &quot;bud rose&quot; instead, documents 1, 2, and 3 would still be returned, but document 4 would not. To search for an exact character string in atom, text, and HTML fields, quote the string in the query string. A search for &quot;\rose bud\&quot; would return only documents 3 and 4 in the example.</p></section><section class="chapter"><h3 id="boolean-operators" data-toc="boolean-operators">Boolean operators</h3><p id="z89sk1s_152">You can specify a more complex global search by using the boolean operator NOT before a value, and the operators AND and OR between values. Note that these operators must be written in upper case. If they appear within a quoted string they are treated as part of the field value, not as operators. You can use parentheses in a query string make the logic clear.</p><p id="z89sk1s_153">The boolean operator precedence, from highest to lowest, is: NOT, OR, AND:</p><div class="code-block" data-lang="none">
NOT cat AND dogs OR horses --&gt; (NOT cat) AND (dogs OR horses)
NOT cat OR dogs AND horses --&gt; ((NOT cat) OR dogs) AND horses
</div></section><section class="chapter"><h3 id="stemming" data-toc="stemming">Stemming</h3><p id="z89sk1s_155">To search for common variations of a word, like plural forms and verb endings, use the <code class="code" id="z89sk1s_156">~</code> stem operator (the tilde character). This is a prefix operator which must precede a value with no intervening space. The value <code class="code" id="z89sk1s_157">~cat</code> will match &quot;cat&quot; or &quot;cats,&quot; and likewise <code class="code" id="z89sk1s_158">~dog</code> matches &quot;dog&quot; or &quot;dogs.&quot; The stemming algorithm is not fool-proof. The value <code class="code" id="z89sk1s_159">~care</code> will match &quot;care&quot; and &quot;caring,&quot; but not &quot;cares&quot; or &quot;cared.&quot; Stemming is only used when searching text and HTML fields.</p></section><section class="chapter"><h3 id="tokenization" data-toc="tokenization">Tokenization</h3><p id="z89sk1s_160">When a document is indexed, its fields are <a href="https://web.archive.org/web/20160424225934/https://cloud.google.com/appengine/docs/java/search/#Java_Tokenizing_string_fields" id="z89sk1s_162" data-external="true" rel="noopener noreferrer" target="_blank">tokenized</a>. Similarly, the values in a query string are also tokenized. This means that what may appear to be a one-value query is actually treated as a multi-value query. For example:</p><div class="code-block" data-lang="none">
&quot;real-time&quot; --&gt; &quot;real time&quot;
&quot;2001-12-15&quot; --&gt; &quot;2001 12 15&quot;
&quot;1.5&quot; --&gt; &quot;1 5&quot;
</div></section></section><section class="chapter"><h2 id="field-search" data-toc="field-search">Field search</h2><p id="z89sk1s_163">A field search looks for values in specific document fields, by field name. A field search query string is composed of one or more expressions that specify a <span class="emphasis" id="z89sk1s_172">field name</span>, a <span class="emphasis" id="z89sk1s_173">relational operator</span>, and a <span class="emphasis" id="z89sk1s_174">field value</span>. The available relational operators depend on the type of the field. The equality operator, represented by either a colon or the equals sign, can be used for all field types. Here are some field query strings for different types of fields:</p><div class="code-block" data-lang="none">
query = &quot;pet = dog&quot;
query = &quot;author = \&quot;Ray Bradbury\&quot;&quot;
query = &quot;color:red&quot;
query = &quot;NOT color:red&quot;
query = &quot;price &lt; 500&quot;
query = &quot;birthday&gt;=2011-05-10&quot;
</div><p id="z89sk1s_165">Note that the use of whitespace on either side of the relational operator is optional. As with global search query strings, the value of a text, HTML, or atom field can be enclosed in quotes to specify a string, and an expression for a field value can be negated by prepending an uppercase NOT.</p><section class="chapter"><h3 id="queries-on-atom-fields" data-toc="queries-on-atom-fields">Queries on atom fields</h3><p id="z89sk1s_175">The value of an atom field is a character string. Queries on atom fields are case insensitive. If your query specifies a field value with whitespace or punctuation, be sure to quote the value within the query string. The only valid relational operator for atom fields is the equality operator. The complete contents of an atom field must match the query value; this includes any Unicode combining characters or accented characters in the field. Stemming is not supported for atom fields.</p><div class="table-wrapper"><table class="wide" id="z89sk1s_176"><thead><tr class="ijRowHead" id="z89sk1s_178"><th id="z89sk1s_184"><p>Query String</p></th><th id="z89sk1s_185"><p>Comments</p></th></tr></thead><tbody><tr id="z89sk1s_179"><td id="z89sk1s_186"><p><code class="code" id="z89sk1s_188">&quot;weather=stormy&quot;</code><br> <code class="code" id="z89sk1s_190">&quot;weather:&nbsp;stormy&quot;</code></p></td><td id="z89sk1s_187"><p>Either form of the equality operator is valid. Retrieves documents with a weather field that equals &quot;stormy.&quot;</p></td></tr><tr id="z89sk1s_180"><td id="z89sk1s_191"><p><code class="code" id="z89sk1s_193">&quot;Title:&nbsp;\&quot;Tom&amp;Jerry\&quot;&quot;</code><br> <code class="code" id="z89sk1s_195">&quot;Couple:&nbsp;\&quot;Fred&nbsp;and&nbsp;Ethel\&quot;&quot;</code><br> <code class="code" id="z89sk1s_197">&quot;Version&nbsp;=&nbsp;\&quot;1HCP(21.3)\&quot;&quot;</code><br></p></td><td id="z89sk1s_192"><p>If you are searching for an atom field that contains whitespace or special characters, enclose the value in quotes.</p></td></tr><tr id="z89sk1s_181"><td id="z89sk1s_199"><p><code class="code" id="z89sk1s_201">&quot;Color = (red OR blue)&quot;</code><br> <code class="code" id="z89sk1s_203">&quot;Color&nbsp;=&nbsp;(\&quot;dark&nbsp;red\&quot;&nbsp;OR&nbsp;\&quot;bright&nbsp;blue\&quot;)&quot;</code><br></p></td><td id="z89sk1s_200"><p>You can use parentheses and the logical operator OR to specify a list of alternate field values.</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="queries-on-text-and-html-fields" data-toc="queries-on-text-and-html-fields">Queries on text and HTML fields</h3><p id="z89sk1s_205">The only valid relational operator for text and HTML fields is equality. In this case the operator means &quot;field includes value&quot; not &quot;field equals value.&quot; You can use the <span id="z89sk1s_207">stemming operator</span> to search for variants on a word. You can also use the OR and AND operators to specify complex boolean expressions for the field value. If a boolean operator appears within a quoted string, it is not treated specially, it's just another piece of the character string to be matched. Remember that when searching HTML fields, the text within HTML markup tags is ignored. Queries on text and HTML fields are case insensitive. When these fields are indexed, any Unicode combining characters and accented characters in them are &quot;normalized&quot; to their unaccented equivalents. Combining characters and accents are also normalized in query strings on these fields, so a query can include the accented forms or not, and will match the fields in either case.</p><div class="table-wrapper"><table class="wide" id="z89sk1s_206"><thead><tr class="ijRowHead" id="z89sk1s_209"><th id="z89sk1s_219"><p>Query String</p></th><th id="z89sk1s_220"><p>Comments</p></th></tr></thead><tbody><tr id="z89sk1s_210"><td id="z89sk1s_221"><p><code class="code" id="z89sk1s_223">&quot;Comment = great&quot;</code><br> <code class="code" id="z89sk1s_225">&quot;Comment: great&quot;</code></p></td><td id="z89sk1s_222"><p>Either form of the equality operator is valid. Retrieves documents with a comment field that contains at least one occurrence of the word &quot;great&quot; in the Comment field.</p></td></tr><tr id="z89sk1s_211"><td id="z89sk1s_226"><p><code class="code" id="z89sk1s_228">&quot;Comment&nbsp;=&nbsp;(great&nbsp;big&nbsp;ball)&quot;</code><br> <code class="code" id="z89sk1s_230">&quot;Comment&nbsp;=&nbsp;(great&nbsp;AND&nbsp;big&nbsp;AND&nbsp;ball)&quot;</code></p></td><td id="z89sk1s_227"><p>To search for two or more words in a field, in any order, enclose the words in parentheses. This query string retrieves documents with a Comment field that includes all three words in any order with any number of other words between them. The space between words implies a logical AND; the second form makes this explicit.</p></td></tr><tr id="z89sk1s_212"><td id="z89sk1s_231"><p><code class="code" id="z89sk1s_233">&quot;Comment = \&quot;insanely great\&quot;&quot;</code></p></td><td id="z89sk1s_232"><p>To search for a specific string of text, enclose the string in quotes. This query will retrieve documents whose Comment field contains the phrase &quot;insanely great&quot; (and also &quot;insanely-great&quot; which is tokenized to the same thing).</p></td></tr><tr id="z89sk1s_213"><td id="z89sk1s_234"><p><code class="code" id="z89sk1s_236">&quot;pet = ~dog&quot;</code></p></td><td id="z89sk1s_235"><p>The stemming operator will match variants of the word &quot;dog&quot; in the pet field.</p></td></tr><tr id="z89sk1s_214"><td id="z89sk1s_237"><p><code class="code" id="z89sk1s_239">&quot;Color = (red OR blue)&quot;</code></p></td><td id="z89sk1s_238"><p>To search for a match from a list of alternatives, enclose the list in parentheses with the keyword OR between alternatives. This query retrieves documents whose Color field includes either &quot;red&quot; or &quot;blue&quot; or both.</p></td></tr><tr id="z89sk1s_215"><td id="z89sk1s_240"><p><code class="code" id="z89sk1s_242">&quot;weather&nbsp;=&nbsp;((rain&nbsp;OR&nbsp;snow)&nbsp;AND&nbsp;cold)&quot;</code></p></td><td id="z89sk1s_241"><p>You can use the logical operators OR and AND, along with parentheses, to specify a more complex field value.</p></td></tr><tr id="z89sk1s_216"><td id="z89sk1s_243"><p><code class="code" id="z89sk1s_245">&quot;weather = \&quot;rain OR shine\&quot;&quot;</code></p></td><td id="z89sk1s_244"><p>Because the logical OR is embedded in a quoted string, it is not treated as a relational operator. This query string retrieves documents with a weather field that contains the string &quot;rain or shine&quot;</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="queries-on-number-fields" data-toc="queries-on-number-fields">Queries on number fields</h3><p id="z89sk1s_246">A number field value can be written as an integer, a decimal, or an exponential. The valid relational operators for number fields are the equality operators, along with the less than/greater than operators (&lt;, &lt;=, &gt;, &gt;=). Note that there is no inequality (!=) operator. Here are some example query strings for number fields:</p><div class="code-block" data-lang="none">
&quot;quantity = 10000&quot;
&quot;size: 4&quot;
&quot;price &lt; 9.99&quot;
&quot;theta &gt; 1.5E-2&quot;
</div></section><section class="chapter"><h3 id="queries-on-date-fields" data-toc="queries-on-date-fields">Queries on date fields</h3><p id="z89sk1s_248">A date field value must be written in yyyy-mm-dd form. Leading zeros are optional for one-digit months and days. The valid relational operators for date fields are the equality operators, along with the less than/greater than operators (&lt;, &lt;=, &gt;, &gt;=). Note that there is no inequality operator. You can prepend the NOT operator to an expression to negate it. Here are some example query strings for date fields:</p><div class="code-block" data-lang="none">
&quot;start_date: 2012-05-20&quot;
&quot;end_date: 2013-5-1&quot;
&quot;birthday &gt;= 2000-12-31&quot;
&quot;NOT birthday = 2000-12-25&quot;
</div></section><section class="chapter"><h3 id="queries-on-geopoint-fields" data-toc="queries-on-geopoint-fields">Queries on geopoint fields</h3><p id="z89sk1s_250">There are no relational operators that work with geopoint fields, so geopoint fields cannot be named directly in a query string. The Search API provides two special functions that can be used for queries involving geopoint fields:</p><section class="chapter"><h4 id="geopoint-lat-long" data-toc="geopoint-lat-long"><code class="code" id="z89sk1s_255">geopoint(lat,long)</code></h4><p id="z89sk1s_254">Defines a geopoint given a latitude and longitude.</p></section><section class="chapter"><h4 id="distance-point1-point2" data-toc="distance-point1-point2"><code class="code" id="z89sk1s_261">distance(point1, point2)</code></h4><p id="z89sk1s_257">Computes the distance in meters between two geopoints. Each point can be specified by using the name of a geopoint field or an invocation of the geopoint function. Note that you cannot provide two field names as arguments to this function. At least one argument must be a constant.</p><p id="z89sk1s_258">These functions can be used to construct queries that retrieve locations relative to a constant position. The following examples assume that the index contains documents with geopoint fields named &quot;survey_marker&quot; and &quot;home.&quot;</p><div class="table-wrapper"><table class="wide" id="z89sk1s_259"><thead><tr class="ijRowHead" id="z89sk1s_262"><th id="z89sk1s_265"><p>Query String</p></th><th id="z89sk1s_266"><p>Comments</p></th></tr></thead><tbody><tr id="z89sk1s_263"><td id="z89sk1s_267"><p><code class="code" id="z89sk1s_269">&quot;distance(survey_marker, geopoint(35.2, 40.5)) &lt; 100&quot;</code></p></td><td id="z89sk1s_268"><p>Search for markers less than 100 meters from a given geopoint.</p></td></tr><tr id="z89sk1s_264"><td id="z89sk1s_270"><p><code class="code" id="z89sk1s_272">&quot;distance(home, geopoint(35.2, 40.5)) &gt; 100&quot;</code></p></td><td id="z89sk1s_271"><p>Search for homes more than 100 meters from a given geopoint.</p></td></tr></tbody></table></div><p id="z89sk1s_260">Applications that use geolocation typically receive information from the browser. If the user allows, location can be inferred from their IP address, or they can enter a postal code. Location can also come from other APIs like the <a href="https://web.archive.org/web/20160424225934/https://developers.google.com/maps/documentation/business/geolocation" id="z89sk1s_273" data-external="true" rel="noopener noreferrer" target="_blank">Google Maps Geolocation API</a>.</p></section></section><section class="chapter"><h3 id="queries-on-multiple-fields" data-toc="queries-on-multiple-fields">Queries on multiple fields</h3><p id="z89sk1s_274">You can combine multiple field query expressions in one query by listing them in sequence separated by whitespace. This puts an implied AND between each expression, so all of them must be satisfied to retrieve a document. You can explicitly add AND and OR operators between expressions, and use parentheses to make the logic clear.</p><div class="table-wrapper"><table class="wide" id="z89sk1s_275"><thead><tr class="ijRowHead" id="z89sk1s_277"><th id="z89sk1s_283"><p>Query String</p></th><th id="z89sk1s_284"><p>Comments</p></th></tr></thead><tbody><tr id="z89sk1s_278"><td id="z89sk1s_285"><p><code class="code" id="z89sk1s_287">&quot;product=piano manufacturer=steinway&quot;</code><br> <code class="code" id="z89sk1s_289">&quot;product=piano&nbsp;AND&nbsp;manufacturer=steinway&quot;</code></p></td><td id="z89sk1s_286"><p>These queries retrieve all Steinway pianos. The space between the terms implies a logical AND; the second form makes this explicit.</p></td></tr><tr id="z89sk1s_279"><td id="z89sk1s_290"><p><code class="code" id="z89sk1s_292">&quot;product=piano&nbsp;AND&nbsp;NOT&nbsp;manufacturer=steinway&quot;</code></p></td><td id="z89sk1s_291"><p>Retrieves all non-Steinway pianos.</p></td></tr><tr id="z89sk1s_280"><td id="z89sk1s_293"><p><code class="code" id="z89sk1s_295">&quot;product=piano AND price&lt;2000&quot;</code></p></td><td id="z89sk1s_294"><p>This query retrieves inexpensive pianos.</p></td></tr></tbody></table></div></section></section><section class="chapter"><h2 id="mixing-global-and-field-searches" data-toc="mixing-global-and-field-searches">Mixing global and field searches</h2><p id="z89sk1s_296">A query string can contain any number of global search expressions and field search expressions. Spaces between expressions are treated as AND. You can also use OR and AND explicity, along with parentheses. Each expression will be handled according to the rules associated with that kind of term.</p><div class="table-wrapper"><table class="wide" id="z89sk1s_297"><thead><tr class="ijRowHead" id="z89sk1s_299"><th id="z89sk1s_304"><p>Query String</p></th><th id="z89sk1s_305"><p>Comments</p></th></tr></thead><tbody><tr id="z89sk1s_300"><td id="z89sk1s_306"><p><code class="code" id="z89sk1s_308">&quot;keyboard&nbsp;great&nbsp;price&lt;5000&quot;</code><br> <code class="code" id="z89sk1s_310">&quot;keyboard&nbsp;AND&nbsp;great&nbsp;AND&nbsp;price&lt;5000&quot;</code></p></td><td id="z89sk1s_307"><p>Retrieves documents where the words &quot;great&quot; and &quot;keyboard&quot; appear in any text, HTML, or atom fields, and there is a price field less than 5000. The AND is implied, the second form is equivalent.</p></td></tr><tr id="z89sk1s_301"><td id="z89sk1s_311"><p><code class="code" id="z89sk1s_313">&quot;keyboard&nbsp;OR&nbsp;product=piano&quot;</code></p></td><td id="z89sk1s_312"><p>Retrieves documents with a product field that contains piano, or documents with any text, HTML, or atom field that contains keyboard.</p></td></tr></tbody></table></div></section><div class="last-modified">10 April 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="documents-and-indexes.html" class="navigation-links__prev">Documents and Indexes</a><a href="query-and-sorting-options.html" class="navigation-links__next">Query and Sorting Options</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>