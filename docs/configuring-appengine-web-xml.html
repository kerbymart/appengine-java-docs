<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-13T01:56:44.760752842"><title>Configuring appengine-web.xml | Google App Engine Java Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"about-appengine-web-xml","level":0,"title":"About appengine-web.xml","anchor":"#about-appengine-web-xml"},{"id":"scaling-and-instance-types","level":0,"title":"Scaling and instance types","anchor":"#scaling-and-instance-types"},{"id":"static-files-and-resource-files","level":0,"title":"Static files and resource files","anchor":"#static-files-and-resource-files"},{"id":"system-properties-and-environment-variables","level":0,"title":"System properties and environment variables","anchor":"#system-properties-and-environment-variables"},{"id":"configuring-secure-urls-ssl","level":0,"title":"Configuring Secure URLs (SSL)","anchor":"#configuring-secure-urls-ssl"},{"id":"enabling-sessions","level":0,"title":"Enabling sessions","anchor":"#enabling-sessions"},{"id":"reserved-urls","level":0,"title":"Reserved URLs","anchor":"#reserved-urls"},{"id":"inbound-services","level":0,"title":"Inbound services","anchor":"#inbound-services"},{"id":"disabling-precompilation","level":0,"title":"Disabling precompilation","anchor":"#disabling-precompilation"},{"id":"warmup-requests","level":0,"title":"Warmup requests","anchor":"#warmup-requests"},{"id":"custom-error-responses","level":0,"title":"Custom error responses","anchor":"#custom-error-responses"},{"id":"using-concurrent-requests","level":0,"title":"Using concurrent requests","anchor":"#using-concurrent-requests"},{"id":"auto-id-policy","level":0,"title":"Auto ID policy","anchor":"#auto-id-policy"},{"id":"urlfetch-timeout","level":0,"title":"URLFetch timeout","anchor":"#urlfetch-timeout"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Configuring appengine-web.xml | Google App Engine Java Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Google App Engine Java Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/configuring-appengine-web-xml.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Configuring appengine-web.xml | Google App Engine Java Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/configuring-appengine-web-xml.html#webpage",
    "url": "writerside-documentation/configuring-appengine-web-xml.html",
    "name": "Configuring appengine-web.xml | Google App Engine Java Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Google App Engine Java Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Configuring-appengine-web.xml" data-main-title="Configuring appengine-web.xml" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Guides.md|Guides///Managing-and-Configuring-Your-App.md|Managing and Configuring Your App"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Google App Engine Java Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Configuring-appengine-web.xml" id="Configuring-appengine-web.xml.md">Configuring appengine-web.xml</h1><p id="nr9ut0_3"><a href="https://web.archive.org/web/20160424230144/https://cloud.google.com/appengine/docs/python/config/appconfig" id="nr9ut0_21" data-tooltip="View this page in the Python runtime" data-external="true" rel="noopener noreferrer" target="_blank">Python</a> |Java |<a href="https://web.archive.org/web/20160424230144/https://cloud.google.com/appengine/docs/php/config/appconfig" id="nr9ut0_22" data-tooltip="View this page in the PHP runtime" data-external="true" rel="noopener noreferrer" target="_blank">PHP</a> |<a href="https://web.archive.org/web/20160424230144/https://cloud.google.com/appengine/docs/go/config/appconfig" id="nr9ut0_23" data-tooltip="View this page in the Go runtime" data-external="true" rel="noopener noreferrer" target="_blank">Go</a></p><p id="nr9ut0_4">In addition to the <a href="https://web.archive.org/web/20160424230144/https://cloud.google.com/appengine/docs/java/config/webxml" id="nr9ut0_24" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="nr9ut0_27">web.xml</code> deployment descriptor</a>, an App Engine Java application uses a configuration file, named <code class="code" id="nr9ut0_25">appengine-web.xml</code>, to specify the app's registered application ID and the version identifier of the latest code, and to identify which files in the app's WAR are static files (like images) and which are resource files used by the application. The <a href="https://web.archive.org/web/20160424230144/https://cloud.google.com/appengine/docs/java/tools/uploadinganapp" id="nr9ut0_26" data-external="true" rel="noopener noreferrer" target="_blank">appcfg</a> command uses this information when you upload the app.</p><p id="nr9ut0_5"><span class="control" id="nr9ut0_28">Note:</span> If you created your project using the <a href="https://web.archive.org/web/20160424230144/https://console.cloud.google.com/" id="nr9ut0_29" data-external="true" rel="noopener noreferrer" target="_blank">Google Cloud Platform Console</a>, your project has a title and an ID. In the instructions that follow, the <span class="emphasis" id="nr9ut0_30">project</span> title and ID can be used wherever an <span class="emphasis" id="nr9ut0_31">application</span> title and ID are mentioned. They are the same thing.</p><ol class="list _decimal" id="nr9ut0_6" type="1"><li class="list__item" id="nr9ut0_32"><p id="nr9ut0_47"><span id="nr9ut0_48">About <code class="code" id="nr9ut0_49">appengine-web.xml</code></span></p></li><li class="list__item" id="nr9ut0_33"><p id="nr9ut0_50"><span id="nr9ut0_51">Scaling and instance types</span></p></li><li class="list__item" id="nr9ut0_34"><p id="nr9ut0_52"><span id="nr9ut0_54">Static files and resource files</span></p><ul class="list _bullet" id="nr9ut0_53"><li class="list__item" id="nr9ut0_55"><p id="nr9ut0_59"><span id="nr9ut0_60">Including and excluding files</span></p></li><li class="list__item" id="nr9ut0_56"><p id="nr9ut0_61"><span id="nr9ut0_62">Changing the MIME Type for static files</span></p></li><li class="list__item" id="nr9ut0_57"><p id="nr9ut0_63"><span id="nr9ut0_64">Changing the root directory</span></p></li><li class="list__item" id="nr9ut0_58"><p id="nr9ut0_65"><span id="nr9ut0_66">Static cache expiration</span></p></li></ul></li><li class="list__item" id="nr9ut0_35"><p id="nr9ut0_67"><span id="nr9ut0_68">System properties and environment variables</span></p></li><li class="list__item" id="nr9ut0_36"><p id="nr9ut0_69"><span id="nr9ut0_70">Configuring Secure URLs (SSL)</span></p></li><li class="list__item" id="nr9ut0_37"><p id="nr9ut0_71"><span id="nr9ut0_72">Enabling sessions</span></p></li><li class="list__item" id="nr9ut0_38"><p id="nr9ut0_73"><span id="nr9ut0_74">Reserved URLs</span></p></li><li class="list__item" id="nr9ut0_39"><p id="nr9ut0_75"><span id="nr9ut0_76">Inbound services</span></p></li><li class="list__item" id="nr9ut0_40"><p id="nr9ut0_77"><span id="nr9ut0_78">Warmup requests</span></p></li><li class="list__item" id="nr9ut0_41"><p id="nr9ut0_79"><span id="nr9ut0_80">Disabling precompilation</span></p></li><li class="list__item" id="nr9ut0_42"><p id="nr9ut0_81"><span id="nr9ut0_82">Custom error responses</span></p></li><li class="list__item" id="nr9ut0_43"><p id="nr9ut0_83"><span id="nr9ut0_84">Using concurrent requests</span></p></li><li class="list__item" id="nr9ut0_44"><p id="nr9ut0_85"><span id="nr9ut0_86">Custom PageSpeed configuration</span> (Deprecated)</p></li><li class="list__item" id="nr9ut0_45"><p id="nr9ut0_87"><span id="nr9ut0_88">Auto ID policy</span></p></li><li class="list__item" id="nr9ut0_46"><p id="nr9ut0_89"><span id="nr9ut0_90">URLFetch timeout</span></p></li></ol><section class="chapter"><h2 id="about-appengine-web-xml" data-toc="about-appengine-web-xml">About <code class="code" id="nr9ut0_103">appengine-web.xml</code></h2><p id="nr9ut0_92">An App Engine Java app must have a file named <code class="code" id="nr9ut0_104">appengine-web.xml</code> in its WAR, in the directory <code class="code" id="nr9ut0_105">WEB-INF/</code>. This is an XML file whose root element is <code class="code" id="nr9ut0_106">&lt;appengine-web-app&gt;</code>. A minimal file that specifies the application ID, a version identifier, and no static files or resource files looks like this:</p><div class="code-block" data-lang="none">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;appengine-web-app xmlns=&quot;http://appengine.google.com/ns/1.0&quot;&gt;
  &lt;application&gt;_your_app_id_&lt;/application&gt;
  &lt;version&gt;alpha-001&lt;/version&gt;
  &lt;threadsafe&gt;true&lt;/threadsafe&gt;
&lt;/appengine-web-app&gt;
</div><p id="nr9ut0_94"><span class="control" id="nr9ut0_107">Note:</span> The XML Schema Definition of <code class="code" id="nr9ut0_108">appengine-web.xml</code> can be found <a href="https://web.archive.org/web/20160424230144/https://code.google.com/p/googleappengine/source/browse/trunk/java/src/main/com/google/appengine/tools/development/appengine-web.xsd" id="nr9ut0_109" data-external="true" rel="noopener noreferrer" target="_blank">here</a>. The raw XSD file can be downloaded from this <a href="https://web.archive.org/web/20160424230144/https://googleappengine.googlecode.com/svn/trunk/java/src/main/com/google/appengine/tools/development/appengine-web.xsd" id="nr9ut0_110" data-external="true" rel="noopener noreferrer" target="_blank">link</a>.</p><p id="nr9ut0_95">The <code class="code" id="nr9ut0_111">&lt;application&gt;</code> element contains the application's ID. This is the application ID you register when you create your application in the <a href="https://web.archive.org/web/20160424230144/https://console.cloud.google.com/" id="nr9ut0_112" data-external="true" rel="noopener noreferrer" target="_blank">Google Cloud Platform Console</a>. When you upload your app, <code class="code" id="nr9ut0_113">appcfg</code> gets the application ID from this file.</p><p id="nr9ut0_96">The <code class="code" id="nr9ut0_114">&lt;version&gt;</code> element contains the version identifier for the latest version of the app's code. The version identifier can contain lowercase letters, digits, and hyphens. It cannot begin with the prefix &quot;ah-&quot; and the names &quot;default&quot; and &quot;latest&quot; are reserved and cannot be used.</p><p id="nr9ut0_97"><span class="control" id="nr9ut0_115">Note:</span> Version names should begin with a letter, to distinguish them from numeric instances which are always specified by a number. This avoids the ambiguity with URLs like <code class="code" id="nr9ut0_116">123.my-module.appspot.com</code>, which can be interpreted two ways: If version &ldquo;123&rdquo; exists, the target will be version &ldquo;123&rdquo; of the given module. If that version does not exist, the target will be instance number 123 of the default version of the module.</p><p id="nr9ut0_98"><code class="code" id="nr9ut0_117">appcfg</code> uses this version identifier when it uploads the application, telling App Engine to either create a new version of the app with the given identifier, or replace the version of the app with the given identifier if one already exists. You can test new versions of your app with a URL using &quot;-dot-&quot; as a subdomain separator in the URL, e.g., <code class="code" id="nr9ut0_118">https://_version_id_-dot- _your_app_id_.appspot.com</code>. Using the <a href="https://web.archive.org/web/20160424230144/https://console.cloud.google.com/" id="nr9ut0_119" data-external="true" rel="noopener noreferrer" target="_blank">Google Cloud Platform Console</a>, you can select the default version of your app. The default version is loaded when no version, or an invalid version, is specified.</p><p id="nr9ut0_99">The <code class="code" id="nr9ut0_120">&lt;threadsafe&gt;</code> element defines whether App Engine can send multiple requests at the same time to a given web server. It is further described in the section <span id="nr9ut0_121">Using concurrent requests</span>.</p><p id="nr9ut0_100">The <code class="code" id="nr9ut0_122">&lt;static-files&gt;</code> and <code class="code" id="nr9ut0_123">&lt;resource-files&gt;</code> elements are described in the next section.</p><p id="nr9ut0_101">You can find the DTD and schema specifications for this file in the SDK's <code class="code" id="nr9ut0_124">docs/</code> directory.</p><p id="nr9ut0_102"><span class="control" id="nr9ut0_125">Note:</span> The standard <code class="code" id="nr9ut0_126">appengine-web.xml</code> file defines the default module. You will need to specify additional configuration parameters for each non-default module. These are described in the <a href="https://web.archive.org/web/20160424230144/https://cloud.google.com/appengine/docs/java/modules/#Java_Configuration" id="nr9ut0_127" data-external="true" rel="noopener noreferrer" target="_blank">Modules</a> documentation. You may also apply these configuration parameters to the default module.</p></section><section class="chapter"><h2 id="scaling-and-instance-types" data-toc="scaling-and-instance-types">Scaling and instance types</h2><section class="chapter"><h3 id="manual-scaling" data-toc="manual-scaling">Manual Scaling</h3><div class="code-block" data-lang="none">
&lt;appengine-web-app xmlns=&quot;http://appengine.google.com/ns/1.0&quot;&gt;
  &lt;application&gt;simple-app&lt;/application&gt;
  &lt;module&gt;default&lt;/module&gt;
  &lt;version&gt;uno&lt;/version&gt;
  &lt;threadsafe&gt;true&lt;/threadsafe&gt;
  &lt;instance-class&gt;B8&lt;/instance-class&gt;
  &lt;manual-scaling&gt;
    &lt;instances&gt;5&lt;/instances&gt;
  &lt;/manual-scaling&gt;
&lt;/appengine-web-app&gt;
</div><section class="chapter"><h4 id="instance-class" data-toc="instance-class"><code class="code" id="nr9ut0_137">instance-class:</code></h4><p id="nr9ut0_136">The instance class size for this module. When using manual scaling, the B1, B2, B4, B4_1G, and B8 instance classes are available. If you do not specify a class, B2 is assigned by default.</p></section><section class="chapter"><h4 id="manual-scaling" data-toc="manual-scaling"><code class="code" id="nr9ut0_140">manual-scaling:</code></h4><p id="nr9ut0_139">Required to enable manual scaling for a module.</p></section><section class="chapter"><h4 id="instances" data-toc="instances"><code class="code" id="nr9ut0_143">instances:</code></h4><p id="nr9ut0_142">The number of instances to assign to the module at the start. This number can later be altered by using the Modules API <code class="code" id="nr9ut0_144">setNumInstances()</code> function.</p></section></section><section class="chapter"><h3 id="basic-scaling" data-toc="basic-scaling">Basic Scaling</h3><div class="code-block" data-lang="none">
&lt;appengine-web-app xmlns=&quot;http://appengine.google.com/ns/1.0&quot;&gt;
  &lt;application&gt;simple-app&lt;/application&gt;
  &lt;module&gt;default&lt;/module&gt;
  &lt;version&gt;uno&lt;/version&gt;
  &lt;threadsafe&gt;true&lt;/threadsafe&gt;
  &lt;instance-class&gt;B8&lt;/instance-class&gt;
  &lt;basic-scaling&gt;
    &lt;max-instances&gt;11&lt;/max-instances&gt;
    &lt;idle-timeout&gt;10m&lt;/idle-timeout&gt;
  &lt;/basic-scaling&gt;
&lt;/appengine-web-app&gt;
</div><section class="chapter"><h4 id="instance-class" data-toc="instance-class"><code class="code" id="nr9ut0_152">instance-class:</code></h4><p id="nr9ut0_151">The instance class size for this module. When using basic scaling, the B1, B2, B4, B4_1G, and B8 instance classes are available. If you do not specify a class, B2 is assigned by default.</p></section><section class="chapter"><h4 id="basic-scaling" data-toc="basic-scaling"><code class="code" id="nr9ut0_155">basic-scaling:</code></h4><p id="nr9ut0_154">Required to enable basic scaling for a module.</p></section><section class="chapter"><h4 id="max-instances" data-toc="max-instances"><code class="code" id="nr9ut0_158">max-instances:</code></h4><p id="nr9ut0_157">Required. The maximum number of instances for App Engine to create for this module version. This is useful to limit the costs of a module.</p></section><section class="chapter"><h4 id="idle-timeout" data-toc="idle-timeout"><code class="code" id="nr9ut0_162">idle-timeout:</code></h4><p id="nr9ut0_160">Optional. The instance will be shut down this amount of time after receiving its last request. The default is 5 minutes.</p><p id="nr9ut0_161">Note: Basic scaling is not currently available in the Java Development Server.</p></section></section><section class="chapter"><h3 id="automatic-scaling" data-toc="automatic-scaling">Automatic Scaling</h3><div class="code-block" data-lang="none">
&lt;appengine-web-app xmlns=&quot;http://appengine.google.com/ns/1.0&quot;&gt;
  &lt;application&gt;simple-app&lt;/application&gt;
  &lt;module&gt;default&lt;/module&gt;
  &lt;version&gt;uno&lt;/version&gt;
  &lt;threadsafe&gt;true&lt;/threadsafe&gt;
  &lt;instance-class&gt;F2&lt;/instance-class&gt;
  &lt;automatic-scaling&gt;
    &lt;min-idle-instances&gt;5&lt;/min-idle-instances&gt;
    &lt;!-- automatic is the default value. --&gt;
    &lt;max-idle-instances&gt;automatic&lt;/max-idle-instances&gt;
    &lt;!-- automatic is the default value. --&gt;
    &lt;min-pending-latency&gt;30ms&lt;/min-pending-latency&gt;
    &lt;max-pending-latency&gt;automatic&lt;/max-pending-latency&gt;
    &lt;max-concurrent-requests&gt;50&lt;/max-concurrent-requests&gt;
  &lt;/automatic-scaling&gt;
&lt;/appengine-web-app&gt;
</div><section class="chapter"><h4 id="instance-class" data-toc="instance-class"><code class="code" id="nr9ut0_173">instance-class:</code></h4><p id="nr9ut0_172">The Instance Class size for this module. When using automatic scaling, only the F1, F2, F4, and F4_1G instance classes are available. If you do not specify a class, F1 is assigned by default.</p></section><section class="chapter"><h4 id="automatic-scaling" data-toc="automatic-scaling"><code class="code" id="nr9ut0_176">automatic-scaling:</code></h4><p id="nr9ut0_175">Optional. Automatic scaling is assumed by default.</p></section><section class="chapter"><h4 id="min-idle-instances" data-toc="min-idle-instances"><code class="code" id="nr9ut0_180">min-idle-instances:</code></h4><p id="nr9ut0_178">The minimum number of idle instances that App Engine should maintain for this version. Only applies to the default version of a module, since other versions are not expected to receive significant traffic. Please keep in mind:</p><ul class="list _bullet" id="nr9ut0_179"><li class="list__item" id="nr9ut0_181"><p id="nr9ut0_183">A low minimum helps keep your running costs down during idle periods, but means that fewer instances may be immediately available to respond to a sudden load spike.</p></li><li class="list__item" id="nr9ut0_182"><p id="nr9ut0_184">A high minimum allows you to prime the application for rapid spikes in request load. App Engine keeps the minimum number of &ldquo;resident instances&rdquo; running at all times, so an instance is always available to serve an incoming request. You are charged for resident instances, whether or not they are handling requests. For resident instances to function properly, you must be sure that <a href="https://web.archive.org/web/20160424230144/https://cloud.google.com/appengine/docs/java/config/appconfig#Java_Warmup_requests" id="nr9ut0_186" data-external="true" rel="noopener noreferrer" target="_blank">warmup requests</a> are enabled and your application handles warmup requests. The <span class="control" id="nr9ut0_187">Availability</span> column of the <a href="https://web.archive.org/web/20160424230144/https://console.cloud.google.com/" id="nr9ut0_188" data-external="true" rel="noopener noreferrer" target="_blank">Cloud Platform Console</a> <span class="control" id="nr9ut0_189">Instance</span> page indicates whether an instance is resident or dynamic.</p><p id="nr9ut0_185">If you set a minimum number of idle instances, pending latency will have less effect on your application's performance. Because App Engine keeps idle instances in reserve, it is unlikely that requests will enter the pending queue except in exceptionally high load spikes. You will need to test your application and expected traffic volume to determine the ideal number of instances to keep in reserve.</p></li></ul></section><section class="chapter"><h4 id="max-idle-instances" data-toc="max-idle-instances"><code class="code" id="nr9ut0_194">max-idle-instances:</code></h4><p id="nr9ut0_191">The maximum number of idle instances that App Engine should maintain for this version. Please keep in mind:</p><ul class="list _bullet" id="nr9ut0_192"><li class="list__item" id="nr9ut0_195"><p id="nr9ut0_197">A high maximum reduces the number of idle instances more gradually when load levels return to normal after a spike. This helps your application maintain steady performance through fluctuations in request load, but also raises the number of idle instances (and consequent running costs) during such periods of heavy load.</p></li><li class="list__item" id="nr9ut0_196"><p id="nr9ut0_198">A low maximum keeps running costs lower, but can degrade performance in the face of volatile load levels.</p></li></ul><p id="nr9ut0_193"><span class="control" id="nr9ut0_199">Note:</span> When settling back to normal levels after a load spike, the number of idle instances may temporarily exceed your specified maximum. However, you will not be charged for more instances than the maximum number you've specified.</p></section><section class="chapter"><h4 id="min-pending-latency" data-toc="min-pending-latency"><code class="code" id="nr9ut0_203">min-pending-latency:</code></h4><p id="nr9ut0_201">The minimum amount of time that App Engine should allow a request to wait in the pending queue before starting a new instance to handle it.</p><ul class="list _bullet" id="nr9ut0_202"><li class="list__item" id="nr9ut0_204"><p id="nr9ut0_206">A low minimum means requests must spend less time in the pending queue when all existing instances are active. This improves performance but increases the cost of running your application.</p></li><li class="list__item" id="nr9ut0_205"><p id="nr9ut0_207">A high minimum means requests will remain pending longer if all existing instances are active. This lowers running costs but increases the time users must wait for their requests to be served.</p></li></ul></section><section class="chapter"><h4 id="max-pending-latency" data-toc="max-pending-latency"><code class="code" id="nr9ut0_211">max-pending-latency:</code></h4><p id="nr9ut0_209">The maximum amount of time that App Engine should allow a request to wait in the pending queue before starting a new instance to handle it.</p><ul class="list _bullet" id="nr9ut0_210"><li class="list__item" id="nr9ut0_212"><p id="nr9ut0_214">A low maximum means App Engine will start new instances sooner for pending requests, improving performance but raising running costs.</p></li><li class="list__item" id="nr9ut0_213"><p id="nr9ut0_215">A high maximum means users may wait longer for their requests to be served (if there are pending requests and no idle instances to serve them), but your application will cost less to run.</p></li></ul></section><section class="chapter"><h4 id="max-concurrent-requests" data-toc="max-concurrent-requests"><code class="code" id="nr9ut0_218">max-concurrent-requests:</code></h4><p id="nr9ut0_217">Optional. The number of concurrent requests an automatic scaling instance can accept before the scheduler spawns a new instance (Default: 8, Maximum: 80). You may experience increased API latency if this setting is too high. Note that the scheduler may spawn a new instance before the actual maximum number of requests is reached.</p></section></section></section><section class="chapter"><h2 id="static-files-and-resource-files" data-toc="static-files-and-resource-files">Static files and resource files</h2><p id="nr9ut0_219">Many web applications have files that are served directly to the user's browser, such as images, CSS style sheets, or browser JavaScript code. These are known as <span class="emphasis" id="nr9ut0_228">static files</span> because they do not change, and can benefit from web servers dedicated just to static content. App Engine serves static files from dedicated servers and caches that are separate from the application servers.</p><p id="nr9ut0_220">Files that are accessible by the application code using the filesystem are called <span class="emphasis" id="nr9ut0_229">resource files</span>. These files are stored on the application servers with the app.</p><p id="nr9ut0_221">By default, all files in the WAR are treated as both static files and resource files, except for JSP files, which are compiled into servlet classes and mapped to URL paths, and files in the <code class="code" id="nr9ut0_230">WEB-INF/</code> directory, which are never served as static files and always available to the app as resource files.</p><p id="nr9ut0_222">You can adjust which files are considered static files and which are considered resource files using elements in the <code class="code" id="nr9ut0_231">appengine-web.xml</code> file. The <code class="code" id="nr9ut0_232">&lt;static-files&gt;</code> element specifies patterns that match file paths to include and exclude from the list of static files, overriding or amending the default behavior. Similarly, the <code class="code" id="nr9ut0_233">&lt;resource-files&gt;</code> element specifies which files are considered resource files.</p><p id="nr9ut0_223"><span class="control" id="nr9ut0_234">Note:</span> App Engine resource files are read using <code class="code" id="nr9ut0_235">java.io.File</code> or <code class="code" id="nr9ut0_236">javax.servlet.ServletContext.getResource/getResourceAsStream</code>. They are not accessible via <code class="code" id="nr9ut0_237">Class.getResourceAsStream()</code></p><section class="chapter"><h3 id="including-and-excluding-files" data-toc="including-and-excluding-files">Including and excluding files</h3><p id="nr9ut0_238">Path patterns are specified using zero or more <code class="code" id="nr9ut0_247">&lt;include&gt;</code> and <code class="code" id="nr9ut0_248">&lt;exclude&gt;</code> elements. In a pattern, <code class="code" id="nr9ut0_249">'*'</code> represents zero or more of any character in a file or directory name, and <code class="code" id="nr9ut0_250">**</code> represents zero or more directories in a path. Files and directories matching <code class="code" id="nr9ut0_251">&lt;exclude&gt;</code> patterns will not be uploaded when you deploy your app to App Engine. However, these files and directories will still be accessible to your application when running on the local Development Server.</p><p id="nr9ut0_239">An <code class="code" id="nr9ut0_252">&lt;include&gt;</code> element overrides the default behavior of including all files. An <code class="code" id="nr9ut0_253">&lt;exclude&gt;</code> element applies after all <code class="code" id="nr9ut0_254">&lt;include&gt;</code> patterns (as well as the default if no explicit <code class="code" id="nr9ut0_255">&lt;include&gt;</code> is provided).</p><p id="nr9ut0_240">The following example demonstrates how to designate all <code class="code" id="nr9ut0_256">.png</code> files as static files (except those in the <code class="code" id="nr9ut0_257">data/</code> directory and all of its subdirectories):</p><div class="code-block" data-lang="none">
&lt;static-files&gt;
  &lt;include path=&quot;/**.png&quot; /&gt;
  &lt;exclude path=&quot;/data/**.png&quot; /&gt;
</div><p id="nr9ut0_242">Similarly, the following sample demonstrates how to designate all <code class="code" id="nr9ut0_258">.xml</code> files as resource files (except those in the <code class="code" id="nr9ut0_259">feeds/</code> directory and all of its subdirectories):</p><div class="code-block" data-lang="none">
&lt;resource-files&gt;
  &lt;include path=&quot;/**.xml&quot; /&gt;
  &lt;exclude path=&quot;/feeds/**.xml&quot; /&gt;
</div><p id="nr9ut0_244">You can also set HTTP headers to use when responding to requests to these resources.</p><div class="code-block" data-lang="none">
&lt;static-files&gt;
  &lt;include path=&quot;/my_static-files&quot; &gt;
    &lt;http-header name=&quot;Access-Control-Allow-Origin&quot; value=&quot;http://example.org&quot; /&gt;
  &lt;/include&gt;
&lt;/static-files&gt;
</div><p id="nr9ut0_246"><span class="control" id="nr9ut0_260">Note:</span> If the <code class="code" id="nr9ut0_261">path</code> string doesn't start with a slash, then the HTTP headers (if any) work on App Engine but do <span class="control" id="nr9ut0_262">not</span> work on the Development Server.</p></section><section class="chapter"><h3 id="changing-the-mime-type-for-static-files" data-toc="changing-the-mime-type-for-static-files">Changing the MIME type for static files</h3><p id="nr9ut0_263">By default, static files are served using a MIME type selected based on the filename extension. You can associate custom MIME types with filename extensions for static files in <a href="https://web.archive.org/web/20160424230144/https://cloud.google.com/appengine/docs/java/config/webxml" id="nr9ut0_264" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="nr9ut0_266">web.xml</code></a> using <code class="code" id="nr9ut0_265">&lt;mime-mapping&gt;</code> elements.</p></section><section class="chapter"><h3 id="changing-the-root-directory" data-toc="changing-the-root-directory">Changing the root directory</h3><p id="nr9ut0_267">The <code class="code" id="nr9ut0_271">&lt;public-root&gt;</code> is a directory in your application that contains the static files for your application. When a request for a static file is made, the <code class="code" id="nr9ut0_272">&lt;public-root&gt;</code> for your application is prepended to the request path. This gives the path of an application file containing the content that is being requested.</p><p id="nr9ut0_268">The default <code class="code" id="nr9ut0_273">&lt;public-root&gt;</code> is <code class="code" id="nr9ut0_274">/</code>.</p><p id="nr9ut0_269">For example, the following would map the URL path <code class="code" id="nr9ut0_275">/index.html</code> to the application file path <code class="code" id="nr9ut0_276">/static/index.html</code>:</p><div class="code-block" data-lang="none">
&lt;public-root&gt;/static&lt;/public-root&gt;
</div></section><section class="chapter"><h3 id="static-cache-expiration" data-toc="static-cache-expiration">Static cache expiration</h3><p id="nr9ut0_277">Unless told otherwise, web proxies and browsers retain files they load from a website for a limited period of time.</p><p id="nr9ut0_278">You can configure a cache duration for specific static file handlers by providing an <code class="code" id="nr9ut0_283">expiration</code> attribute to <code class="code" id="nr9ut0_284">&lt;static-files&gt;&lt;include ... &gt;</code>. The value is a string of numbers and units, separated by spaces, where units can be <code class="code" id="nr9ut0_285">d</code> for days, <code class="code" id="nr9ut0_286">h</code> for hours, <code class="code" id="nr9ut0_287">m</code> for minutes, and <code class="code" id="nr9ut0_288">s</code> for seconds. For example, <code class="code" id="nr9ut0_289">&quot;4d 5h&quot;</code> sets cache expiration to 4 days and 5 hours after the file is first requested. If the expiration time is omitted, the production server defaults to 10 minutes.</p><p id="nr9ut0_279"><span class="control" id="nr9ut0_290">Note:</span> Script handlers can set cache durations by returning the appropriate HTTP headers to the browser.</p><p id="nr9ut0_280">For example:</p><div class="code-block" data-lang="none">
&lt;static-files&gt;
  &lt;include path=&quot;/**.png&quot; expiration=&quot;4d 5h&quot; /&gt;
&lt;/static-files&gt;
</div><p id="nr9ut0_282"><span class="control" id="nr9ut0_291">Important:</span> The expiration time will be sent in the <code class="code" id="nr9ut0_292">Cache-Control</code> and <code class="code" id="nr9ut0_293">Expires</code> HTTP response headers, and therefore, the files are likely to be cached by the user's browser, as well as intermediate caching proxy servers such as Internet Service Providers. Once a file is transmitted with a given expiration time, there is generally <span class="control" id="nr9ut0_294">no way</span> to clear it out of intermediate caches, even if the user clears their own browser cache. Re-deploying a new version of the app will <span class="control" id="nr9ut0_295">not</span> reset any caches. Therefore, if you ever plan to modify a static file, it should have a short (less than one hour) expiration time. In most cases, the default 10-minute expiration time is appropriate.</p></section></section><section class="chapter"><h2 id="system-properties-and-environment-variables" data-toc="system-properties-and-environment-variables">System properties and environment variables</h2><p id="nr9ut0_296">The <code class="code" id="nr9ut0_301">appengine-web.xml</code> file can define system properties and environment variables that are set when the application is running.</p><div class="code-block" data-lang="none">
&lt;system-properties&gt;
  &lt;property name=&quot;myapp.maximum-message-length&quot; value=&quot;140&quot; /&gt;
  &lt;property name=&quot;myapp.notify-every-n-signups&quot; value=&quot;1000&quot; /&gt;
  &lt;property name=&quot;myapp.notify-url&quot; value=&quot;http://www.example.com/signupnotify&quot; /&gt;
&lt;/system-properties&gt;

&lt;env-variables&gt;
  &lt;env-var name=&quot;DEFAULT_ENCODING&quot; value=&quot;UTF-8&quot; /&gt;
&lt;/env-variables&gt;
</div><p id="nr9ut0_298">To avoid conflicts with your local environment, the development server does not set environment variables based on this file, and requires that the local environment have these variables already set to matching values. (This does not apply to system properties.)</p><div class="code-block" data-lang="none">
export DEFAULT_ENCODING=&quot;UTF-8&quot;
dev_appserver war
</div><p id="nr9ut0_300">When running on App Engine, the environment is created with these variables already set.</p></section><section class="chapter"><h2 id="configuring-secure-urls-ssl" data-toc="configuring-secure-urls-ssl">Configuring Secure URLs (SSL)</h2><p id="nr9ut0_302">By default, any user can access any URL using either HTTP or HTTPS. You can configure an app to require HTTPS for certain URLs in the deployment descriptor. See <a href="https://web.archive.org/web/20160424230144/https://cloud.google.com/appengine/docs/java/config/webxml#Secure_URLs" id="nr9ut0_306" data-external="true" rel="noopener noreferrer" target="_blank">Deployment Descriptor: Secure URLs</a>.</p><p id="nr9ut0_303">If you want to disallow the use of HTTPS for the application, put the following in the <code class="code" id="nr9ut0_307">appengine-web.xml</code> file:</p><div class="code-block" data-lang="none">
&lt;ssl-enabled&gt;false&lt;/ssl-enabled&gt;
</div><p id="nr9ut0_305">There is no way to disallow HTTPS for some URL paths and not others in the Java runtime environment.</p></section><section class="chapter"><h2 id="enabling-sessions" data-toc="enabling-sessions">Enabling sessions</h2><p id="nr9ut0_308">App Engine includes an implementation of sessions, using <a href="https://web.archive.org/web/20160424230144/https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpSession.html" id="nr9ut0_318" data-external="true" rel="noopener noreferrer" target="_blank">the servlet session interface</a>. The implementation stores session data in the App Engine datastore for persistence, and also uses memcache for speed. As with most other servlet containers, the session attributes that are set with <code class="code" id="nr9ut0_319">session.setAttribute()</code> during the request are persisted at the end of the request.</p><p id="nr9ut0_309">This feature is off by default. To turn it on, add the following to <code class="code" id="nr9ut0_320">appengine-web.xml</code>:</p><div class="code-block" data-lang="none">
&lt;sessions-enabled&gt;true&lt;/sessions-enabled&gt;
</div><p id="nr9ut0_311">The implementation creates datastore entities of the kind <code class="code" id="nr9ut0_321">_ah_SESSION</code>, and memcache entries using keys with a prefix of <code class="code" id="nr9ut0_322">_ahs</code>.</p><p id="nr9ut0_312"><span class="control" id="nr9ut0_323">Note:</span> Because App Engine stores session data in the datastore and memcache, all values stored in the session must implement the <code class="code" id="nr9ut0_324">java.io.Serializable</code> interface.</p><p id="nr9ut0_313">It's possible to reduce request latency by configuring your application to asynchronously write HTTP session data to the datastore:</p><div class="code-block" data-lang="none">
&lt;async-session-persistence enabled=&quot;true&quot; /&gt;
</div><p id="nr9ut0_315">With async session persistence turned on, App Engine will submit a Task Queue task to write session data to the datastore before writing the data to memcache. By default the task will be submitted to the <code class="code" id="nr9ut0_325">default</code> queue. If you'd like to use a different queue, add the <code class="code" id="nr9ut0_326">queue-name</code> attribute:</p><div class="code-block" data-lang="none">
&lt;async-session-persistence enabled=&quot;true&quot; queue-name=&quot;myqueue&quot;/&gt;
</div><p id="nr9ut0_317"><span class="control" id="nr9ut0_327">Note:</span> Note, session data is always written synchronously to memcache. If a request tries to read the session data when memcache is not available (or the session data has been flushed), it will fail over to the datastore, which may not yet have the most recent session data. This means that asynchronous session persistence may cause your application to see stale session data. However, for most applications the latency benefit far outweighs the risk.</p></section><section class="chapter"><h2 id="reserved-urls" data-toc="reserved-urls">Reserved URLs</h2><p id="nr9ut0_328">All URLs that begin with <code class="code" id="nr9ut0_329">/_ah/</code> are reserved by App Engine for features or administrative purposes. Some URLs are routed to App Engine feature handlers, while others are called by App Engine for special purposes and are expected to be mapped to request handlers in your app (for example, <code class="code" id="nr9ut0_330">/_ah/warmup</code> for <span id="nr9ut0_331">Warm-up Requests</span>).</p></section><section class="chapter"><h2 id="inbound-services" data-toc="inbound-services">Inbound services</h2><p id="nr9ut0_332">Before an application can receive email or XMPP messages, the application must be configured to enable the service. You enable the service for a Java app by including an <code class="code" id="nr9ut0_336">&lt;inbound-services&gt;</code> section in the <code class="code" id="nr9ut0_337">appengine-web.xml</code> file. The following inbound services are available:</p><ul class="list _bullet" id="nr9ut0_333"><li class="list__item" id="nr9ut0_338"><p id="nr9ut0_344"><code class="code" id="nr9ut0_345">channel_presence</code> - registers your application for notifications when a client <a href="https://web.archive.org/web/20160424230144/https://cloud.google.com/appengine/docs/java/channel/#Java_Tracking_client_connections_and_disconnections" id="nr9ut0_346" data-external="true" rel="noopener noreferrer" target="_blank">connects or disconnects from a channel</a>.</p></li><li class="list__item" id="nr9ut0_339"><p id="nr9ut0_347"><code class="code" id="nr9ut0_348">mail</code> - allows your application to <a href="https://web.archive.org/web/20160424230144/https://cloud.google.com/appengine/docs/java/mail/" id="nr9ut0_349" data-external="true" rel="noopener noreferrer" target="_blank">receive mail</a></p></li><li class="list__item" id="nr9ut0_340"><p id="nr9ut0_350"><code class="code" id="nr9ut0_351">xmpp_message</code> - allows your application to <a href="https://web.archive.org/web/20160424230144/https://cloud.google.com/appengine/docs/java/xmpp/#Java_Handling_incoming_calls" id="nr9ut0_352" data-external="true" rel="noopener noreferrer" target="_blank">receive instant messages</a></p></li><li class="list__item" id="nr9ut0_341"><p id="nr9ut0_353"><code class="code" id="nr9ut0_354">xmpp_presence</code> - allows your application to receive a user's chat presence</p></li><li class="list__item" id="nr9ut0_342"><p id="nr9ut0_355"><code class="code" id="nr9ut0_356">xmpp_subscribe</code> - allows your application to receive user subscription POSTs.</p></li><li class="list__item" id="nr9ut0_343"><p id="nr9ut0_357"><code class="code" id="nr9ut0_358">warmup</code> - enables <span id="nr9ut0_359">warmup requests</span></p></li></ul><p id="nr9ut0_334">For example, you can enable mail and warmup by specifying the following in <code class="code" id="nr9ut0_360">appengine-web.xml</code>:</p><div class="code-block" data-lang="none">
&lt;inbound-services&gt;
  &lt;service&gt;mail&lt;/service&gt;
  &lt;service&gt;warmup&lt;/service&gt;
&lt;/inbound-services&gt;
</div></section><section class="chapter"><h2 id="disabling-precompilation" data-toc="disabling-precompilation">Disabling precompilation</h2><p id="nr9ut0_361">App Engine uses a &quot;precompilation&quot; process with the Java bytecode of an app to enhance the performance of the app in the Java runtime environment. Precompiled code functions identically to the original bytecode.</p><p id="nr9ut0_362">If for some reason you prefer that your app not use precompilation, you can turn it off by adding the following to your <code class="code" id="nr9ut0_364">appengine-web.xml</code> file:</p><div class="code-block" data-lang="none">
&lt;precompilation-enabled&gt;false&lt;/precompilation-enabled&gt;
</div></section><section class="chapter"><h2 id="warmup-requests" data-toc="warmup-requests">Warmup requests</h2><p id="nr9ut0_365">App Engine frequently needs to load application code into a fresh instance. This happens when you redeploy the application, when the load pattern has increased beyond the capacity of the current instances, or simply due to maintenance or repairs of the underlying infrastructure or physical hardware.</p><p id="nr9ut0_366">Loading new application code on a fresh instance can result in <a href="https://web.archive.org/web/20160424230144/https://cloud.google.com/appengine/docs/scaling#loading_requests" id="nr9ut0_375" data-external="true" rel="noopener noreferrer" target="_blank">loading requests</a>. Loading requests can result in increased request latency for your users, but you can avoid this latency using <span class="control" id="nr9ut0_376">warmup requests</span>. Warmup requests load application code into a new instance before any live requests reach that instance.</p><p id="nr9ut0_367">App Engine attempts to detect when your application needs a new instance, and (assuming that warmup requests are enabled for your application) initiates a warmup request to initialize the new instance. However, these detection attempts do not work in every case. As a result, you may encounter loading requests, even if warmup requests are enabled in your app. For example, if your app is serving no traffic, the first request to the app will always be a loading request, not a warmup request.</p><p id="nr9ut0_368">Warmup requests use instance hours like any other request to your App Engine application. In most cases, you won't notice an increase in instance hours, since your application is simply initializing in a warmup request instead of a loading request. Your instance hour usage will likely increase if you decide to do more work (such as precaching) during a warmup request. If you set a minimum number of idle instances, you may encounter warmup requests when those instances first start, but they will remain available after that time.</p><p id="nr9ut0_369">The default warmup request causes all JAR files to be indexed in memory and initializes your application and filters. The following sections describe how to configure warmup requests and create warmup logic for your application:</p><ul class="list _bullet" id="nr9ut0_370"><li class="list__item" id="nr9ut0_377"><p id="nr9ut0_381"><a href="#configuration" id="nr9ut0_382" data-tooltip="Warmup requests are enabled by default for Java applications configured via appengine-web.xml.">Configuration</a></p></li><li class="list__item" id="nr9ut0_378"><p id="nr9ut0_383"><span id="nr9ut0_384">Using a <code class="code" id="nr9ut0_385">&lt;load-on-startup&gt;</code> servlet</span></p></li><li class="list__item" id="nr9ut0_379"><p id="nr9ut0_386"><span id="nr9ut0_387">Using a ServletContextListener</span></p></li><li class="list__item" id="nr9ut0_380"><p id="nr9ut0_388"><span id="nr9ut0_389">Using a custom warmup servlet</span></p></li></ul><section class="chapter"><h3 id="configuration" data-toc="configuration">Configuration</h3><p id="nr9ut0_390">Warmup requests are enabled by default for Java applications configured via <code class="code" id="nr9ut0_394">appengine-web.xml</code>.</p><p id="nr9ut0_391">With warmup requests enabled, the App Engine infrastructure issues <code class="code" id="nr9ut0_395">GET</code> requests to <code class="code" id="nr9ut0_396">/_ah/warmup</code>, initializing <span id="nr9ut0_397">Configuring appengine-web.xml</span> servlets, <span id="nr9ut0_398">ServletContextListeners</span>, and <span id="nr9ut0_399">custom warmup servlets</span> - which allow you to initialize your application's code as it requires. You may or may not need to implement your own handler for <code class="code" id="nr9ut0_400">/_ah/warmup</code> depending on which of these methods you choose.</p><p id="nr9ut0_392">To disable warmup requests, specify the optional <code class="code" id="nr9ut0_401">&lt;warmup-requests-enabled&gt;</code> element in <code class="code" id="nr9ut0_402">appengine-web.xml</code> with a value of <code class="code" id="nr9ut0_403">false</code>:</p><div class="code-block" data-lang="none">
&lt;warmup-requests-enabled&gt;false&lt;/warmup-requests-enabled&gt;
</div></section><section class="chapter"><h3 id="using-a-load-on-startup-servlet" data-toc="using-a-load-on-startup-servlet">Using a <code class="code" id="nr9ut0_408">&lt;load-on-startup&gt;</code> servlet</h3><p id="nr9ut0_405">The easiest way to provide warmup logic is to mark your own servlets as <code class="code" id="nr9ut0_409">&lt;load-on-startup&gt;</code> in <code class="code" id="nr9ut0_410">web.xml</code>. This method requires no changes to your application code, and initializes all specified servlets when your application initializes. The following example demonstrates how to load <code class="code" id="nr9ut0_411">my-servlet</code> on startup:</p><div class="code-block" data-lang="none">
&lt;servlet&gt;
  &lt;servlet-name&gt;my-servlet&lt;/servlet-name&gt;
  &lt;servlet-class&gt;com.company.MyServlet&lt;/servlet-class&gt;
  &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
&lt;/servlet&gt;
</div><p id="nr9ut0_407">These lines load the specified servlet class and invoke the servlet's <code class="code" id="nr9ut0_412">init()</code> method. The warmup request initializes the specified servlets before servicing any live requests. However, if there is no warmup request, the servlets specified in <code class="code" id="nr9ut0_413">&lt;load-on-startup&gt;</code> are registered upon the first request to a new instance, which result in a loading request. As noted earlier, App Engine may not issue a warmup request every time your application needs a new instance.</p></section><section class="chapter"><h3 id="using-a-servletcontextlistener" data-toc="using-a-servletcontextlistener">Using a <code class="code" id="nr9ut0_420">ServletContextListener</code></h3><p id="nr9ut0_415">If you have custom logic that you want to run before any of your servlets is invoked, the standard Java mechanism to arrange for that code to be executed is to register a <a href="https://web.archive.org/web/20160424230144/http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContextListener.html" id="nr9ut0_421" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="nr9ut0_423">ServletContextListener</code></a> in <code class="code" id="nr9ut0_422">web.xml</code>.</p><div class="code-block" data-lang="none">
&lt;listener&gt;
  &lt;listener-class&gt;com.company.MyListener&lt;/listener-class&gt;
&lt;/listener&gt;
</div><p id="nr9ut0_417">And then supply a class alongside your servlet and filter code:</p><div class="code-block" data-lang="none">
public class MyListener implements ServletContextListener {
  public void contextInitialized(ServletContextEvent event) {
    // This will be invoked as part of a warmup request, or the first user
    // request if no warmup request was invoked.
  }
  public void contextDestroyed(ServletContextEvent event) {
    // App Engine does not currently invoke this method.
  }
}
</div><p id="nr9ut0_419">The <code class="code" id="nr9ut0_424">ServletContextListener</code> runs during a warmup request. If there is no warmup request, it runs upon the first request to a new instance. This may result in loading requests.</p></section><section class="chapter"><h3 id="using-a-custom-warmup-servlet" data-toc="using-a-custom-warmup-servlet">Using a custom warmup servlet</h3><p id="nr9ut0_425">As noted earlier, the prediction algorithm to initiate warmup requests for new instances does not work in every case. Even with this feature enabled, you may encounter loading requests. Executing expensive logic (such as precaching) during a loading request may incur additional load time when a new instance starts to run.</p><p id="nr9ut0_426">The custom warmup servlet invokes the servlet's <code class="code" id="nr9ut0_429">service</code> method <span class="emphasis" id="nr9ut0_430">only</span> during a warmup request. By placing expensive logic in a custom warmup servlet, you can avoid increased load times on loading requests.</p><p id="nr9ut0_427">To create a custom warmup servlet, simply override the built-in servlet definition for <code class="code" id="nr9ut0_431">_ah_warmup</code> in <code class="code" id="nr9ut0_432">web.xml</code>:</p><div class="code-block" data-lang="none">
&lt;servlet&gt;
  &lt;servlet-name&gt;_ah_warmup&lt;/servlet-name&gt;
  &lt;servlet-class&gt;com.company.MyWarmupServlet&lt;/servlet-class&gt;
</div></section></section><section class="chapter"><h2 id="custom-error-responses" data-toc="custom-error-responses">Custom error responses</h2><p id="nr9ut0_433">When certain errors occur, App Engine serves a generic error page. You can configure your app to serve a custom static file instead of these generic error pages, so long as the custom error data is less than 10 kilobytes. You can set up different static files to be served for each supported error code by specifying the files in your app's <code class="code" id="nr9ut0_440">appengine-web.xml</code> file. To serve custom error pages, add a <code class="code" id="nr9ut0_441">&lt;static-error-handlers&gt;</code> section to your <code class="code" id="nr9ut0_442">appengine-web.xml</code>, as in this example:</p><div class="code-block" data-lang="none">
&lt;static-error-handlers&gt;
  &lt;handler file=&quot;default_error.html&quot; /&gt;
  &lt;handler file=&quot;over_quota.html&quot; error-code=&quot;over_quota&quot; /&gt;
&lt;/static-error-handlers&gt;
</div><p id="nr9ut0_435"><span class="control" id="nr9ut0_443">Warning:</span> Make sure that the path to the error response file does not overlap with static file handler paths.</p><p id="nr9ut0_436">Each <code class="code" id="nr9ut0_444">file</code> entry indicates a static file that should be served in place of the generic error response. The <code class="code" id="nr9ut0_445">error-code</code> indicates which error code should cause the associated file to be served. Supported error codes are as follows:</p><ul class="list _bullet" id="nr9ut0_437"><li class="list__item" id="nr9ut0_446"><p id="nr9ut0_449"><code class="code" id="nr9ut0_450">over_quota</code>, which indicates the app has <a href="https://web.archive.org/web/20160424230144/https://cloud.google.com/appengine/docs/quotas" id="nr9ut0_451" data-external="true" rel="noopener noreferrer" target="_blank">exceeded a resource quota</a>;</p></li><li class="list__item" id="nr9ut0_447"><p id="nr9ut0_452"><code class="code" id="nr9ut0_453">dos_api_denial</code>, which is served to any client blocked by your app's <a href="https://web.archive.org/web/20160424230144/https://cloud.google.com/appengine/docs/java/config/dos" id="nr9ut0_454" data-external="true" rel="noopener noreferrer" target="_blank">DoS Protection configuration</a>;</p></li><li class="list__item" id="nr9ut0_448"><p id="nr9ut0_455"><code class="code" id="nr9ut0_456">timeout</code>, served if a deadline is reached before there is a response from your app.</p></li></ul><p id="nr9ut0_438">The <code class="code" id="nr9ut0_457">error-code</code> is optional; if it's not specified, the given file is the default error response for your app.</p><p id="nr9ut0_439">You can optionally specify a <code class="code" id="nr9ut0_458">mime-type</code> to use when serving the custom error. See <a href="https://web.archive.org/web/20160424230144/http://www.iana.org/assignments/media-types/" id="nr9ut0_459" data-external="true" rel="noopener noreferrer" target="_blank">http://www.iana.org/assignments/media-types/</a> for a complete list of MIME types.</p></section><section class="chapter"><h2 id="using-concurrent-requests" data-toc="using-concurrent-requests">Using concurrent requests</h2><p id="nr9ut0_460">When the <code class="code" id="nr9ut0_463">threadsafe</code> element in <code class="code" id="nr9ut0_464">appengine-web.xml</code> is <code class="code" id="nr9ut0_465">false</code>, App Engine sends requests serially to a given web server. When the value is <code class="code" id="nr9ut0_466">true</code>, App Engine can send multiple requests in parallel:</p><div class="code-block" data-lang="none">
&lt;threadsafe&gt;true&lt;/threadsafe&gt;
</div><p id="nr9ut0_462"><span class="control" id="nr9ut0_467">Note:</span> If you wish to use concurrent requests, your application code needs to use proper thread synchronization before you enable <code class="code" id="nr9ut0_468">threadsafe</code>.</p></section><section class="chapter"><h2 id="auto-id-policy" data-toc="auto-id-policy">Auto ID policy</h2><p id="nr9ut0_469">If you are <a href="https://web.archive.org/web/20160424230144/https://cloud.google.com/appengine/docs/java/datastore/entities#Java_Assigning_identifiers" id="nr9ut0_471" data-external="true" rel="noopener noreferrer" target="_blank">setting entity identifiers automatically</a>, you can change the method employed by setting the auto ID policy. You can choose default (default is also applied if you specify nothing) or legacy. Please note however that the legacy option will be deprecated in a future release and will eventually be removed. For more information, see <a href="https://web.archive.org/web/20160424230144/http://googlecloudplatform.blogspot.com/2013/05/update-on-datastore-auto-ids.html" id="nr9ut0_472" data-external="true" rel="noopener noreferrer" target="_blank">our blog post</a> where we announced the change.</p><div class="code-block" data-lang="none">
&lt;auto-id-policy&gt;
  default
&lt;/auto-id-policy&gt;
</div></section><section class="chapter"><h2 id="urlfetch-timeout" data-toc="urlfetch-timeout">URLFetch timeout</h2><p id="nr9ut0_473">You can set a deadline for each <a href="https://web.archive.org/web/20160424230144/https://cloud.google.com/appengine/docs/java/urlfetch/#Java_Making_requests" id="nr9ut0_475" data-external="true" rel="noopener noreferrer" target="_blank">URLFetch</a> request. By default, the deadline for a fetch is 5 seconds. You can change this default by including the following setting in your <code class="code" id="nr9ut0_476">appengine-web.xml</code> configuration file. Specify the timeout in seconds:</p><div class="code-block" data-lang="none">
&lt;system-properties&gt;
    &lt;property name=&quot;appengine.api.urlfetch.defaultDeadline&quot; value=&quot;10&quot;/&gt;
&lt;/system-properties&gt;
</div></section><div class="last-modified">10 April 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="integrating-with-google-analytics.html" class="navigation-links__prev">Integrating with Google Analytics</a><a href="dos-protection-service-for-java.html" class="navigation-links__next">DoS Protection Service for Java</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>