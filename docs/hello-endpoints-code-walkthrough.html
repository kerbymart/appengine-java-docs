<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-13T01:56:44.023954076"><title>Hello Endpoints Code Walkthrough | Google App Engine Java Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"imports","level":0,"title":"Imports","anchor":"#imports"},{"id":"api-definition-configuration-using-api","level":0,"title":"API definition (configuration) using @Api","anchor":"#api-definition-configuration-using-api"},{"id":"a-simple-get","level":0,"title":"A simple GET","anchor":"#a-simple-get"},{"id":"a-simple-post","level":0,"title":"A simple POST","anchor":"#a-simple-post"},{"id":"oauth-protecting-a-method","level":0,"title":"OAuth Protecting a method","anchor":"#oauth-protecting-a-method"},{"id":"done-with-the-tutorial-what-s-next","level":0,"title":"Done with the tutorial: what\u0027s next?","anchor":"#done-with-the-tutorial-what-s-next"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Hello Endpoints Code Walkthrough | Google App Engine Java Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Google App Engine Java Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/hello-endpoints-code-walkthrough.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Hello Endpoints Code Walkthrough | Google App Engine Java Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/hello-endpoints-code-walkthrough.html#webpage",
    "url": "writerside-documentation/hello-endpoints-code-walkthrough.html",
    "name": "Hello Endpoints Code Walkthrough | Google App Engine Java Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Google App Engine Java Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Hello-Endpoints-Code-Walkthrough" data-main-title="Hello Endpoints Code Walkthrough" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Guides.md|Guides///Mobile-Backends.md|Mobile Backends///Google-Cloud-Endpoints.md|Google Cloud Endpoints///Getting-Started-Cloud-Endpoints.md|Getting Started///Backend-API-Tutorial-Cloud-Endpoints.md|Backend API Tutorial"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Google App Engine Java Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Hello-Endpoints-Code-Walkthrough" id="Hello-Endpoints-Code-Walkthrough.md">Hello Endpoints Code Walkthrough</h1><ol class="list _decimal" id="o3rwbr_3" type="1"><li class="list__item" id="o3rwbr_12"><p id="o3rwbr_18"><a href="#imports" id="o3rwbr_19" data-tooltip="Here are the imports for Greetings.java:">Imports</a></p></li><li class="list__item" id="o3rwbr_13"><p id="o3rwbr_20"><span id="o3rwbr_21">API definition (configuration) using @Api</span></p></li><li class="list__item" id="o3rwbr_14"><p id="o3rwbr_22"><span id="o3rwbr_23">A simple GET</span></p></li><li class="list__item" id="o3rwbr_15"><p id="o3rwbr_24"><span id="o3rwbr_25">A simple POST</span></p></li><li class="list__item" id="o3rwbr_16"><p id="o3rwbr_26"><span id="o3rwbr_27">OAuth Protecting a method</span></p></li><li class="list__item" id="o3rwbr_17"><p id="o3rwbr_28"><span id="o3rwbr_29">Done with the tutorial: what's next?</span></p></li></ol><p id="o3rwbr_4">In this part of the tutorial, we'll look at the code you'll need to add in your own backend API, using the <span class="emphasis" id="o3rwbr_30">Hello Endpoints</span> code to illustrate. The backend API is defined in the class file <code class="code" id="o3rwbr_31">helloendpoints/src/main/java/com/google/appengine/samples/helloendpoints/Greetings.java</code>.</p><p id="o3rwbr_5">In this sample, the backend API is implemented as a plain Java object, inheriting from <code class="code" id="o3rwbr_32">Object</code>. However, it can be part of a more complex class hierarchy if you want. (For backend APIs implemented in multiple classes, see <a href="https://web.archive.org/web/20160424230434/https://cloud.google.com/appengine/docs/java/endpoints/multiclass" id="o3rwbr_33" data-external="true" rel="noopener noreferrer" target="_blank">Multiclass APIs</a>).</p><section class="chapter"><h2 id="imports" data-toc="imports">Imports</h2><p id="o3rwbr_34">Here are the imports for <code class="code" id="o3rwbr_40">Greetings.java</code>:</p><p id="o3rwbr_35"><a href="https://web.archive.org/web/20160424230434/https://github.com/GoogleCloudPlatform/appengine-endpoints-helloendpoints-java-maven/blob/master/src/main/java/com/example/helloendpoints/Greetings.java" id="o3rwbr_41" data-external="true" rel="noopener noreferrer" target="_blank">src/main/java/com/example/helloendpoints/Greetings.java</a></p><p id="o3rwbr_36"><a href="https://web.archive.org/web/20160424230434/https://github.com/GoogleCloudPlatform/appengine-endpoints-helloendpoints-java-maven/blob/master/src/main/java/com/example/helloendpoints/Greetings.java" id="o3rwbr_42" data-external="true" rel="noopener noreferrer" target="_blank">View on GitHub</a></p><p id="o3rwbr_37">\[This section requires a browser that supports JavaScript and iframes.\]</p><p id="o3rwbr_38">You must always import <code class="code" id="o3rwbr_43">com.google.api.server.spi.config.Api</code> because you must always annotate your API class with <a href="https://web.archive.org/web/20160424230434/https://cloud.google.com/appengine/docs/java/endpoints/javadoc/com/google/api/server/spi/config/Api" id="o3rwbr_44" data-external="true" rel="noopener noreferrer" target="_blank">@Api</a>, as shown in the snippet. In this sample, we also import <code class="code" id="o3rwbr_45">com.google.api.server.spi.config.ApiMethod</code> because we want to illustrate its use in changing the name of a method, but this is optional; all public methods of the class with the <code class="code" id="o3rwbr_46">@Api</code> annotation are automatically exposed in the backend API.</p><p id="o3rwbr_39">We import <code class="code" id="o3rwbr_47">com.google.appengine.api.users.User</code> because we have a method protected by OAuth, and this import is required for that. We also import <code class="code" id="o3rwbr_48">import javax.inject.Named</code> because we need it for our request parameters.</p></section><section class="chapter"><h2 id="api-definition-configuration-using-api" data-toc="api-definition-configuration-using-api">API definition (configuration) using <code class="code" id="o3rwbr_59">@Api</code></h2><p id="o3rwbr_50">Let's look at the <code class="code" id="o3rwbr_60">@Api</code> annotation in <code class="code" id="o3rwbr_61">Greetings.java</code>:</p><p id="o3rwbr_51"><a href="https://web.archive.org/web/20160424230434/https://github.com/GoogleCloudPlatform/appengine-endpoints-helloendpoints-java-maven/blob/master/src/main/java/com/example/helloendpoints/Greetings.java" id="o3rwbr_62" data-external="true" rel="noopener noreferrer" target="_blank">src/main/java/com/example/helloendpoints/Greetings.java</a></p><p id="o3rwbr_52"><a href="https://web.archive.org/web/20160424230434/https://github.com/GoogleCloudPlatform/appengine-endpoints-helloendpoints-java-maven/blob/master/src/main/java/com/example/helloendpoints/Greetings.java" id="o3rwbr_63" data-external="true" rel="noopener noreferrer" target="_blank">View on GitHub</a></p><p id="o3rwbr_53">\[This section requires a browser that supports JavaScript and iframes.\]</p><p id="o3rwbr_54">This API is implemented in the single class called <code class="code" id="o3rwbr_64">Greetings</code>, with the API <code class="code" id="o3rwbr_65">name</code> and <code class="code" id="o3rwbr_66">version</code> always required. If you need to create an API that exposes multiple classes, you must use the same <code class="code" id="o3rwbr_67">@Api</code> annotation for each class. (The <code class="code" id="o3rwbr_68">name</code> and <code class="code" id="o3rwbr_69">version</code> would have to be identical for each class). For details on the attributes available, see <a href="https://web.archive.org/web/20160424230434/https://cloud.google.com/appengine/docs/java/endpoints/annotations#api_api-scoped_annotations" id="o3rwbr_70" data-external="true" rel="noopener noreferrer" target="_blank">@Api: API-Scoped Annotations</a> or the Javadoc for <a href="https://web.archive.org/web/20160424230434/https://cloud.google.com/appengine/docs/java/endpoints/javadoc/com/google/api/server/spi/config/Api" id="o3rwbr_71" data-external="true" rel="noopener noreferrer" target="_blank">@Api</a>.</p><p id="o3rwbr_55">The sample protects a method by OAuth, which means that the <code class="code" id="o3rwbr_72">scopes</code> attribute is required; this must be set to the value <code class="code" id="o3rwbr_73">https://www.googleapis.com/auth/userinfo.email</code>, which is what <code class="code" id="o3rwbr_74">Constants.EMAIL_SCOPE</code> resolves to. (This scope lets OAuth work with Google Accounts.)</p><p id="o3rwbr_56">Also, because of the OAuth protection, we must supply a list of clients allowed to access the protected method in the <code class="code" id="o3rwbr_75">clientIDs</code> attribute. The sample suggests one way to do this, with lists of client IDs in the <code class="code" id="o3rwbr_76">Constants.java</code> file. So far, we have supplied a valid web client ID via <code class="code" id="o3rwbr_77">Constants.java</code>, but we have dummy values for Android and iOS clients to show that this client ID list could contain all the supported clients. Only clients in this list can access the protected method.</p><p id="o3rwbr_57">The <code class="code" id="o3rwbr_78">audiences</code> attribute is set to the backend API's web client. This attribute must be set if there are any Android clients; it is not used for non-Android clients.</p><p id="o3rwbr_58">Inside the class, notice the lines that set up an <code class="code" id="o3rwbr_79">ArrayList</code> of stored <code class="code" id="o3rwbr_80">HelloGreeting</code> (defined in <code class="code" id="o3rwbr_81">HelloGreeting.java</code>) <a href="https://web.archive.org/web/20160424230434/http://stackoverflow.com/questions/3295496/what-is-a-javabean-exactly" id="o3rwbr_82" data-external="true" rel="noopener noreferrer" target="_blank">JavaBean</a> objects that are returned from the methods. In Endpoints, methods can only return Objects (treated as JavaBean objects) or a collection of Objects, which are converted to JSON to form the response.</p></section><section class="chapter"><h2 id="a-simple-get" data-toc="a-simple-get">A simple GET</h2><p id="o3rwbr_83">The following lines return text greetings. Both <code class="code" id="o3rwbr_91">getGreeting</code> and <code class="code" id="o3rwbr_92">listGreeting</code> are public, so they will be exposed in the backend API:</p><p id="o3rwbr_84"><a href="https://web.archive.org/web/20160424230434/https://github.com/GoogleCloudPlatform/appengine-endpoints-helloendpoints-java-maven/blob/master/src/main/java/com/example/helloendpoints/Greetings.java" id="o3rwbr_93" data-external="true" rel="noopener noreferrer" target="_blank">src/main/java/com/example/helloendpoints/Greetings.java</a></p><p id="o3rwbr_85"><a href="https://web.archive.org/web/20160424230434/https://github.com/GoogleCloudPlatform/appengine-endpoints-helloendpoints-java-maven/blob/master/src/main/java/com/example/helloendpoints/Greetings.java" id="o3rwbr_94" data-external="true" rel="noopener noreferrer" target="_blank">View on GitHub</a></p><p id="o3rwbr_86">\[This section requires a browser that supports JavaScript and iframes.\]</p><p id="o3rwbr_87">The <code class="code" id="o3rwbr_95">getGreeting</code> method serves an incoming GET request that has a numeric value indicating the user's choice of greeting:</p><ul class="list _bullet" id="o3rwbr_88"><li class="list__item" id="o3rwbr_96"><p id="o3rwbr_98">A value of <code class="code" id="o3rwbr_99">0</code> returning the first value, <code class="code" id="o3rwbr_100">hello world!</code>.</p></li><li class="list__item" id="o3rwbr_97"><p id="o3rwbr_101">A value of <code class="code" id="o3rwbr_102">1</code> returning the second value, <code class="code" id="o3rwbr_103">goodbye world!</code>.</p></li></ul><p id="o3rwbr_89">All other values will return an error. Notice that the <code class="code" id="o3rwbr_104">@Named</code> attribute must be used for the incoming parameter since it is not an entity type.</p><p id="o3rwbr_90">The <code class="code" id="o3rwbr_105">listGreeting</code> method returns all the stored greetings in the array list.</p></section><section class="chapter"><h2 id="a-simple-post" data-toc="a-simple-post">A simple POST</h2><p id="o3rwbr_106">The following lines of code handle an incoming POST request containing a user-supplied greeting and integer, and returns the greeting repeated the number of times specified by the integer:</p><p id="o3rwbr_107"><a href="https://web.archive.org/web/20160424230434/https://github.com/GoogleCloudPlatform/appengine-endpoints-helloendpoints-java-maven/blob/master/src/main/java/com/example/helloendpoints/Greetings.java" id="o3rwbr_112" data-external="true" rel="noopener noreferrer" target="_blank">src/main/java/com/example/helloendpoints/Greetings.java</a></p><p id="o3rwbr_108"><a href="https://web.archive.org/web/20160424230434/https://github.com/GoogleCloudPlatform/appengine-endpoints-helloendpoints-java-maven/blob/master/src/main/java/com/example/helloendpoints/Greetings.java" id="o3rwbr_113" data-external="true" rel="noopener noreferrer" target="_blank">View on GitHub</a></p><p id="o3rwbr_109">\[This section requires a browser that supports JavaScript and iframes.\]</p><p id="o3rwbr_110">This method is annotated by <code class="code" id="o3rwbr_114">@ApiMethod</code> so we can override the default name that is generated by Endpoints. Notice that Endpoints prepends the class name (<code class="code" id="o3rwbr_115">greetings</code>, lowercase) to the method name when it generates the method name in the backend API: <code class="code" id="o3rwbr_116">greetings.insertGreeting</code>. When we override this value using the method annotation, the prepending does not take place, so we need to add the class prepending manually in our code: <code class="code" id="o3rwbr_117">greetings.multiply</code> to make it consistent with the other backend API method names.</p><p id="o3rwbr_111">The method annotation can perform other API overrides as well; for more details, see <a href="https://web.archive.org/web/20160424230434/https://cloud.google.com/appengine/docs/java/endpoints/annotations#apimethod_method-scoped_annotations" id="o3rwbr_118" data-external="true" rel="noopener noreferrer" target="_blank">@ApiMethod: Method-Scoped Annotations</a>.</p></section><section class="chapter"><h2 id="oauth-protecting-a-method" data-toc="oauth-protecting-a-method">OAuth Protecting a method</h2><p id="o3rwbr_119">Any client can access your Endpoints API methods unless you protect them with OAuth 2.0. In some scenarios, you may want to restrict access to some or all of the API methods.</p><p id="o3rwbr_120">To protect a method in the backend API, you need to do the following:</p><ul class="list _bullet" id="o3rwbr_121"><li class="list__item" id="o3rwbr_128"><p id="o3rwbr_130">Add required support in the <span id="o3rwbr_132">@Api annotation</span> as described above:</p><ul class="list _bullet" id="o3rwbr_131"><li class="list__item" id="o3rwbr_133"><p id="o3rwbr_136">Add <code class="code" id="o3rwbr_137">scopes</code> set to the email scope.</p></li><li class="list__item" id="o3rwbr_134"><p id="o3rwbr_138">Add <code class="code" id="o3rwbr_139">clientIds</code> containing the client whitelist.</p></li><li class="list__item" id="o3rwbr_135"><p id="o3rwbr_140">For Android devices only, specify <code class="code" id="o3rwbr_141">audiences</code>.</p></li></ul></li><li class="list__item" id="o3rwbr_129"><p id="o3rwbr_142">Add a <code class="code" id="o3rwbr_143">User</code> parameter to the method you wish to protect.</p></li></ul><p id="o3rwbr_122">The code you copied already has the required annotations, so look at the code with the added <code class="code" id="o3rwbr_144">User</code> parameter:</p><p id="o3rwbr_123"><a href="https://web.archive.org/web/20160424230434/https://github.com/GoogleCloudPlatform/appengine-endpoints-helloendpoints-java-maven/blob/master/src/main/java/com/example/helloendpoints/Greetings.java" id="o3rwbr_145" data-external="true" rel="noopener noreferrer" target="_blank">src/main/java/com/example/helloendpoints/Greetings.java</a></p><p id="o3rwbr_124"><a href="https://web.archive.org/web/20160424230434/https://github.com/GoogleCloudPlatform/appengine-endpoints-helloendpoints-java-maven/blob/master/src/main/java/com/example/helloendpoints/Greetings.java" id="o3rwbr_146" data-external="true" rel="noopener noreferrer" target="_blank">View on GitHub</a></p><p id="o3rwbr_125">\[This section requires a browser that supports JavaScript and iframes.\]</p><p id="o3rwbr_126">When you declare a parameter of type <code class="code" id="o3rwbr_147">User</code> in your API method as shown in the snippet above, the API backend framework automatically authenticates the user and enforces the authorized <code class="code" id="o3rwbr_148">clientIds</code> whitelist, ultimately by supplying the valid <code class="code" id="o3rwbr_149">User</code> or not.</p><p id="o3rwbr_127">If the request coming in from the client has a valid auth token or is in the list of authorized <code class="code" id="o3rwbr_150">clientIDs</code>, the backend framework supplies a valid User to the parameter. If the incoming request does not have a valid auth token or if the client is not on the <code class="code" id="o3rwbr_151">clientIDs</code> whitelist, the framework sets <code class="code" id="o3rwbr_152">User</code> to <code class="code" id="o3rwbr_153">null</code>. Your own code must handle both the case where <code class="code" id="o3rwbr_154">User</code> is null and the case where there is a valid <code class="code" id="o3rwbr_155">User</code>. If there is no <code class="code" id="o3rwbr_156">User</code>, for example, you could choose to return a not-authenticated error or perform some other desired action.</p></section><section class="chapter"><h2 id="done-with-the-tutorial-what-s-next" data-toc="done-with-the-tutorial-what-s-next">Done with the tutorial: what's next?</h2><p id="o3rwbr_157">Now that you've created your first backend APIs, take a deeper dive into backend API features and configurations, and you may want to hook up other App Engine services to your backend API, such as the Datastore. You can learn more by visiting the following resources:</p><ul class="list _bullet" id="o3rwbr_158"><li class="list__item" id="o3rwbr_159"><p id="o3rwbr_161"><a href="https://web.archive.org/web/20160424230434/https://cloud.google.com/appengine/docs/java/endpoints/annotations" id="o3rwbr_162" data-external="true" rel="noopener noreferrer" target="_blank">Annotating Your Code</a>; which covers all of the API configuration and features.</p></li><li class="list__item" id="o3rwbr_160"><p id="o3rwbr_163">The <a href="https://web.archive.org/web/20160424230434/https://github.com/GoogleCloudPlatform/appengine-endpoints-tictactoe-java" id="o3rwbr_164" data-external="true" rel="noopener noreferrer" target="_blank">Tic-Tac-Toe</a> sample; which shows how to build a backend that uses the Datastore.</p></li></ul></section><div class="last-modified">10 April 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="creating-the-hello-endpoints-complete-sample-backend-api.html" class="navigation-links__prev">Creating the Hello Endpoints Complete Sample Backend API</a><a href="web-client-tutorial.html" class="navigation-links__next">Web Client Tutorial</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>