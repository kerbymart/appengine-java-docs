<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-13T01:56:44.72128647"><title>Documents and Indexes | Google App Engine Java Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"overview","level":0,"title":"Overview","anchor":"#overview"},{"id":"documents-and-fields","level":0,"title":"Documents and fields","anchor":"#documents-and-fields"},{"id":"creating-a-document","level":0,"title":"Creating a document","anchor":"#creating-a-document"},{"id":"working-with-an-index","level":0,"title":"Working with an index","anchor":"#working-with-an-index"},{"id":"index-schemas","level":0,"title":"Index schemas","anchor":"#index-schemas"},{"id":"viewing-indexes-in-the-google-cloud-platform-console","level":0,"title":"Viewing indexes in the Google Cloud Platform Console","anchor":"#viewing-indexes-in-the-google-cloud-platform-console"},{"id":"search-api-quotas","level":0,"title":"Search API quotas","anchor":"#search-api-quotas"},{"id":"search-api-pricing","level":0,"title":"Search API pricing","anchor":"#search-api-pricing"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Documents and Indexes | Google App Engine Java Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Google App Engine Java Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/documents-and-indexes.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Documents and Indexes | Google App Engine Java Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/documents-and-indexes.html#webpage",
    "url": "writerside-documentation/documents-and-indexes.html",
    "name": "Documents and Indexes | Google App Engine Java Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Google App Engine Java Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Documents-and-Indexes" data-main-title="Documents and Indexes" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Guides.md|Guides///Searchable-Document-Indexes.md|Searchable Document Indexes"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Google App Engine Java Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Documents-and-Indexes" id="Documents-and-Indexes.md">Documents and Indexes</h1><p id="bnq0so_3"><a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/python/search/" id="bnq0so_18" data-tooltip="View this page in the Python runtime" data-external="true" rel="noopener noreferrer" target="_blank">Python</a> |Java |PHP |<a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/go/search/" id="bnq0so_19" data-tooltip="View this page in the Go runtime" data-external="true" rel="noopener noreferrer" target="_blank">Go</a></p><p id="bnq0so_4"><a href="https://web.archive.org/web/20160425050508/http://stackoverflow.com/questions/tagged/google-app-engine+search" id="bnq0so_20" data-external="true" rel="noopener noreferrer" target="_blank"><figure id="bnq0so_21"><img alt="Stack overflow questions" src="https://web.archive.org/web/20160425050508im_/https://cloud.google.com/cloud/images/stack_overflow_questions.png" title="Stack Overflow Questions" width="240" height="53"></figure></a></p><p id="bnq0so_5"><a href="https://web.archive.org/web/20160425050508/http://stackoverflow.com/feeds/tag?sort=votes&amp;tagnames=google-app-engine%2Bsearch" id="bnq0so_22" data-external="true" rel="noopener noreferrer" target="_blank">https://web.archive.org/web/20160425050508/http://stackoverflow.com/feeds/tag?sort=votes&amp;tagnames=google-app-engine%2Bsearch</a></p><p id="bnq0so_6"></p><p id="bnq0so_7"><a href="https://web.archive.org/web/20160425050508/http://stackoverflow.com/questions/tagged/google-app-engine+search?sort=votes" id="bnq0so_23" data-external="true" rel="noopener noreferrer" target="_blank">See more...</a></p><p id="bnq0so_8">The Search API provides a model for indexing documents that contain structured data. You can search an index, and organize and present search results. The API supports full text matching on string fields. Documents and indexes are saved in a separate persistent store optimized for search operations. The Search API can index any number of documents. The App Engine Datastore may be more appropriate for applications that need to retrieve very large result sets.</p><ol class="list _decimal" id="bnq0so_9" type="1"><li class="list__item" id="bnq0so_24"><p id="bnq0so_32"><span id="bnq0so_33">Overview</span></p></li><li class="list__item" id="bnq0so_25"><p id="bnq0so_34"><span id="bnq0so_35">Documents and fields</span></p></li><li class="list__item" id="bnq0so_26"><p id="bnq0so_36"><span id="bnq0so_37">Creating a document</span></p></li><li class="list__item" id="bnq0so_27"><p id="bnq0so_38"><span id="bnq0so_40">Working with an index</span></p><ul class="list _bullet" id="bnq0so_39"><li class="list__item" id="bnq0so_41"><p id="bnq0so_47"><span id="bnq0so_48">Putting documents in an index</span></p></li><li class="list__item" id="bnq0so_42"><p id="bnq0so_49"><span id="bnq0so_50">Retrieving documents by doc_id</span></p></li><li class="list__item" id="bnq0so_43"><p id="bnq0so_51"><span id="bnq0so_52">Searching for documents by their contents</span></p></li><li class="list__item" id="bnq0so_44"><p id="bnq0so_53"><span id="bnq0so_54">Deleting documents from an index</span></p></li><li class="list__item" id="bnq0so_45"><p id="bnq0so_55"><span id="bnq0so_56">Eventual consistency</span></p></li><li class="list__item" id="bnq0so_46"><p id="bnq0so_57"><span id="bnq0so_58">Determining the size of an index</span></p></li></ul></li><li class="list__item" id="bnq0so_28"><p id="bnq0so_59"><span id="bnq0so_60">Index schemas</span></p></li><li class="list__item" id="bnq0so_29"><p id="bnq0so_61"><span id="bnq0so_62">Viewing indexes in the Google Cloud Platform Console</span></p></li><li class="list__item" id="bnq0so_30"><p id="bnq0so_63"><span id="bnq0so_64">Search API quotas</span></p></li><li class="list__item" id="bnq0so_31"><p id="bnq0so_65"><span id="bnq0so_66">Search API pricing</span></p></li></ol><section class="chapter"><h2 id="overview" data-toc="overview">Overview</h2><p id="bnq0so_67">The Search API is based on four main concepts: documents, indexes, queries, and results.</p><section class="chapter"><h3 id="documents" data-toc="documents">Documents</h3><p id="bnq0so_73">A document is an object with a unique ID and a list of fields containing user data. Each field has a name and a type. There are several types of fields, identified by the kinds of values they contain:</p><ul class="list _bullet" id="bnq0so_74"><li class="list__item" id="bnq0so_76"><p id="bnq0so_82">Atom Field - an indivisible character string</p></li><li class="list__item" id="bnq0so_77"><p id="bnq0so_83">Text Field - a plain text string that can be searched word by word</p></li><li class="list__item" id="bnq0so_78"><p id="bnq0so_84">HTML Field - a string that contains HTML markup tags, only the text outside the markup tags can be searched</p></li><li class="list__item" id="bnq0so_79"><p id="bnq0so_85">Number Field - a floating point number</p></li><li class="list__item" id="bnq0so_80"><p id="bnq0so_86">Date Field - a date object</p></li><li class="list__item" id="bnq0so_81"><p id="bnq0so_87">Geopoint Field - a data object with latitude and longitude coordinates</p></li></ul><p id="bnq0so_75">The maximum size of a document is 1 MB.</p></section><section class="chapter"><h3 id="indexes" data-toc="indexes">Indexes</h3><p id="bnq0so_88">An index stores documents for retrieval. You can retrieve a single document by its ID, a range of documents with consecutive IDs, or all the documents in an index. You can also search an index to retrieve documents that satisfy given criteria on fields and their values, specified as a query string. You can manage groups of documents by putting them into separate indexes.</p><p id="bnq0so_89">There is no limit to the number of documents in an index or the number of indexes you can use. The total size of all the documents in a single index is limited to 10GB by default but may be increased to up to 200GB by <a href="https://web.archive.org/web/20160425050508/https://support.google.com/cloud/contact/cloud_search_api_index_size_increase_request_form" id="bnq0so_90" data-external="true" rel="noopener noreferrer" target="_blank">submitting a request</a>.</p></section><section class="chapter"><h3 id="queries" data-toc="queries">Queries</h3><p id="bnq0so_91">To search an index, you construct a query, which has a query string and possibly some additional options. A query string specifies conditions for the values of one or more document fields. When you search an index you get back only those documents in the index with fields that satisfy the query.</p><p id="bnq0so_92">The simplest query, sometimes called a &quot;global search&quot; is a string that contains only field values. This search uses a string that searches for documents that contain the words &quot;rose&quot; and &quot;water&quot;:</p><div class="code-block" data-lang="none">
index.search(&quot;rose water&quot;);
</div><p id="bnq0so_94">This one searches for documents with date fields that contain the date July 4, 1776, or text fields that include the string &quot;1776-07-04&quot;:</p><div class="code-block" data-lang="none">
index.search(&quot;1776-07-04&quot;);
</div><p id="bnq0so_96">A query string can also be more specific. It can contain one or more terms, each naming a field and a constraint on the field's value. The exact form of a term depends on the type of the field. For instance, assuming there is a text field called &quot;product&quot;, and a number field called &quot;price&quot;, here's a query string with two terms:</p><div class="code-block" data-lang="none">
// search for documents with pianos that cost less than $5000
index.search(&quot;product = piano AND price &lt; 5000&quot;);
</div><p id="bnq0so_98">Query options, as the name implies, are not required. They enable a variety of features:</p><ul class="list _bullet" id="bnq0so_99"><li class="list__item" id="bnq0so_100"><p id="bnq0so_105">Control how many documents are returned in the search results.</p></li><li class="list__item" id="bnq0so_101"><p id="bnq0so_106">Specify what document fields to include in the results. The default is to include all the fields from the original document. You can specify that the results only include a subset of fields (the original document is not affected).</p></li><li class="list__item" id="bnq0so_102"><p id="bnq0so_107">Sort the results.</p></li><li class="list__item" id="bnq0so_103"><p id="bnq0so_108">Create &quot;computed fields&quot; for documents using <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/search/options#Java_Writing_expressions" id="bnq0so_109" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_111">FieldExpressions</code></a> and abridged text fields using <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/search/options#Java_Snippets" id="bnq0so_110" data-external="true" rel="noopener noreferrer" target="_blank">snippets</a>.</p></li><li class="list__item" id="bnq0so_104"><p id="bnq0so_112">Support paging through the search results by returning only a portion of the matched documents on each query (using offsets and cursors)</p></li></ul></section><section class="chapter"><h3 id="search-results" data-toc="search-results">Search results</h3><p id="bnq0so_113">A call to <code class="code" id="bnq0so_114">search()</code> can only return a limited number of matching documents. Your search may find more documents than can be returned in a single call. Each search call returns an instance of the <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Results" id="bnq0so_115" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_118">Results</code></a> class, which contains information about how many documents were found and how many were returned, along with the list of returned documents. You can repeat the same search, using <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/search/results#Java_Using_cursors" id="bnq0so_116" data-external="true" rel="noopener noreferrer" target="_blank">cursors</a> or <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/search/results#Java_Using_offsets" id="bnq0so_117" data-external="true" rel="noopener noreferrer" target="_blank">offsets</a> to retrieve the complete set of matching documents.</p></section><section class="chapter"><h3 id="additional-training-material" data-toc="additional-training-material">Additional training material</h3><p id="bnq0so_119">In addition to this documentation, you can read the <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/training/fts_intro/" id="bnq0so_120" data-external="true" rel="noopener noreferrer" target="_blank">two-part training class</a> on the Search API at the Google Developer's Academy. (Although the class uses the Python API, you may find the additional discussion of the Search concepts useful.)</p></section></section><section class="chapter"><h2 id="documents-and-fields" data-toc="documents-and-fields">Documents and fields</h2><p id="bnq0so_121">The <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Document" id="bnq0so_127" data-external="true" rel="noopener noreferrer" target="_blank">Document</a> class represents documents. Each document has a <span class="emphasis" id="bnq0so_128">document identifier</span> and a list of <span class="emphasis" id="bnq0so_129">fields</span>.</p><section class="chapter"><h3 id="document-identifier" data-toc="document-identifier">Document identifier</h3><p id="bnq0so_130">Every document in an index must have a unique document identifier, or <code class="code" id="bnq0so_132">doc_id</code>. The identifier can be used to retrieve a document from an index without performing a search. By default, the Search API automatically generates a <code class="code" id="bnq0so_133">doc_id</code> when a document is created. You can also specify the <code class="code" id="bnq0so_134">doc_id</code> yourself when you create a document. A <code class="code" id="bnq0so_135">doc_id</code> must contain only visible, printable ASCII characters (ASCII codes 33 through 126 inclusive) and be no longer than 500 characters. A document identifier cannot begin with an exclamation point ('!'), and it can't begin and end with double underscores (&quot;__&quot;).</p><p id="bnq0so_131">While it is convenient to create readable, meaningful unique document identifiers, you cannot include the <code class="code" id="bnq0so_136">doc_id</code> in a search. Consider this scenario: You have an index with documents that represent parts, using the part's serial number as the <code class="code" id="bnq0so_137">doc_id</code>. It will be very efficient to retrieve the document for any single part, but it will be impossible to search for a range of serial numbers along with other field values, such as purchase date. Storing the serial number in an atom field solves the problem.</p></section><section class="chapter"><h3 id="document-fields" data-toc="document-fields">Document fields</h3><p id="bnq0so_138">A document contains fields that have a <span class="emphasis" id="bnq0so_142">name</span>, a <span class="emphasis" id="bnq0so_143">type</span>, and a single <span class="emphasis" id="bnq0so_144">value</span> of that type. Two or more fields can have the same name, but different types. For instance, you can define two fields with the name &quot;age&quot;: one with a text type (the value &quot;twenty-two&quot;), the other with a number type (value 22).</p><section class="chapter"><h4 id="field-names" data-toc="field-names">Field names</h4><p id="bnq0so_145">Field names are case sensitive and can only contain ASCII characters. They must start with a letter and can contain letters, digits, or underscore. A field name cannot be longer than 500 characters.</p></section><section class="chapter"><h4 id="multi-valued-fields" data-toc="multi-valued-fields">Multi-valued fields</h4><p id="bnq0so_146">A field can contain only one value, which must match the field's type. Field names do not have to be unique. A document can have multiple fields with the same name and same type, which is a way to represent a field with multiple values. (However, date and number fields with the same name can't be repeated.) A document can also contain multiple fields with the same name and <span class="emphasis" id="bnq0so_147">different</span> field types.</p></section><section class="chapter"><h4 id="field-types" data-toc="field-types">Field types</h4><p id="bnq0so_148">There are three kinds of fields that store <code class="code" id="bnq0so_153">java.lang.String</code> character strings; collectively we refer to them as <span class="emphasis" id="bnq0so_154">string fields</span>:</p><ul class="list _bullet" id="bnq0so_149"><li class="list__item" id="bnq0so_155"><p id="bnq0so_158">Text Field: A string with maximum length 1024**2 characters.</p></li><li class="list__item" id="bnq0so_156"><p id="bnq0so_159">HTML Field: An HTML-formatted string with maximum length 1024**2 characters.</p></li><li class="list__item" id="bnq0so_157"><p id="bnq0so_160">Atom Field: A string with maximum length 500 characters.</p></li></ul><p id="bnq0so_150">There are also three field types that store non-textual data:</p><ul class="list _bullet" id="bnq0so_151"><li class="list__item" id="bnq0so_161"><p id="bnq0so_164">Number Field: A double precision floating point value between -2,147,483,647 and 2,147,483,647.</p></li><li class="list__item" id="bnq0so_162"><p id="bnq0so_165">Date Field: A <code class="code" id="bnq0so_166">java.util.Date</code>.</p></li><li class="list__item" id="bnq0so_163"><p id="bnq0so_167">Geopoint Field: A point on earth described by latitude and longitude coordinates</p></li></ul><p id="bnq0so_152">The field types are specified using the <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Field.FieldType" id="bnq0so_168" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_175">Field.FieldType</code></a> enums <code class="code" id="bnq0so_169">TEXT</code>, <code class="code" id="bnq0so_170">HTML</code>, <code class="code" id="bnq0so_171">ATOM</code>, <code class="code" id="bnq0so_172">NUMBER</code>, <code class="code" id="bnq0so_173">DATE</code>, and <code class="code" id="bnq0so_174">GEO_POINT</code>.</p></section></section><section class="chapter"><h3 id="special-treatment-of-string-and-date-fields" data-toc="special-treatment-of-string-and-date-fields">Special treatment of string and date fields</h3><p id="bnq0so_176">When a document with date, text, or HTML fields is added to an index, some special handling occurs. It's helpful to understand what's going on &quot;under the hood&quot; in order to use the Search API effectively.</p><section class="chapter"><h4 id="tokenizing-string-fields" data-toc="tokenizing-string-fields">Tokenizing string fields</h4><p id="bnq0so_179">When an HTML or text field is indexed, its contents are <span class="emphasis" id="bnq0so_184">tokenized</span>. The string is split into tokens wherever whitespace or special characters (punctuation marks, hash sign, etc.) appear. The index will include an entry for each token. This enables you to search for keywords and phrases comprising only part of a field's value. For instance, a search for &quot;dark&quot; will match a document with a text field containing the string &quot;it was a dark and stormy night&quot;, and a search for &quot;time&quot; will match a document with a text field containing the string &quot;this is a real-time system&quot;.</p><p id="bnq0so_180">In HTML fields, text within markup tags is not tokenized, so a document with an HTML field containing &quot;it was a &lt;strong&gt;dark&lt;/strong&gt; night&quot; will match a search for &quot;night&quot;, but not for &quot;strong&quot;. If you want to be able to search markup text, store it in a text field.</p><p id="bnq0so_181">Atom fields are not tokenized. A document with an atom field that has the value &quot;bad weather&quot; will only match a search for the entire string &quot;bad weather&quot;. It will not match a search for &quot;bad&quot; or &quot;weather&quot; alone.</p><section class="chapter"><h5 id="tokenizing-rules" data-toc="tokenizing-rules">Tokenizing Rules</h5><ul class="list _bullet" id="bnq0so_185"><li class="list__item" id="bnq0so_191"><p id="bnq0so_194">The underscore (_) and ampersand (&amp;) characters do not break words into tokens.</p></li><li class="list__item" id="bnq0so_192"><p id="bnq0so_195">These whitespace characters always break words into tokens: space, carriage return, line feed, horizontal tab, vertical tab, form feed, and NULL.</p></li><li class="list__item" id="bnq0so_193"><p id="bnq0so_196">These characters are treated as punctuation, and will break words into tokens:</p></li></ul><div class="table-wrapper"><table class="wide" id="bnq0so_186"><thead><tr class="ijRowHead" id="bnq0so_197"><th id="bnq0so_202"><p>!</p></th><th id="bnq0so_203"><p>&quot;</p></th><th id="bnq0so_204"><p>%</p></th><th id="bnq0so_205"><p>(</p></th><th id="bnq0so_206"><p>)</p></th></tr></thead><tbody><tr id="bnq0so_198"><td id="bnq0so_207"><p>*</p></td><td id="bnq0so_208"><p>,</p></td><td id="bnq0so_209"><p>-</p></td><td id="bnq0so_210"><p>|</p></td><td id="bnq0so_211"><p>/</p></td></tr><tr id="bnq0so_199"><td id="bnq0so_212"><p>[</p></td><td id="bnq0so_213"><p>]</p></td><td id="bnq0so_214"><p>]</p></td><td id="bnq0so_215"><p>^</p></td><td id="bnq0so_216"><p>`</p></td></tr><tr id="bnq0so_200"><td id="bnq0so_217"><p>:</p></td><td id="bnq0so_218"><p>=</p></td><td id="bnq0so_219"><p>&gt;</p></td><td id="bnq0so_220"><p>?</p></td><td id="bnq0so_221"><p>@</p></td></tr><tr id="bnq0so_201"><td id="bnq0so_222"><p>{</p></td><td id="bnq0so_223"><p>}</p></td><td id="bnq0so_224"><p>~</p></td><td id="bnq0so_225"><p>$</p></td><td id="bnq0so_226"></td></tr></tbody></table></div><ul class="list _bullet" id="bnq0so_187"><li class="list__item" id="bnq0so_227"><p id="bnq0so_228">The characters in the following table <span class="emphasis" id="bnq0so_229">usually</span> break words into tokens, but they can be handled differently depending on the context in which they appear:</p></li></ul><div class="table-wrapper"><table class="wide" id="bnq0so_188"><thead><tr class="ijRowHead" id="bnq0so_230"><th id="bnq0so_237"><p>Character</p></th><th id="bnq0so_238"><p>Rule</p></th></tr></thead><tbody><tr id="bnq0so_231"><td id="bnq0so_239"><p>&lt;</p></td><td id="bnq0so_240"><p>In an HTML field the &quot;less than&quot; sign indicates the start of an HTML tag which is ignored.</p></td></tr><tr id="bnq0so_232"><td id="bnq0so_241"><p>+</p></td><td id="bnq0so_242"><p>A string of one or more &quot;plus&quot; signs is treated as a part of the word if it appears at the end of the word (C++).</p></td></tr><tr id="bnq0so_233"><td id="bnq0so_243"><p>#</p></td><td id="bnq0so_244"><p>The &quot;hash&quot; sign is treated as a part of the word if it is preceded by a, b, c, d, e, f, g, j, or x (a# - g# are musical notes; j# and x# are programming language, c# is both.) If a term is <em id="bnq0so_245">preceded</em> by '#' (#google), it is treated as a hashtag and the hash becomes part of the word.</p></td></tr><tr id="bnq0so_234"><td id="bnq0so_246"><p>'</p></td><td id="bnq0so_247"><p>Apostrophe is a letter if it precedes the letter &quot;s&quot; followed by a word-break, as in &quot;John's hat&quot;.</p></td></tr><tr id="bnq0so_235"><td id="bnq0so_248"><p>.</p></td><td id="bnq0so_249"><p>If a decimal point appears between digits, this is part of a number (i.e., the decimal-separator). This can also be part of a word if used in an acronym (A.B.C).</p></td></tr><tr id="bnq0so_236"><td id="bnq0so_250"><p>-</p></td><td id="bnq0so_251"><p>The dash is part of a word if used in an acronym (I-B-M).</p></td></tr></tbody></table></div><ul class="list _bullet" id="bnq0so_189"><li class="list__item" id="bnq0so_252"><p id="bnq0so_254">All other 7-bit characters other than letters and digits ('A-Z', 'a-z', '0-9') are handled as punctuation and break words into tokens.</p></li><li class="list__item" id="bnq0so_253"><p id="bnq0so_255">Everything else is parsed as a UTF-8 character.</p></li></ul><p id="bnq0so_190"><span class="control" id="bnq0so_256">Note:</span> Non-western languages, like Japanese and Chinese, use other tokenization rules.</p></section><section class="chapter"><h5 id="acronyms" data-toc="acronyms">Acronyms</h5><p id="bnq0so_257">Tokenization uses special rules to recognize acronyms (strings like &quot;I.B.M.&quot;, &quot;a-b-c&quot;, or &quot;C I A&quot;). An acronym is a string of single alphabetic characters, with the same separator character between all of them. The valid separators are the period, dash, or any number of spaces. The separator character is removed from the string when an acronym is tokenized. So the example strings mentioned above become the tokens &quot;ibm&quot;, &quot;abc&quot;, and &quot;cia&quot;. The original text remains in the document field.</p><p id="bnq0so_258">When dealing with acronyms, note that:</p><ul class="list _bullet" id="bnq0so_259"><li class="list__item" id="bnq0so_260"><p id="bnq0so_263">An acronym cannot contain more than 21 letters. A valid acronym string with more than 21 letters will be broken into a series of acronyms, each 21 letters or less.</p></li><li class="list__item" id="bnq0so_261"><p id="bnq0so_264">If the letters in an acronym are separated by spaces, all the letters must be the same case. Acronyms constructed with period and dash can use mixed case letters.</p></li><li class="list__item" id="bnq0so_262"><p id="bnq0so_265">When searching for an acronym, you can enter the canonical form of the acronym (the string without any separators), or the acronym punctuated with either the dash or the dot (but not both) between its letters. So the text &quot;I.B.M&quot; could be retrieved with any of the search terms &quot;I-B-M&quot;, &quot;I.B.M&quot;, or &quot;IBM&quot;.</p></li></ul></section></section><section class="chapter"><h4 id="date-field-accuracy" data-toc="date-field-accuracy">Date field accuracy</h4><p id="bnq0so_266">When you create a date field in a document you set its value to a <code class="code" id="bnq0so_267">java.util.Date</code>. For the purpose of indexing and searching the date field, any time component is ignored and the date is converted to the number of days since 1/1/1970 UTC. This means that even though a date field can contain a precise time value a date query can only specify a date field value in the form yyyy-mm-dd. This also means the sorted order of date fields with the same date is not well-defined.</p></section></section><section class="chapter"><h3 id="other-document-properties" data-toc="other-document-properties">Other document properties</h3><p id="bnq0so_268">The <span class="emphasis" id="bnq0so_271">rank</span> of a document is a positive integer which determines the default ordering of documents returned from a search. By default, the rank is set at the time the document is created to the number of seconds since January 1, 2011. You can set the rank explicitly when you create a document. (It's a bad idea to assign the same rank to many documents, and you should never give more than 10,000 documents the same rank.) If you specify <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/search/options#Java_SortOptions" id="bnq0so_272" data-external="true" rel="noopener noreferrer" target="_blank">sort options</a>, you can use the rank as a sort key. Note that when rank is used in a <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/search/options#Java_Sorting_on_multiple_keys" id="bnq0so_273" data-external="true" rel="noopener noreferrer" target="_blank">sort expression</a> or <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/search/options#Java_FieldExpressions" id="bnq0so_274" data-external="true" rel="noopener noreferrer" target="_blank">field expression</a> it is referenced as <code class="code" id="bnq0so_275">_rank</code>.</p><p id="bnq0so_269">The locale property specifies the language in which the fields are encoded.</p><p id="bnq0so_270">See the <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Document" id="bnq0so_276" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_277">Document</code></a> class reference page for more details about these attributes.</p></section><section class="chapter"><h3 id="linking-from-a-document-to-other-resources" data-toc="linking-from-a-document-to-other-resources">Linking from a document to other resources</h3><p id="bnq0so_278">You can use a document's <code class="code" id="bnq0so_279">doc_id</code> and other fields as links to other resources in your application. For example, if you use <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/blobstore/" id="bnq0so_280" data-external="true" rel="noopener noreferrer" target="_blank">Blobstore</a> you can associate the document with a specific blob by setting the <code class="code" id="bnq0so_281">doc_id</code> or the value of an Atom field to the BlobKey of the data.</p></section></section><section class="chapter"><h2 id="creating-a-document" data-toc="creating-a-document">Creating a document</h2><p id="bnq0so_282">To create a document, request a new builder using the <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Document#newBuilder()" id="bnq0so_288" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_289">Document.newBuilder()</code></a> method. Once the application has access to a builder, it can specify an optional document identifier and add fields.</p><p id="bnq0so_283">Fields, like documents, are created using a builder. The <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Field#newBuilder()" id="bnq0so_290" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_292">Field.newBuilder()</code></a> method returns a field builder that allows you to specify a field's name and value. The field type is automatically specified by choosing a specific set method. For example, to indicate that a field holds plain text, call <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Field.Builder#setText(java.lang.String)" id="bnq0so_291" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_293">setText()</code></a>. The following code builds a document with fields representing a guestbook greeting.</p><div class="code-block" data-lang="none">
import com.google.appengine.api.search.Document;
import com.google.appengine.api.search.Field;
import com.google.appengine.api.users.User;
import com.google.appengine.api.users.UserServiceFactory;

...

User currentUser = UserServiceFactory.getUserService().getCurrentUser();
String myDocId = &quot;PA6-5000&quot;;
Document doc = Document.newBuilder()
    .setId(myDocId) // Setting the document identifer is optional. If omitted, the search service will create an identifier.
    .addField(Field.newBuilder().setName(&quot;content&quot;).setText(&quot;the rain in spain&quot;))
    .addField(Field.newBuilder().setName(&quot;email&quot;)
        .setText(currentUser.getEmail()))
    .addField(Field.newBuilder().setName(&quot;domain&quot;)
        .setAtom(currentUser.getAuthDomain()))
    .addField(Field.newBuilder().setName(&quot;published&quot;).setDate(new Date()))
    .build();
</div><p id="bnq0so_285"><span class="control" id="bnq0so_294">Note:</span> When you create a document you must specify all of its attributes using the <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Document.Builder" id="bnq0so_295" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_296">Document.Builder</code></a> class method. You cannot add, remove, or delete fields, nor change the identifier or any other attribute once the document has been created. Date and geopoint fields must be assigned a non-null value. Atom, text, HTML, and number fields can be empty.</p><p id="bnq0so_286">To access fields within the document, use <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Document#getOnlyField(java.lang.String)" id="bnq0so_297" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_298">getOnlyField()</code></a>:</p><div class="code-block" data-lang="none">
Document document = ...

String coverLetter = document.getOnlyField(&quot;coverLetter&quot;).getText();
String resume = document.getOnlyField(&quot;resume&quot;).getHTML();
String fullName = document.getOnlyField(&quot;fullName&quot;).getAtom();
Date submissionDate = document.getOnlyField(&quot;submissionDate&quot;).getDate();
</div></section><section class="chapter"><h2 id="working-with-an-index" data-toc="working-with-an-index">Working with an index</h2><section class="chapter"><h3 id="putting-documents-in-an-index" data-toc="putting-documents-in-an-index">Putting documents in an index</h3><p id="bnq0so_305">When you put a document into an index, the document is copied to persistent storage and each of its fields is indexed according to its name, type, and the <code class="code" id="bnq0so_313">doc_id</code>.</p><p id="bnq0so_306">The following code example shows how to access an Index and put a document into it. The steps are:</p><ul class="list _bullet" id="bnq0so_307"><li class="list__item" id="bnq0so_314"><p id="bnq0so_318">Create an <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/IndexSpec" id="bnq0so_319" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_320">IndexSpec</code></a></p></li><li class="list__item" id="bnq0so_315"><p id="bnq0so_321">Create a <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/SearchService" id="bnq0so_322" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_323">SearchService</code></a></p></li><li class="list__item" id="bnq0so_316"><p id="bnq0so_324">Call <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/SearchService#getIndex(com.google.appengine.api.search.IndexSpec)" id="bnq0so_325" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_326">SearchService.getIndex()</code></a> to create an instance of Index.</p></li><li class="list__item" id="bnq0so_317"><p id="bnq0so_327">Call <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Index#put(com.google.appengine.api.search.Document...)" id="bnq0so_328" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_329">Index.put()</code></a> to add the document to the index.</p></li></ul><div class="code-block" data-lang="none">
import com.google.appengine.api.search.Index;
import com.google.appengine.api.search.IndexSpec;
import com.google.appengine.api.search.SearchServiceFactory;
import com.google.appengine.api.search.PutException;
import com.google.appengine.api.search.StatusCode;

public void IndexADocument(String indexName, Document document) {
    IndexSpec indexSpec = IndexSpec.newBuilder().setName(indexName).build(); 
    Index index = SearchServiceFactory.getSearchService().getIndex(indexSpec);
    
    try {
        index.put(document);
    } catch (PutException e) {
        if (StatusCode.TRANSIENT_ERROR.equals(e.getOperationResult().getCode())) {
            // retry putting the document
        }
    }
}
</div><p id="bnq0so_309">You can pass up to 200 documents at a time to the <code class="code" id="bnq0so_330">put()</code> method. Batching puts is more efficient than adding documents one at a time.</p><p id="bnq0so_310">When you put a document into an index and the index already contains a document with the same <code class="code" id="bnq0so_331">doc_id</code>, the new document replaces the old one. No warning is given. You can call <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Index#get(java.lang.String)" id="bnq0so_332" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_334">Index.get(id)</code></a> before creating or adding a document to an index to check whether a specific <code class="code" id="bnq0so_333">doc_id</code> already exists.</p><p id="bnq0so_311">Note that creating an instance of the <code class="code" id="bnq0so_335">Index</code> class does not guarantee that a persistent index actually exists. A persistent index is created the first time you add a document to it with the <code class="code" id="bnq0so_336">put</code> method. If you want to check whether or not an index actually exists before you start to use it, use the <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/SearchService#getIndexes(com.google.appengine.api.search.GetIndexesRequest)" id="bnq0so_337" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_338">SearchService.getIndexes()</code></a> method.</p><section class="chapter"><h4 id="updating-documents" data-toc="updating-documents">Updating documents</h4><p id="bnq0so_339">A document cannot be changed once you've added it to an index. You can't add or remove fields, or change a field's value. However, you can replace the document with a new document that has the same <code class="code" id="bnq0so_340">doc_id</code>.</p></section></section><section class="chapter"><h3 id="retrieving-documents-by-doc-id" data-toc="retrieving-documents-by-doc-id">Retrieving documents by doc_id</h3><p id="bnq0so_342">There are two ways to retrieve documents from an index using document identifiers:</p><ul class="list _bullet" id="bnq0so_343"><li class="list__item" id="bnq0so_346"><p id="bnq0so_348">Use <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Index#get(java.lang.String)" id="bnq0so_349" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_351">Index.get()</code></a> to fetch a single document by its <code class="code" id="bnq0so_350">doc_id</code>.</p></li><li class="list__item" id="bnq0so_347"><p id="bnq0so_352">Use <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Index#getRange(com.google.appengine.api.search.GetRequest)" id="bnq0so_353" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_355">Index.getRange()</code></a> to retrieve a group of consecutive documents ordered by <code class="code" id="bnq0so_354">doc_id</code>.</p></li></ul><p id="bnq0so_344">Each call is demonstrated in the example below.</p><div class="code-block" data-lang="none">
IndexSpec indexSpec = IndexSpec.newBuilder().setName(indexName).build(); 
Index index = SearchServiceFactory.getSearchService().getIndex(indexSpec);
    
// Fetch a single document by its  doc_id
Document doc = index.get(&quot;AZ125&quot;);

// Fetch a range of documents by their doc_ids
GetResponse&lt;Document&gt; docs = index.getRange(GetRequest.newBuilder().setStartId(&quot;AZ125&quot;).setLimit(100).build());
</div></section><section class="chapter"><h3 id="searching-for-documents-by-their-contents" data-toc="searching-for-documents-by-their-contents">Searching for documents by their contents</h3><p id="bnq0so_356">To retrieve documents from an index, you construct a query string and call <code class="code" id="bnq0so_358">Index.search()</code>. The query string can be passed directly as the argument, or you can include the string in a <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Query" id="bnq0so_359" data-external="true" rel="noopener noreferrer" target="_blank">Query</a> object which is passed as the argument. By default, <code class="code" id="bnq0so_360">search()</code> returns matching documents sorted in order of decreasing rank. To control how many documents are returned, how they are sorted, or add computed fields to the results, you need to use a <code class="code" id="bnq0so_361">Query</code> object, which contains a query string and can also specify other search and sorting options.</p><div class="code-block" data-lang="none">
import com.google.appengine.api.search.Results;
import com.google.appengine.api.search.ScoredDocument;
import com.google.appengine.api.search.SearchException;

...

try {
    String queryString = &quot;product: piano AND price &amp;lt; 5000&quot;;
    Results&lt;ScoredDocument&gt; results = getIndex().search(queryString);

    // Iterate over the documents in the results
    for (ScoredDocument document : results) {
        // handle results
    }
} catch (SearchException e) {
    if (StatusCode.TRANSIENT_ERROR.equals(e.getOperationResult().getCode())) {
        // retry
    }
}
</div></section><section class="chapter"><h3 id="deleting-documents-from-an-index" data-toc="deleting-documents-from-an-index">Deleting documents from an index</h3><p id="bnq0so_362">You can delete documents in an index by specifying the <code class="code" id="bnq0so_365">doc_id</code> of one or more documents you wish to delete to the <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Index#delete(java.lang.Iterable)" id="bnq0so_366" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_372">delete()</code></a> method. To get a range of document ids in an index, invoke the <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/GetRequest.Builder#setReturningIdsOnly(boolean)" id="bnq0so_367" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_373">setReturningIdsOnly()</code></a> method of the <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/GetRequest.Builder" id="bnq0so_368" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_374">GetRequest.Builder</code></a>, which is then given to the <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Index#getRange(com.google.appengine.api.search.GetRequest)" id="bnq0so_369" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_375">getRange()</code></a> method. When you invoke this method, the API returns document objects populated only with the <code class="code" id="bnq0so_370">doc_id</code>. You can then delete the documents by passing those document identifiers to the <code class="code" id="bnq0so_371">delete()</code> method:</p><div class="code-block" data-lang="none">
import com.google.appengine.api.search.Document;
import com.google.appengine.api.search.GetRequest;
import com.google.appengine.api.search.GetResponse;
...
try {
    // looping because getRange by default returns up to 100 documents at a time
    while (true) {
        List&lt;String&gt; docIds = new ArrayList&lt;String&gt;();
        // Return a set of doc_ids.
        GetRequest request = GetRequest.newBuilder().setReturningIdsOnly(true).build();
        GetResponse&lt;Document&gt; response = getIndex().getRange(request);
        if (response.getResults().isEmpty()) {
            break;
        }
        for (Document doc : response) {
            docIds.add(doc.getId());
        }
        getIndex().delete(docIds);
    }
} catch (RuntimeException e) {
    LOG.log(Level.SEVERE, &quot;Failed to delete documents&quot;, e);
}
</div><p id="bnq0so_364">You can pass up to 200 documents at a time to the <code class="code" id="bnq0so_376">delete()</code> method. Batching deletes is more efficient than handling them one at a time.</p></section><section class="chapter"><h3 id="eventual-consistency" data-toc="eventual-consistency">Eventual consistency</h3><p id="bnq0so_377">When you put, update, or delete a document in an index, the change propagates across multiple data centers. This usually happens quickly, but the time it takes is variable. The Search API guarantees <a href="https://web.archive.org/web/20160425050508/http://en.wikipedia.org/wiki/Eventual_consistency" id="bnq0so_378" data-external="true" rel="noopener noreferrer" target="_blank">eventual consistency</a>. This means that in some cases if you perform a search or retrieve one or more documents by id, the results may not reflect the most recent change.</p></section><section class="chapter"><h3 id="determining-the-size-of-an-index" data-toc="determining-the-size-of-an-index">Determining the size of an index</h3><p id="bnq0so_379">An index stores documents for retrieval. You can retrieve a single document by its ID, a range of documents with consecutive IDs, or all the documents in an index. You can also search an index to retrieve documents that satisfy given criteria on fields and their values, specified as a query string. You can manage groups of documents by putting them into separate indexes. There is no limit to the number of documents in an index or the number of indexes you can use. The total size of all the documents in a single index is limited to 10GB by default but may be increased to up to 200GB by <a href="https://web.archive.org/web/20160425050508/https://support.google.com/cloud/contact/cloud_search_api_index_size_increase_request_form" id="bnq0so_381" data-external="true" rel="noopener noreferrer" target="_blank">submitting a request</a>. (The method <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Index#getStorageLimit()" id="bnq0so_382" data-external="true" rel="noopener noreferrer" target="_blank">Index.getStorageLimit()</a> returns the maximum allowable size of an index.)</p><p id="bnq0so_380">The method <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Index#getStorageUsage()" id="bnq0so_383" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_385">Index.getStorageUsage()</code></a> is an estimate of the amount of storage space used by an index. This number is an estimate because the index monitoring system does not run continuously; the actual usage is computed periodically. The <code class="code" id="bnq0so_384">storage_usage</code> is adjusted between sampling points by accounting for document additions, but not deletions.</p></section></section><section class="chapter"><h2 id="index-schemas" data-toc="index-schemas">Index schemas</h2><p id="bnq0so_386">Every index has a schema that shows all the field names and field types that appear in the documents it contains. You cannot define a schema yourself. Schemas are maintained dynamically; they are updated as documents are added to an index. A simple schema might look like this, in JSON-like form:</p><div class="code-block" data-lang="none">
{'comment': ['TEXT'], 'date': ['DATE'], 'author': ['TEXT'], 'count': ['NUMBER']}
</div><p id="bnq0so_388">Each key in the dictionary is the name of a document field. The key's value is a list of the field types used with that field name. If you have used the same field name with different field types the schema will list more than one field type for a field name, like this:</p><div class="code-block" data-lang="none">
{'ambiguous-integer': ['TEXT', 'NUMBER', 'ATOM']}
</div><p id="bnq0so_390">Once a field appears in a schema it can never be removed. There is no way to delete a field, even if the index no longer contains any documents with that particular field name.</p><p id="bnq0so_391">You can view the schemas for your indexes like this:</p><div class="code-block" data-lang="none">
import com.google.appengine.api.search.Field.FieldType;
import com.google.appengine.api.search.Index;
import com.google.appengine.api.search.GetIndexesRequest;
import com.google.appengine.api.search.GetIndexesResponse;
import com.google.appengine.api.search.Schema;

GetResponse&lt;Index&gt; response = SearchServiceFactory.getSearchService().getIndexes(
    GetIndexesRequest.newBuilder().setSchemaFetched(true).build());

// List out elements of each Schema
for (Index index : response) {
    Schema schema = index.getSchema();
    for (String fieldName : schema.getFieldNames()) {
        List&lt;FieldType&gt; typesForField = schema.getFieldTypes(fieldName);
    }
}
</div><p id="bnq0so_393">Note that a call to <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/?com/google/appengine/api/search/GetIndexesRequest.html" id="bnq0so_395" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_398">GetIndexes()</code></a> cannot return more than 1000 indexes. To retrieve more indexes, call the method repeatedly, using <code class="code" id="bnq0so_396">setStartIndexName()</code> along with <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/GetIndexesRequest.Builder" id="bnq0so_397" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="bnq0so_399">GetIndexesRequest.Builder</code></a>.</p><p id="bnq0so_394">A schema does not define a &quot;class&quot; in the object-programming sense. As far as the Search API is concerned, every document is unique and indexes can contain different kinds of documents. If you want to treat collections of objects with the same list of fields as instances of a class, that's an abstraction you must enforce in your code. For instance, you could insure that all documents with the same set of fields are kept in their own index. The index schema could be seen as the class definition, and each document in the index would be an instance of the class.</p></section><section class="chapter"><h2 id="viewing-indexes-in-the-google-cloud-platform-console" data-toc="viewing-indexes-in-the-google-cloud-platform-console">Viewing indexes in the Google Cloud Platform Console</h2><p id="bnq0so_400">In the Cloud Platform Console, you can <a href="https://web.archive.org/web/20160425050508/https://console.cloud.google.com//project/_/appengine/search" id="bnq0so_401" data-external="true" rel="noopener noreferrer" target="_blank">view information about your application's indexes and the documents they contain</a>. Clicking an index name displays the documents that index contains. You'll see all the defined schema fields for the index; for each document with a field of that name, you'll see the field's value. You can also issue queries on the index data directly from the console.</p></section><section class="chapter"><h2 id="search-api-quotas" data-toc="search-api-quotas">Search API quotas</h2><p id="bnq0so_402">The Search API has several free quotas:</p><div class="table-wrapper"><table class="wide" id="bnq0so_403"><thead><tr class="ijRowHead" id="bnq0so_411"><th id="bnq0so_415"><p>Resource or API call</p></th><th id="bnq0so_416"><p>Free Quota</p></th></tr></thead><tbody><tr id="bnq0so_412"><td id="bnq0so_417"><p>Total storage (documents and indexes)</p></td><td id="bnq0so_418"><p>0.25 GB</p></td></tr><tr id="bnq0so_413"><td id="bnq0so_419"><p>Queries</p></td><td id="bnq0so_420"><p>1000 queries per day</p></td></tr><tr id="bnq0so_414"><td id="bnq0so_421"><p>Adding documents to indexes</p></td><td id="bnq0so_422"><p>0.01 GB per day</p></td></tr></tbody></table></div><p id="bnq0so_404">The Search API imposes these limits to ensure the reliability of the service. These apply to both free and paid apps:</p><div class="table-wrapper"><table class="wide" id="bnq0so_405"><thead><tr class="ijRowHead" id="bnq0so_423"><th id="bnq0so_427"><p>Resource</p></th><th id="bnq0so_428"><p>Safety Quota</p></th></tr></thead><tbody><tr id="bnq0so_424"><td id="bnq0so_429"><p>Maximum query usage</p></td><td id="bnq0so_430"><p>100 aggregated minutes of query execution time per minute</p></td></tr><tr id="bnq0so_425"><td id="bnq0so_431"><p>Maximum documents added or deleted</p></td><td id="bnq0so_432"><p>15,000 per minute</p></td></tr><tr id="bnq0so_426"><td id="bnq0so_433"><p>Maximum size per index (unlimited number of indexes allowed)</p></td><td id="bnq0so_434"><p>10 GB</p></td></tr></tbody></table></div><p id="bnq0so_406">API usage is counted in different ways depending on the type of call:</p><ul class="list _bullet" id="bnq0so_407"><li class="list__item" id="bnq0so_435"><p id="bnq0so_438"><code class="code" id="bnq0so_439">Index.search()</code>: Each API call counts as one query; execution time is equivalent to the latency of the call.</p></li><li class="list__item" id="bnq0so_436"><p id="bnq0so_440"><code class="code" id="bnq0so_441">Index.put()</code>: When you add documents to indexes the size of each document and the number of documents counts towards the indexing quota.</p></li><li class="list__item" id="bnq0so_437"><p id="bnq0so_442">All other Search API calls are counted based on the number of operations they involve:</p><ul class="list _bullet" id="bnq0so_443"><li class="list__item" id="bnq0so_444"><p id="bnq0so_447"><code class="code" id="bnq0so_448">SearchService.getIndexes()</code>: 1 operation is counted for each index actually returned, or 1 operation if nothing is returned.</p></li><li class="list__item" id="bnq0so_445"><p id="bnq0so_449"><code class="code" id="bnq0so_450">Index.get()</code> and <code class="code" id="bnq0so_451">Index.getRange()</code>: 1 operation counted for each document actually returned, or 1 operation if nothing is returned.</p></li><li class="list__item" id="bnq0so_446"><p id="bnq0so_452"><code class="code" id="bnq0so_453">Index.delete()</code>: 1 operation counted for each document in the request, or 1 operation if the request is empty.</p></li></ul></li></ul><p id="bnq0so_408">The quota on query throughput is imposed so that a single user cannot monopolize the search service. Because queries can execute simultaneously, each application is allowed to run queries that consume up to 100 minutes of execution time per one minute of clock time. If you are running many short queries, you probably will not reach this limit. Once you exceed the quota, subsequent queries will fail until the next time slice, when your quota is restored. The quota is not strictly imposed in one minute slices; a variation of the <a href="https://web.archive.org/web/20160425050508/http://en.wikipedia.org/wiki/Leaky_bucket" id="bnq0so_454" data-external="true" rel="noopener noreferrer" target="_blank">leaky bucket</a> algorithm is used to control search bandwidth in five second increments.</p><p id="bnq0so_409">More information on quotas can be found on the <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/docs/quotas" id="bnq0so_455" data-external="true" rel="noopener noreferrer" target="_blank">Quotas</a> page. When an app tries to exceed these amounts, an insufficient quota error is returned.</p><p id="bnq0so_410">Note that although these limits are enforced by the minute, the console displays the daily totals for each. Customers with <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/support/packages" id="bnq0so_456" data-external="true" rel="noopener noreferrer" target="_blank">Silver, Gold, or Platinum support</a> can request higher throughput limits by contacting their support representative.</p></section><section class="chapter"><h2 id="search-api-pricing" data-toc="search-api-pricing">Search API pricing</h2><p id="bnq0so_457">If you enable billing for your app you will be charged for additional usage beyond free quotas. The following charges apply to billed apps:</p><div class="table-wrapper"><table class="wide" id="bnq0so_458"><thead><tr class="ijRowHead" id="bnq0so_460"><th id="bnq0so_464"><p>Resource</p></th><th id="bnq0so_465"><p>Cost</p></th></tr></thead><tbody><tr id="bnq0so_461"><td id="bnq0so_466"><p>Total storage (documents and indexes)</p></td><td id="bnq0so_467"><p>$0.18 per GB per month</p></td></tr><tr id="bnq0so_462"><td id="bnq0so_468"><p>Queries</p></td><td id="bnq0so_469"><p>$ 0.50 per 10K queries</p></td></tr><tr id="bnq0so_463"><td id="bnq0so_470"><p>Indexing searchable documents</p></td><td id="bnq0so_471"><p>$2.00 per GB</p></td></tr></tbody></table></div><p id="bnq0so_459">Additional information on pricing is on the <a href="https://web.archive.org/web/20160425050508/https://cloud.google.com/appengine/pricing" id="bnq0so_472" data-external="true" rel="noopener noreferrer" target="_blank">Pricing</a> page.</p></section><div class="last-modified">10 April 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="searchable-document-indexes.html" class="navigation-links__prev">Searchable Document Indexes</a><a href="query-strings.html" class="navigation-links__next">Query Strings</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>