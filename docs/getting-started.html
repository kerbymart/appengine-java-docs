<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-13T01:56:44.832588099"><title>Getting Started | Google App Engine Java Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"running-the-localexample-java-sample-eclipse","level":0,"title":"Running the LocalExample.java Sample (Eclipse)","anchor":"#running-the-localexample-java-sample-eclipse"},{"id":"investigating-the-localexample-java-sample","level":0,"title":"Investigating the LocalExample.java Sample","anchor":"#investigating-the-localexample-java-sample"},{"id":"deployable-cloud-storage-client-library-samples-with-ui","level":0,"title":"Deployable Cloud Storage Client Library Samples with UI","anchor":"#deployable-cloud-storage-client-library-samples-with-ui"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Getting Started | Google App Engine Java Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Google App Engine Java Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/getting-started.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Getting Started | Google App Engine Java Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/getting-started.html#webpage",
    "url": "writerside-documentation/getting-started.html",
    "name": "Getting Started | Google App Engine Java Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Google App Engine Java Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Getting-Started" data-main-title="Getting Started" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Guides.md|Guides///Storing-Data.md|Storing Data///Google-Cloud-Storage.md|Google Cloud Storage"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Google App Engine Java Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Getting-Started" id="Getting-Started.md">Getting Started</h1><p id="-nid1i3_3">Before running through the steps below, make sure that:</p><ul class="list _bullet" id="-nid1i3_4"><li class="list__item" id="-nid1i3_8"><p id="-nid1i3_11">You have <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/appengine/docs/java/googlecloudstorageclient/using-cloud-storage#activating_a_cloud_storage_bucket" id="-nid1i3_12" data-external="true" rel="noopener noreferrer" target="_blank">activated</a> your project for Google Cloud Storage and App Engine, including creating at least one Cloud Storage bucket.</p></li><li class="list__item" id="-nid1i3_9"><p id="-nid1i3_13">You have <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/appengine/docs/java/googlecloudstorageclient/using-cloud-storage#downloading_the_client_library" id="-nid1i3_14" data-external="true" rel="noopener noreferrer" target="_blank">downloaded</a> the client lib distribution and unzipped it.</p></li><li class="list__item" id="-nid1i3_10"><p id="-nid1i3_15">You have <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/appengine/docs/java/googlecloudstorageclient/using-cloud-storage#downloading_the_client_library" id="-nid1i3_16" data-external="true" rel="noopener noreferrer" target="_blank">installed and configured</a> the latest App Engine Java SDK.</p></li></ul><section class="chapter"><h2 id="running-the-localexample-java-sample-eclipse" data-toc="running-the-localexample-java-sample-eclipse">Running the LocalExample.java Sample (Eclipse)</h2><p id="-nid1i3_17"><a href="https://web.archive.org/web/20160424231044/https://github.com/GoogleCloudPlatform/appengine-gcs-client/blob/master/java/example/src/com/google/appengine/demos/LocalExample.java" id="-nid1i3_20" data-external="true" rel="noopener noreferrer" target="_blank">LocalExample.java</a> is a non-deployable sample useful for quick testing and investigation of the Cloud Storage functionality. It has no UI components other than Eclipse console output. (<span id="-nid1i3_21">Cloud Storage client library deployable samples</span> with UI are also available.)</p><p id="-nid1i3_18">To run LocalExample.java in Eclipse:</p><ol class="list _decimal" id="-nid1i3_19" type="1"><li class="list__item" id="-nid1i3_22"><p id="-nid1i3_32">Start Eclipse.</p></li><li class="list__item" id="-nid1i3_23"><p id="-nid1i3_33">In Eclipse, click <span class="emphasis" id="-nid1i3_34">Windows &gt; Preferences &gt; Google &gt; App Engine</span> and then click <span class="emphasis" id="-nid1i3_35">Add</span>. (On Mac OS X: <span class="emphasis" id="-nid1i3_36">Eclipse &gt; Preferences &gt; Google &gt; App Engine</span>.)</p></li><li class="list__item" id="-nid1i3_24"><p id="-nid1i3_37">Follow the prompts to supply the install path of the App Engine SDK, then click <span class="emphasis" id="-nid1i3_38">OK</span>.</p></li><li class="list__item" id="-nid1i3_25"><p id="-nid1i3_39">In the <span class="emphasis" id="-nid1i3_40">Files</span> menu, click <span class="emphasis" id="-nid1i3_41">Files &gt; New &gt; Java Project</span> and create a project named <code class="code" id="-nid1i3_42">LocalExample</code> with a package name of <code class="code" id="-nid1i3_43">com.google.appengine.demos</code>.</p></li><li class="list__item" id="-nid1i3_26"><p id="-nid1i3_44">Select the project in the Package Explorer pane and click <span class="emphasis" id="-nid1i3_45">Files &gt; New &gt; Class</span> and give the class the name <code class="code" id="-nid1i3_46">LocalExample</code> with a package name of <code class="code" id="-nid1i3_47">com.google.appengine.demos</code>.</p></li><li class="list__item" id="-nid1i3_27"><p id="-nid1i3_48">Copy the contents of the <a href="https://web.archive.org/web/20160424231044/https://github.com/GoogleCloudPlatform/appengine-gcs-client/blob/master/java/example/src/com/google/appengine/demos/LocalExample.java" id="-nid1i3_49" data-external="true" rel="noopener noreferrer" target="_blank">LocalExampleJava source</a> into that class file.</p></li><li class="list__item" id="-nid1i3_28"><p id="-nid1i3_50">Select the project again in the Package Explorer pane and right-click, then click <span class="emphasis" id="-nid1i3_51">Properties &gt; Java Build Path</span>.</p></li><li class="list__item" id="-nid1i3_29"><p id="-nid1i3_52">In the <span class="emphasis" id="-nid1i3_54">Libraries</span> tab, click <span class="emphasis" id="-nid1i3_55">Add External Jars</span>. You must add the following JARs:</p><ul class="list _bullet" id="-nid1i3_53"><li class="list__item" id="-nid1i3_56"><p id="-nid1i3_62"><code class="code" id="-nid1i3_63">appengine-gcs-client.jar</code> from wherever you installed the Cloud Storage client library</p></li><li class="list__item" id="-nid1i3_57"><p id="-nid1i3_64"><code class="code" id="-nid1i3_65">guava-15.0.jar</code> from wherever you installed the Cloud Storage client library</p></li><li class="list__item" id="-nid1i3_58"><p id="-nid1i3_66"><code class="code" id="-nid1i3_67">joda-time-2.3.jar</code> from wherever you installed the Cloud Storage client library</p></li><li class="list__item" id="-nid1i3_59"><p id="-nid1i3_68"><code class="code" id="-nid1i3_69">appengine-testing.jar</code> from the App Engine install subdirectory <code class="code" id="-nid1i3_70">/lib/testing</code>.</p></li><li class="list__item" id="-nid1i3_60"><p id="-nid1i3_71"><code class="code" id="-nid1i3_72">appengine-api.jar</code> from the App Engine install subdirectory <code class="code" id="-nid1i3_73">/lib/impl</code>.</p></li><li class="list__item" id="-nid1i3_61"><p id="-nid1i3_74"><code class="code" id="-nid1i3_75">appengine-api-stubs.jar</code> from the App Engine install subdirectory <code class="code" id="-nid1i3_76">/lib/impl</code>.</p></li></ul></li><li class="list__item" id="-nid1i3_30"><p id="-nid1i3_77">Build, then <span class="emphasis" id="-nid1i3_78">Run As &gt; Java Application</span>.</p></li><li class="list__item" id="-nid1i3_31"><p id="-nid1i3_79">You should see the following output in the Eclipse Console pane:</p><figure id="-nid1i3_80"><img alt="Local example" src="https://web.archive.org/web/20160424231044im_/https://cloud.google.com/appengine/docs/java/googlecloudstorageclient/images/local_example.png" title="Local example"></figure></li></ol></section><section class="chapter"><h2 id="investigating-the-localexample-java-sample" data-toc="investigating-the-localexample-java-sample">Investigating the LocalExample.java Sample</h2><p id="-nid1i3_81"><a href="https://web.archive.org/web/20160424231044/https://github.com/GoogleCloudPlatform/appengine-gcs-client/blob/master/java/example/src/com/google/appengine/demos/LocalExample.java" id="-nid1i3_86" data-external="true" rel="noopener noreferrer" target="_blank">LocalExample.java</a> is described in detail below, to illustrate the use of the Cloud Storage client library.</p><section class="chapter"><h3 id="imports" data-toc="imports">Imports</h3><p id="-nid1i3_87">There are a number of imports used that you might not need, or that are used to enable local testing. The followng snippet lists this sample's imports:</p><div class="code-block" data-lang="none">
import com.google.appengine.tools.cloudstorage.GcsFileOptions;
import com.google.appengine.tools.cloudstorage.GcsFilename;
import com.google.appengine.tools.cloudstorage.GcsInputChannel;
import com.google.appengine.tools.cloudstorage.GcsOutputChannel;
import com.google.appengine.tools.cloudstorage.GcsService;
import com.google.appengine.tools.cloudstorage.GcsServiceFactory;
import com.google.appengine.tools.cloudstorage.RetryParams;
import com.google.appengine.tools.development.testing.LocalBlobstoreServiceTestConfig;
import com.google.appengine.tools.development.testing.LocalDatastoreServiceTestConfig;
import com.google.appengine.tools.development.testing.LocalServiceTestHelper;

import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.nio.ByteBuffer;
import java.nio.channels.Channels;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
</div><p id="-nid1i3_89">These imports are briefly described below:</p><ul class="list _bullet" id="-nid1i3_90"><li class="list__item" id="-nid1i3_91"><p id="-nid1i3_98"><code class="code" id="-nid1i3_99">com.google.appengine.tools.cloudstorage.*</code> this lets us use the Cloud Storage client library.</p></li><li class="list__item" id="-nid1i3_92"><p id="-nid1i3_100"><code class="code" id="-nid1i3_101">com.google.appengine.tools.development.testing.*</code> Only needed for <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/appengine/docs/java/tools/localunittesting#Java_Introducing_the_Java_testing_utilities" id="-nid1i3_102" data-external="true" rel="noopener noreferrer" target="_blank">local unit testing</a> of certain App Engine features while running your app.</p></li><li class="list__item" id="-nid1i3_93"><p id="-nid1i3_103"><code class="code" id="-nid1i3_104">java.io.ObjectInputStream</code> and <code class="code" id="-nid1i3_105">java.io.ObjectOutputStream</code> are used for reading and writing objects.</p></li><li class="list__item" id="-nid1i3_94"><p id="-nid1i3_106"><code class="code" id="-nid1i3_107">java.nio.ByteBuffer</code> is used for unbuffered reads and writes.</p></li><li class="list__item" id="-nid1i3_95"><p id="-nid1i3_108">Although not shown in the snippets, <code class="code" id="-nid1i3_109">java.io.IOException</code> is needed for error handling.</p></li><li class="list__item" id="-nid1i3_96"><p id="-nid1i3_110"><code class="code" id="-nid1i3_111">java.nio.channels.Channels</code> is used to convert the input or output channel to a stream.</p></li><li class="list__item" id="-nid1i3_97"><p id="-nid1i3_112"><code class="code" id="-nid1i3_113">java.nio.channels.ReadableByteChannel</code> is used for the data being read in from Cloud Storage.</p></li></ul></section><section class="chapter"><h3 id="creating-a-gcsservice-to-send-requests" data-toc="creating-a-gcsservice-to-send-requests">Creating a GcsService To Send Requests</h3><p id="-nid1i3_114">To send and receive requests to Cloud Storage via this library, you need a <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/appengine/docs/java/googlecloudstorageclient/javadoc/com/google/appengine/tools/cloudstorage/GcsService.html" id="-nid1i3_119" data-external="true" rel="noopener noreferrer" target="_blank">GcsService</a> instance:</p><div class="code-block" data-lang="none">
private final GcsService gcsService =
    GcsServiceFactory.createGcsService(RetryParams.getDefaultInstance());
</div><p id="-nid1i3_116">In the snippet, notice the use of <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/appengine/docs/java/googlecloudstorageclient/javadoc/com/google/appengine/tools/cloudstorage/RetryParams.html" id="-nid1i3_120" data-external="true" rel="noopener noreferrer" target="_blank">RetryParams</a> in the call to <code class="code" id="-nid1i3_121">createGcsService</code>. Supplied as shown, <code class="code" id="-nid1i3_122">createGcsService(RetryParams.getDefaultInstance())</code>, this sets the default retry settings to be used for retries in the event of request failures due to timeouts or other unexpected failures in accessing Cloud Storage. To specify different values, such as for maximum number of retries, you use <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/appengine/docs/java/googlecloudstorageclient/javadoc/com/google/appengine/tools/cloudstorage/RetryParams.Builder.html" id="-nid1i3_123" data-external="true" rel="noopener noreferrer" target="_blank">RetryParams.Builder</a> to change settings in a new <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/appengine/docs/java/googlecloudstorageclient/javadoc/com/google/appengine/tools/cloudstorage/RetryParams.html" id="-nid1i3_124" data-external="true" rel="noopener noreferrer" target="_blank">RetryParams</a> object and supply it when you create <code class="code" id="-nid1i3_125">GcsService</code>. Note that once a <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/appengine/docs/java/googlecloudstorageclient/javadoc/com/google/appengine/tools/cloudstorage/GcsService.html" id="-nid1i3_126" data-external="true" rel="noopener noreferrer" target="_blank">GcsService</a> object is created, its retry parameters cannot be changed.</p><p id="-nid1i3_117">You can create as many <code class="code" id="-nid1i3_127">GcsService</code> instances as you need. Each instance is independent, immutable (and therefore threadsafe), and reusable. For example, one can be used to write a file with one set of parameters, and another can read a different file with different retry parameters at the same time.</p><p id="-nid1i3_118">A recommended practice is to use a separate (possibly static) instance in each of your classes that does I/O; this will help keep your classes independent and has very little overhead.</p></section><section class="chapter"><h3 id="writing-data-to-cloud-storage" data-toc="writing-data-to-cloud-storage">Writing Data to Cloud Storage</h3><p id="-nid1i3_128">The following samples show how to write data to a file stored in Cloud Storage. Separate snippets are provided for writing serialized object data and byte arrays.</p><p id="-nid1i3_129">Cloud Storage files are not fully created until <code class="code" id="-nid1i3_133">close</code> is invoked.</p><p id="-nid1i3_130">In the snippets below, <code class="code" id="-nid1i3_134">close</code> does not appear in a <code class="code" id="-nid1i3_135">finally</code> block, as is often done in Java. This is so that in the event of an exception, any partly written data will automatically be cleaned up.</p><section class="chapter"><h4 id="writing-an-object-to-cloud-storage" data-toc="writing-an-object-to-cloud-storage">Writing an Object to Cloud Storage</h4><p id="-nid1i3_136">Here is how to serialize an object to a Cloud Storage file. First, get a writable byte channel:</p><div class="code-block" data-lang="none">
GcsOutputChannel outputChannel =
    gcsService.createOrReplace(fileName, GcsFileOptions.getDefaultInstance());
</div><p id="-nid1i3_138">In the snippet, <code class="code" id="-nid1i3_145">GcsService.createOrReplace</code> is invoked with the <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/appengine/docs/java/googlecloudstorageclient/javadoc/com/google/appengine/tools/cloudstorage/GcsFilename.html" id="-nid1i3_146" data-external="true" rel="noopener noreferrer" target="_blank">GcsFilename</a> as the first parameter. This object contains the name of the bucket to be used and name of the object. If there already is an object with that same name in that bucket, and your app has write permissions to it, this call will overwrite the existing file. (Cloud Storage does not support appending.) If there is no file of that name, this call results in the creation of a new file.</p><p id="-nid1i3_139">The second parameter shown is <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/appengine/docs/java/googlecloudstorageclient/javadoc/com/google/appengine/tools/cloudstorage/GcsFileOptions.html" id="-nid1i3_147" data-external="true" rel="noopener noreferrer" target="_blank">GcsFileOptions</a>. To supply default options, use <code class="code" id="-nid1i3_148">GcsFileOptions.getDefaultInstance</code>. To supply your own settings, use <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/appengine/docs/java/googlecloudstorageclient/javadoc/com/google/appengine/tools/cloudstorage/GcsFileOptions.Builder" id="-nid1i3_149" data-external="true" rel="noopener noreferrer" target="_blank">GcsFileOptions.Builder</a> to set options and create a <code class="code" id="-nid1i3_150">GcsFileOptions</code> to supply as the second parameter.</p><p id="-nid1i3_140">The file options are passed through to Cloud Storage to tell it the content type of the file, any user metadata you want passed in the headers, the ACL to govern access to the file, and so forth. If you don't supply a content type (<code class="code" id="-nid1i3_151">mimeType</code>), the file will be served from Cloud Storage in the default MIME type, which is currently <code class="code" id="-nid1i3_152">binary/octet-stream</code>. If you don't specify an ACL, the access assigned to the object will be the current <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/storage/docs/accesscontrol#default" id="-nid1i3_153" data-external="true" rel="noopener noreferrer" target="_blank">default object ACL</a>.</p><p id="-nid1i3_141">Note that all of the file options information can be obtained from an object after a <code class="code" id="-nid1i3_154">close</code> without having to download the object itself, by calling <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/appengine/docs/java/googlecloudstorageclient/javadoc/com/google/appengine/tools/cloudstorage/GcsFileMetadata.html" id="-nid1i3_155" data-external="true" rel="noopener noreferrer" target="_blank">GcsService.getMetadata(fileName)</a>.</p><p id="-nid1i3_142">For more information on the above settings, visit the Cloud Storage documentation on <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/storage/docs/accesscontrol" id="-nid1i3_156" data-external="true" rel="noopener noreferrer" target="_blank">ACLs</a> and <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/storage/docs/reference-methods#putbucket" id="-nid1i3_157" data-external="true" rel="noopener noreferrer" target="_blank">file options</a>.</p><p id="-nid1i3_143">Now write the data using an output stream:</p><div class="code-block" data-lang="none">
@SuppressWarnings(&quot;resource&quot;)
ObjectOutputStream oout =
    new ObjectOutputStream(Channels.newOutputStream(outputChannel));
oout.writeObject(content);
oout.close();
</div></section><section class="chapter"><h4 id="writing-a-byte-array-to-a-cloud-storage-file" data-toc="writing-a-byte-array-to-a-cloud-storage-file">Writing a Byte Array to a Cloud Storage File</h4><p id="-nid1i3_158">Here is how to write a byte array to a Cloud Storage file:</p><div class="code-block" data-lang="none">
@SuppressWarnings(&quot;resource&quot;)
GcsOutputChannel outputChannel =
    gcsService.createOrReplace(fileName, GcsFileOptions.getDefaultInstance());
outputChannel.write(ByteBuffer.wrap(content));
outputChannel.close();
</div><p id="-nid1i3_160">For a description of the parameters used in the <code class="code" id="-nid1i3_161">createOrReplace</code> call, see the description under <span id="-nid1i3_162">Writing an Object to Cloud Storage</span>.</p></section></section><section class="chapter"><h3 id="reading-data-from-cloud-storage" data-toc="reading-data-from-cloud-storage">Reading Data from Cloud Storage</h3><p id="-nid1i3_163">The following samples show how to read data from a file stored in Cloud Storage. Separate snippets are provided for reading the Cloud Storage file into an object (serialize) and into a byte array.</p><section class="chapter"><h4 id="reading-cloud-storage-data-into-an-object" data-toc="reading-cloud-storage-data-into-an-object">Reading Cloud Storage Data into an Object</h4><p id="-nid1i3_166">This approach is useful for streaming larger files into a buffer:</p><div class="code-block" data-lang="none">
GcsInputChannel readChannel = gcsService.openPrefetchingReadChannel(fileName, 0, 1024 * 1024);
</div><p id="-nid1i3_168">The call to <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/appengine/docs/java/googlecloudstorageclient/javadoc/com/google/appengine/tools/cloudstorage/GcsService.html#openPrefetchingReadChannel(com.google.appengine.tools.cloudstorage.GcsFilename,long,int)" id="-nid1i3_173" data-external="true" rel="noopener noreferrer" target="_blank">GcsService.openPrefetchingReadChannel</a> takes a <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/appengine/docs/java/googlecloudstorageclient/javadoc/com/google/appengine/tools/cloudstorage/GcsFilename.html" id="-nid1i3_174" data-external="true" rel="noopener noreferrer" target="_blank">GcsFilename</a>, which contains the name of the Cloud Storage bucket to be read from and name of the object to be read. The second parameter is the number of bytes from the start of the file, with 0 as shown causing the read to start at the beginning of the file. If you supply some other starting point within the file, say, at byte 300, the read operation begins at byte 300 and continues to the end of the file, or until you stop reading. (The prefetch buffer will read ahead, though, so it will contain bytes past the point where you stop.)</p><p id="-nid1i3_169">Prefetching provides is a major performance advantage for most applications, because it allows processing part of the file while more data is being downloaded in the background in parallel.</p><p id="-nid1i3_170">The third parameter is the size of the prefetch buffer, set in the example to 1 megabyte.</p><p id="-nid1i3_171">Now, read the file from the channel:</p><div class="code-block" data-lang="none">
try (ObjectInputStream oin = new ObjectInputStream(Channels.newInputStream(readChannel))) {
  return oin.readObject();
}
</div></section><section class="chapter"><h4 id="reading-data-into-a-byte-array" data-toc="reading-data-into-a-byte-array">Reading Data into a Byte Array</h4><p id="-nid1i3_175">For smaller files, you could read the file all at once into a byte array:</p><div class="code-block" data-lang="none">
int fileSize = (int) gcsService.getMetadata(fileName).getLength();
ByteBuffer result = ByteBuffer.allocate(fileSize);
try (GcsInputChannel readChannel = gcsService.openReadChannel(fileName, 0)) {
  readChannel.read(result);
}
</div><p id="-nid1i3_177">In the snippet above, note the use of <code class="code" id="-nid1i3_179">java.nio.ByteBuffer</code>, especially the setting of the buffer size to be equal to the size of the file being read in from the channel.</p><p id="-nid1i3_178">Note, however, that for most applications, the prefered method is to stream the file (see <span id="-nid1i3_180">Reading Data into an Object</span>) because that doesn't require holding the all of the data in memory at once.</p></section></section></section><section class="chapter"><h2 id="deployable-cloud-storage-client-library-samples-with-ui" data-toc="deployable-cloud-storage-client-library-samples-with-ui">Deployable Cloud Storage Client Library Samples with UI</h2><p id="-nid1i3_181">For deployable samples with UI, visit the source code for:</p><ul class="list _bullet" id="-nid1i3_182"><li class="list__item" id="-nid1i3_185"><p id="-nid1i3_186"><a href="https://web.archive.org/web/20160424231044/https://github.com/GoogleCloudPlatform/appengine-gcs-client/blob/master/java/example/src/com/google/appengine/demos/GcsExampleServlet.java" id="-nid1i3_187" data-external="true" rel="noopener noreferrer" target="_blank">GcsExampleServlet.java</a>, which uploads/downloads files to/from Cloud Storage.</p></li></ul><p id="-nid1i3_183">You'll need to build the samples before you can run them against the development server or deploy them. To build the samples:</p><ol class="list _decimal" id="-nid1i3_184" type="1"><li class="list__item" id="-nid1i3_188"><p id="-nid1i3_193">Checkout the source code by invoking the following command from a terminal window:</p><div class="code-block" data-lang="none">
svn checkout http://appengine-gcs-client.googlecode.com/svn/trunk/ appengine-gcs-client-read-only
</div></li><li class="list__item" id="-nid1i3_189"><p id="-nid1i3_195">Change directory to <code class="code" id="-nid1i3_196">appengine-gcs-client-read-only/java</code>.</p></li><li class="list__item" id="-nid1i3_190"><p id="-nid1i3_197">Invoke <code class="code" id="-nid1i3_198">ant compile_example</code>, which will build the samples using the <code class="code" id="-nid1i3_199">build.xml</code> in that directory. For more information about using Apache Ant, see <a href="https://web.archive.org/web/20160424231044/https://cloud.google.com/appengine/docs/java/tools/ant" id="-nid1i3_200" data-external="true" rel="noopener noreferrer" target="_blank">Using Apache Ant</a>.</p></li><li class="list__item" id="-nid1i3_191"><p id="-nid1i3_201">Run the dev server by invoking</p><div class="code-block" data-lang="none">
/path/to/AppEngSDK/dev_appserver.sh  /path/to/example/war
</div></li><li class="list__item" id="-nid1i3_192"><p id="-nid1i3_203">In your browser, visit <code class="code" id="-nid1i3_205">localhost:8080</code>. For <code class="code" id="-nid1i3_206">GCSExampleServlet</code> you should see something like this:</p><figure id="-nid1i3_204"><img alt="Java sample" src="https://web.archive.org/web/20160424231044im_/https://cloud.google.com/appengine/docs/java/googlecloudstorageclient/images/java_sample.png" title="Java sample"></figure></li></ol></section><div class="last-modified">10 April 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="understanding-storage-features.html" class="navigation-links__prev">Understanding Storage Features</a><a href="superseded-storage-solutions.html" class="navigation-links__next">Superseded Storage Solutions</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>