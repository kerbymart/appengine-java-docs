<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-13T01:56:45.373545198"><title>Java Task Scheduling with Cron Using YAML | Google App Engine Java Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"about-cron-yaml","level":0,"title":"About cron.yaml","anchor":"#about-cron-yaml"},{"id":"the-schedule-format","level":0,"title":"The schedule format","anchor":"#the-schedule-format"},{"id":"cron-retries","level":0,"title":"Cron retries","anchor":"#cron-retries"},{"id":"securing-urls-for-cron","level":0,"title":"Securing URLs for cron","anchor":"#securing-urls-for-cron"},{"id":"calling-google-cloud-endpoints","level":0,"title":"Calling Google Cloud Endpoints","anchor":"#calling-google-cloud-endpoints"},{"id":"cron-and-app-versions","level":0,"title":"Cron and app versions","anchor":"#cron-and-app-versions"},{"id":"uploading-cron-jobs","level":0,"title":"Uploading cron jobs","anchor":"#uploading-cron-jobs"},{"id":"cron-support-in-the-cloud-platform-console","level":0,"title":"Cron support in the Cloud Platform Console","anchor":"#cron-support-in-the-cloud-platform-console"},{"id":"cron-support-in-the-development-server","level":0,"title":"Cron support in the development server","anchor":"#cron-support-in-the-development-server"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Java Task Scheduling with Cron Using YAML | Google App Engine Java Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Google App Engine Java Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/java-task-scheduling-with-cron-using-yaml.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Java Task Scheduling with Cron Using YAML | Google App Engine Java Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/java-task-scheduling-with-cron-using-yaml.html#webpage",
    "url": "writerside-documentation/java-task-scheduling-with-cron-using-yaml.html",
    "name": "Java Task Scheduling with Cron Using YAML | Google App Engine Java Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Google App Engine Java Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Java-Task-Scheduling-with-Cron-Using-YAML" data-main-title="Java Task Scheduling with Cron Using YAML" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Guides.md|Guides///Managing-and-Configuring-Your-App.md|Managing and Configuring Your App///Configuring-Your-Java-App-with-YAML-Files.md|Configuring Your Java App with YAML Files"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Google App Engine Java Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Java-Task-Scheduling-with-Cron-Using-YAML" id="Java-Task-Scheduling-with-Cron-Using-YAML.md">Java Task Scheduling with Cron Using YAML</h1><p id="yzf249_3">The App Engine Cron Service allows you to configure regularly scheduled tasks that operate at defined times or regular intervals. These tasks are commonly known as <span class="emphasis" id="yzf249_17">cron jobs</span>. These cron jobs are automatically triggered by the App Engine Cron Service. For instance, you might use this to send out a report email on a daily basis, to update some cached data every 10 minutes, or to update some summary information once an hour.</p><p id="yzf249_4">A cron job will invoke a URL, using an HTTP GET request, at a given time of day. An HTTP request invoked by cron is <a href="https://web.archive.org/web/20160424230929/https://cloud.google.com/appengine/docs/java/modules/#Java_Instance_scaling_and_class" id="yzf249_18" data-external="true" rel="noopener noreferrer" target="_blank">subject to the same limits as other HTTP requests</a>, depending on the scaling type of the module.</p><p id="yzf249_5">Free applications can have up to 20 scheduled tasks. Paid applications can have up to 100 scheduled tasks.</p><p id="yzf249_6"><span class="control" id="yzf249_19">Important:</span> For a cron task to be considered successful it must return an HTTP status code between 200 and 299 (inclusive).</p><ol class="list _decimal" id="yzf249_7" type="1"><li class="list__item" id="yzf249_20"><p id="yzf249_29"><span id="yzf249_30">About cron.yaml</span></p></li><li class="list__item" id="yzf249_21"><p id="yzf249_31"><span id="yzf249_32">The schedule format</span></p></li><li class="list__item" id="yzf249_22"><p id="yzf249_33"><span id="yzf249_34">Cron retries</span></p></li><li class="list__item" id="yzf249_23"><p id="yzf249_35"><span id="yzf249_36">Securing URLs for cron</span></p></li><li class="list__item" id="yzf249_24"><p id="yzf249_37"><span id="yzf249_38">Calling Google Cloud Endpoints</span></p></li><li class="list__item" id="yzf249_25"><p id="yzf249_39"><span id="yzf249_40">Cron and app versions</span></p></li><li class="list__item" id="yzf249_26"><p id="yzf249_41"><span id="yzf249_42">Uploading cron jobs</span></p></li><li class="list__item" id="yzf249_27"><p id="yzf249_43"><span id="yzf249_44">Cron support in the Cloud Platform Console</span></p></li><li class="list__item" id="yzf249_28"><p id="yzf249_45"><span id="yzf249_46">Cron support in the development server</span></p></li></ol><section class="chapter"><h2 id="about-cron-yaml" data-toc="about-cron-yaml">About cron.yaml</h2><p id="yzf249_47">A <code class="code" id="yzf249_58">cron.yaml</code> file in the <code class="code" id="yzf249_59">WEB-INF</code> directory of your application (alongside <code class="code" id="yzf249_60">app.yaml</code>) configures scheduled tasks for your Java application. The following is an example <code class="code" id="yzf249_61">cron.yaml</code> file:</p><div class="code-block" data-lang="none">
cron:
- description: daily summary job
  url: /tasks/summary
  schedule: every 24 hours
- description: monday morning mailout
  url: /mail/weekly
  schedule: every monday 09:00
  timezone: Australia/NSW
- description: new daily summary job
  url: /tasks/summary
  schedule: every 24 hours
  target: beta
</div><p id="yzf249_49">The syntax of <code class="code" id="yzf249_62">cron.yaml</code> is the YAML format. For more information about this syntax, see <a href="https://web.archive.org/web/20160424230929/http://www.yaml.org/" id="yzf249_63" data-external="true" rel="noopener noreferrer" target="_blank">the YAML website</a> for more information.</p><p id="yzf249_50">A <code class="code" id="yzf249_64">cron.yaml</code> file consists of a number of job definitions. A job definition must have a <code class="code" id="yzf249_65">url</code> and a <code class="code" id="yzf249_66">schedule</code>. You can also optionally specify a <code class="code" id="yzf249_67">description</code>, <code class="code" id="yzf249_68">timezone</code>, and a <code class="code" id="yzf249_69">target</code>. The description is visible in the Cloud Platform Console and the development server's admin interface.</p><p id="yzf249_51">The <code class="code" id="yzf249_70">url</code> field specifies a URL in your application that will be invoked by the Cron Service. See <span id="yzf249_71">Securing URLs for Cron</span> for more. The format of the schedule field is covered in <span id="yzf249_72">The Schedule Format</span>.</p><p id="yzf249_52">The <code class="code" id="yzf249_73">timezone</code> should be the name of a standard <a href="https://web.archive.org/web/20160424230929/https://en.wikipedia.org/wiki/List_of_zoneinfo_time_zones" id="yzf249_74" data-external="true" rel="noopener noreferrer" target="_blank">zoneinfo</a> time zone name. If you don't specify a timezone, the schedule will be in UTC (also known as GMT).</p><p id="yzf249_53">The <code class="code" id="yzf249_75">target</code> string is prepended to your app's hostname. It is usually the name of a module. The cron job will be routed to the default version of the named module. Note that if the default version of the module changes, the job will run in the new default version.</p><p id="yzf249_54"><span class="control" id="yzf249_76">Warning:</span> Be careful if you run a cron job with <a href="https://web.archive.org/web/20160424230929/https://cloud.google.com/appengine/docs/developers-console/#traffic-splitting" id="yzf249_77" data-external="true" rel="noopener noreferrer" target="_blank">traffic splitting</a> enabled. The request from the cron job is always sent from the same IP address, so if you've specified IP address splitting, the logic will route the request to the same version every time. If you've specified cookie splitting, the request will not be split at all, since there is no cookie accompanying the request.</p><p id="yzf249_55">If there is no module with the name assigned to <code class="code" id="yzf249_78">target</code>, the name is assumed to be a version of the default module, and App Engine will attempt to route the job to that version.</p><p id="yzf249_56">If you use a <a href="https://web.archive.org/web/20160424230929/https://cloud.google.com/appengine/docs/java/modules/routing#dispatch_file" id="yzf249_79" data-external="true" rel="noopener noreferrer" target="_blank">dispatch file</a>, your job may be re-routed. For example, given the following cron.yaml and dispatch.yaml files, the job will run in module2, even though its target is module1:</p><div class="code-block" data-lang="none">
# cron.yaml
cron:
- description: test dispatch vs target
  url: /tasks/hello_module2
  schedule: every 1 mins
  target: module1

# dispatch.yaml:
dispatch:
- url: '*/tasks/hello_module2'
  module: module2
</div></section><section class="chapter"><h2 id="the-schedule-format" data-toc="the-schedule-format">The schedule format</h2><p id="yzf249_80">Cron schedules are specified using a simple English-like format.</p><p id="yzf249_81">The following are examples of schedules:</p><div class="code-block" data-lang="none">
every 12 hours
every 5 minutes from 10:00 to 14:00
every day 00:00
every monday 09:00
2nd,third mon,wed,thu of march 17:00
1st monday of sep,oct,nov 17:00
1 of jan,april,july,oct 00:00
</div><p id="yzf249_83">If you don't need to run a recurring job at a specific time, but instead only need to run it at regular intervals, use the form:</p><div class="code-block" data-lang="none">
every N (hours|mins|minutes) [&quot;from&quot; (time) &quot;to&quot; (time)]
</div><p id="yzf249_85">The brackets are for illustration only, and quotes indicate a literal.</p><ul class="list _bullet" id="yzf249_86"><li class="list__item" id="yzf249_96"><p id="yzf249_99"><span class="emphasis" id="yzf249_100">N</span> specifies a number.</p></li><li class="list__item" id="yzf249_97"><p id="yzf249_101"><span class="emphasis" id="yzf249_102">hours</span> or <span class="emphasis" id="yzf249_103">minutes</span> (you can also use <span class="emphasis" id="yzf249_104">mins</span>) specifies the unit of time.</p></li><li class="list__item" id="yzf249_98"><p id="yzf249_105"><span class="emphasis" id="yzf249_106">time</span> specifies a time of day, as HH:MM in 24 hour time.</p></li></ul><p id="yzf249_87">By default, an interval schedule starts the next interval after the last job has completed. If a <span class="emphasis" id="yzf249_107">from...to</span> clause is specified, however, the jobs are scheduled at regular intervals independent of when the last job completed. For example:</p><div class="code-block" data-lang="none">
every 2 hours from 10:00 to 14:00
</div><p id="yzf249_89">This schedule runs the job three times per day at 10:00, 12:00, and 14:00, regardless of how long it takes to complete. You can use the literal &quot;synchronized&quot; as a synonym for <span class="emphasis" id="yzf249_108">from 00:00 to 23:59</span>:</p><div class="code-block" data-lang="none">
every 2 hours synchronized
</div><p id="yzf249_91">If you want more specific timing, you can specify the schedule as:</p><div class="code-block" data-lang="none">
(&quot;every&quot;|ordinal) (days) [&quot;of&quot; (monthspec)] (time)
</div><p id="yzf249_93">Where:</p><ul class="list _bullet" id="yzf249_94"><li class="list__item" id="yzf249_109"><p id="yzf249_113"><span class="emphasis" id="yzf249_114">ordinal</span> specifies a comma separated list of &quot;1st&quot;, &quot;first&quot; and so forth (both forms are ok)</p></li><li class="list__item" id="yzf249_110"><p id="yzf249_115"><span class="emphasis" id="yzf249_116">days</span> specifies a comma separated list of days of the week (for example, &quot;mon&quot;, &quot;tuesday&quot;, with both short and long forms being accepted); &quot;every day&quot; is equivalent to &quot;every mon,tue,wed,thu,fri,sat,sun&quot;</p></li><li class="list__item" id="yzf249_111"><p id="yzf249_117"><span class="emphasis" id="yzf249_118">monthspec</span> specifies a comma separated list of month names (for example, &quot;jan&quot;, &quot;march&quot;, &quot;sep&quot;). If omitted, implies every month. You can also say &quot;month&quot; to mean every month, as in &quot;1,8,15,22 of month 09:00&quot;.</p></li><li class="list__item" id="yzf249_112"><p id="yzf249_119"><span class="emphasis" id="yzf249_120">time</span> specifies the time of day, as HH:MM in 24 hour time.</p></li></ul><p id="yzf249_95"><span class="control" id="yzf249_121">Note:</span> You cannot specify a schedule that includes both regular intervals and specific timing.</p></section><section class="chapter"><h2 id="cron-retries" data-toc="cron-retries">Cron retries</h2><p id="yzf249_122">If a cron job's request handler returns a status code that is not in the range 200&ndash;299 (inclusive) App Engine considers the job to have failed. By default, failed jobs are not retried. You can cause failed jobs to be retried by including a <code class="code" id="yzf249_127">job_retry_parameters</code> block in your configuration file.</p><p id="yzf249_123">Here is a sample cron.yaml file that contains a single cron job configured to retry up to five times (the default) with a starting backoff of 2.5 seconds that doubles each time.</p><div class="code-block" data-lang="none">
cron:
- description: retry demo
  url: /retry
  schedule: every 10 mins
- retry_parameters
  min_backoff_seconds: 2.5
  max_doublings: 5
</div><p id="yzf249_125">The retry parameters are described in the table below.</p><div class="table-wrapper"><table class="wide" id="yzf249_126"><thead><tr class="ijRowHead" id="yzf249_128"><th id="yzf249_134"><p>Setting</p></th><th id="yzf249_135"><p>Description</p></th></tr></thead><tbody><tr id="yzf249_129"><td id="yzf249_136"><p><code class="code" id="yzf249_138">job_retry_limit</code></p></td><td id="yzf249_137"><p>The maximum number of retry attempts for a failed cron job not to exceed '5'. If specified with <code class="code" id="yzf249_139">job_age_limit</code>, App Engine retries the cron job until both limits are reached. When omitted from the parameters, the limit is set to '5' by default.</p></td></tr><tr id="yzf249_130"><td id="yzf249_140"><p><code class="code" id="yzf249_142">job_age_limit</code></p></td><td id="yzf249_141"><p>The time limit for retrying a failed cron job, measured from when the cron job was first run. The value is a number followed by a unit of time, where the unit is s for seconds, m for minutes, h for hours, or d for days. For example, the value 5d specifies a limit of five days after the cron job's first execution attempt. If specified with <code class="code" id="yzf249_143">job_retry_limit</code>, App Engine retries the cron job until both limits are reached.</p></td></tr><tr id="yzf249_131"><td id="yzf249_144"><p><code class="code" id="yzf249_146">min_backoff_seconds</code></p></td><td id="yzf249_145"><p>The minimum number of seconds to wait before retrying a cron job after it fails.</p></td></tr><tr id="yzf249_132"><td id="yzf249_147"><p><code class="code" id="yzf249_149">max_backoff_seconds</code></p></td><td id="yzf249_148"><p>The maximum number of seconds to wait before retrying a cron job after it fails.</p></td></tr><tr id="yzf249_133"><td id="yzf249_150"><p><code class="code" id="yzf249_152">max_doublings</code></p></td><td id="yzf249_151"><p>The maximum number of times that the interval between failed cron job retries will be doubled before the increase becomes constant. The constant is: 2**(<code class="code" id="yzf249_153">max_doublings</code> - 1) * <code class="code" id="yzf249_154">min_backoff_seconds</code>.</p></td></tr></tbody></table></div></section><section class="chapter"><h2 id="securing-urls-for-cron" data-toc="securing-urls-for-cron">Securing URLs for cron</h2><p id="yzf249_155">A cron handler is just a normal handler defined in <code class="code" id="yzf249_164">app.yaml</code>. You can prevent users from accessing URLs used by scheduled tasks by restricting access to administrator accounts. Scheduled tasks can access admin-only URLs. You can restrict a URL by adding <code class="code" id="yzf249_165">login: admin</code> to the handler configuration in <code class="code" id="yzf249_166">app.yaml</code>.</p><p id="yzf249_156">An example might look like this in <code class="code" id="yzf249_167">app.yaml</code>:</p><div class="code-block" data-lang="none">
application: hello-cron
version: 1
runtime: java
api_version: 1

handlers:
- url: /report/weekly
  servlet: mysite.server.CronServlet
  login: admin
</div><p id="yzf249_158"><span class="control" id="yzf249_168">Note:</span> While cron jobs can use URL paths restricted with <code class="code" id="yzf249_169">login: admin</code>, they <span class="emphasis" id="yzf249_170">cannot</span> use URL paths restricted with <code class="code" id="yzf249_171">login: required</code> because cron scheduled tasks are not run as any user. The <code class="code" id="yzf249_172">admin</code> restriction is satisfied by the inclusion of the <code class="code" id="yzf249_173">X-Appengine-Cron</code> header described below.</p><p id="yzf249_159">To test a cron job, sign in as an administrator and visit the URL of the handler in your browser.</p><p id="yzf249_160">Requests from the Cron Service will also contain a HTTP header:</p><div class="code-block" data-lang="none">
X-Appengine-Cron: true
</div><p id="yzf249_162">The <code class="code" id="yzf249_174">X-Appengine-Cron</code> header is set internally by Google App Engine. If your request handler finds this header it can trust that the request is a cron request. If the header is present in an external user request to your app, it is stripped, except for requests from logged in administrators of the application, who are allowed to set the header for testing purposes.</p><p id="yzf249_163">Google App Engine issues Cron requests from the IP address <code class="code" id="yzf249_175">0.1.0.1</code>.</p></section><section class="chapter"><h2 id="calling-google-cloud-endpoints" data-toc="calling-google-cloud-endpoints">Calling Google Cloud Endpoints</h2><p id="yzf249_176">You cannot call a <a href="https://web.archive.org/web/20160424230929/https://cloud.google.com/appengine/features/#Endpoints" id="yzf249_177" data-external="true" rel="noopener noreferrer" target="_blank">Google Cloud Endpoint</a> from a cron job. Instead, you should issue a request to a target that is served by a handler that's specified in your app's configuration file or in a dispatch file. That handler then calls the appropriate endpoint class and method.</p></section><section class="chapter"><h2 id="cron-and-app-versions" data-toc="cron-and-app-versions">Cron and app versions</h2><p id="yzf249_178">If the <code class="code" id="yzf249_179">target</code> parameter has been set for a job, the request is sent to the specified version. Otherwise Cron requests are sent to the default version of the application.</p></section><section class="chapter"><h2 id="uploading-cron-jobs" data-toc="uploading-cron-jobs">Uploading cron jobs</h2><p id="yzf249_180">You can use <code class="code" id="yzf249_183">AppCfg</code> to upload cron jobs. When you upload your application to App Engine using <code class="code" id="yzf249_184">AppCfg update</code>, the Cron Service is updated with the contents of <code class="code" id="yzf249_185">cron.yaml</code>. You can update just the cron configuration without uploading the rest of the application using <code class="code" id="yzf249_186">AppCfg update_cron</code>.</p><p id="yzf249_181">To delete all cron jobs, change the <code class="code" id="yzf249_187">cron.yaml</code> file to just contain:</p><div class="code-block" data-lang="none">
cron:
</div></section><section class="chapter"><h2 id="cron-support-in-the-cloud-platform-console" data-toc="cron-support-in-the-cloud-platform-console">Cron support in the Cloud Platform Console</h2><p id="yzf249_188">The Cloud Platform Console <a href="https://web.archive.org/web/20160424230929/https://console.cloud.google.com/project/_/appengine/taskqueues" id="yzf249_190" data-external="true" rel="noopener noreferrer" target="_blank">Task queues page</a> has a tab that shows the tasks that are running cron jobs.</p><p id="yzf249_189">You can also visit the <a href="https://web.archive.org/web/20160424230929/https://cloud.google.com/appengine/docs/developers-console/#logs" id="yzf249_191" data-external="true" rel="noopener noreferrer" target="_blank">Logs page</a> see when cron jobs were added or removed.</p></section><section class="chapter"><h2 id="cron-support-in-the-development-server" data-toc="cron-support-in-the-development-server">Cron support in the development server</h2><p id="yzf249_192">The development server doesn't automatically run your cron jobs. You can use your local desktop's cron or scheduled tasks interface to trigger the URLs of your jobs with <a href="https://web.archive.org/web/20160424230929/http://curl.haxx.se/" id="yzf249_193" data-external="true" rel="noopener noreferrer" target="_blank">curl</a> or a similar tool.</p></section><div class="last-modified">10 April 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="java-index-configuration-using-yaml.html" class="navigation-links__prev">Java Index Configuration Using YAML</a><a href="java-task-queue-configuration.html" class="navigation-links__next">Java Task Queue Configuration</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>