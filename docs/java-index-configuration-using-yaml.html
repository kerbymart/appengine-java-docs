<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-13T01:56:45.359477398"><title>Java Index Configuration Using YAML | Google App Engine Java Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"about-index-yaml","level":0,"title":"About index.yaml","anchor":"#about-index-yaml"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Java Index Configuration Using YAML | Google App Engine Java Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Google App Engine Java Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/java-index-configuration-using-yaml.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Java Index Configuration Using YAML | Google App Engine Java Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/java-index-configuration-using-yaml.html#webpage",
    "url": "writerside-documentation/java-index-configuration-using-yaml.html",
    "name": "Java Index Configuration Using YAML | Google App Engine Java Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Google App Engine Java Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Java-Index-Configuration-Using-YAML" data-main-title="Java Index Configuration Using YAML" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Guides.md|Guides///Managing-and-Configuring-Your-App.md|Managing and Configuring Your App///Configuring-Your-Java-App-with-YAML-Files.md|Configuring Your Java App with YAML Files"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Google App Engine Java Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Java-Index-Configuration-Using-YAML" id="Java-Index-Configuration-Using-YAML.md">Java Index Configuration Using YAML</h1><p id="s9v2a8_3">The App Engine datastore uses <a href="https://web.archive.org/web/20160424225359/https://cloud.google.com/appengine/docs/java/datastore/indexes" id="s9v2a8_6" data-external="true" rel="noopener noreferrer" target="_blank">indexes</a> for every query your application makes. These indexes are updated whenever an entity changes, so the results can be returned quickly when the app makes a query. To do this, the datastore needs to know in advance which queries the application will make. You specify which indexes your app needs in a configuration file. The development server can generate the datastore index configuration automatically as you test your app.</p><ol class="list _decimal" id="s9v2a8_4" type="1"><li class="list__item" id="s9v2a8_7"><p id="s9v2a8_10"><span id="s9v2a8_11">About index.yaml</span></p></li><li class="list__item" id="s9v2a8_8"><p id="s9v2a8_12"><span id="s9v2a8_13">Index Definitions</span></p></li><li class="list__item" id="s9v2a8_9"><p id="s9v2a8_14"><span id="s9v2a8_15">Automatic Indexes</span></p></li></ol><section class="chapter"><h2 id="about-index-yaml" data-toc="about-index-yaml">About index.yaml</h2><p id="s9v2a8_16">Every datastore query made by an application needs a corresponding index. Indexes for simple queries, such as queries over a single property, are created automatically. Indexes for complex queries must be defined in a configuration file named <code class="code" id="s9v2a8_26">index.yaml</code>. This file is stored in the application's <code class="code" id="s9v2a8_27">WEB-INF</code> directory to create indexes in the datastore.</p><p id="s9v2a8_17">If a query needs an index that does not have an appropriate entry in the configuration file, the <a href="https://web.archive.org/web/20160424225359/https://cloud.google.com/appengine/docs/java/tools/devserver" id="s9v2a8_28" data-external="true" rel="noopener noreferrer" target="_blank">development web server</a> automatically adds items to this file when the application tries to execute the query. You can adjust indexes or create new ones manually by editing the file.</p><p id="s9v2a8_18"><span class="control" id="s9v2a8_29">Tip:</span> If, during testing, the app exercises every query it will make using the development web server, then the generated entries in <code class="code" id="s9v2a8_30">index.yaml</code> will be complete. You only need to edit the file manually to delete indexes that are no longer used, or to define indexes not created by the development web server.</p><p id="s9v2a8_19">For more information about indexes, see the <a href="https://web.archive.org/web/20160424225359/https://cloud.google.com/appengine/docs/java/datastore/indexes" id="s9v2a8_31" data-external="true" rel="noopener noreferrer" target="_blank">Datastore Indexes</a> page.</p><p id="s9v2a8_20">The following is an example of an <code class="code" id="s9v2a8_32">index.yaml</code> file:</p><div class="code-block" data-lang="none">
indexes:

- kind: Cat
  ancestor: no
  properties:
  - name: name
  - name: age
    direction: desc

- kind: Cat
  properties:
  - name: name
    direction: asc
  - name: whiskers
    direction: desc

- kind: Store
  ancestor: yes
  properties:
  - name: business
    direction: asc
  - name: owner
    direction: asc
</div><p id="s9v2a8_22">The syntax of <code class="code" id="s9v2a8_33">index.yaml</code> is the YAML format. For more information about this syntax, see <a href="https://web.archive.org/web/20160424225359/http://www.yaml.org/" id="s9v2a8_34" data-external="true" rel="noopener noreferrer" target="_blank">the YAML website</a> for more information.</p><p id="s9v2a8_23"><span class="control" id="s9v2a8_35">Tip:</span> The YAML format supports comments. A line that begins with a pound (<code class="code" id="s9v2a8_36">#</code>) character is ignored: <br><code class="code" id="s9v2a8_38"># This is a comment.</code></p><section class="chapter"><h3 id="index-definitions" data-toc="index-definitions">Index Definitions</h3><p id="s9v2a8_39"><code class="code" id="s9v2a8_47">index.yaml</code> has a single list element called <code class="code" id="s9v2a8_48">indexes</code>. Each element in the list represents an index for the application.</p><p id="s9v2a8_40">An index element can have the following elements:</p><p id="s9v2a8_41"><code class="code" id="s9v2a8_49">kind</code><br> The kind of the entity for the query. The kind attribute specifies the kind of the entities to index.</p><p id="s9v2a8_42"><code class="code" id="s9v2a8_51">properties</code><br> A list of properties to include as columns of the index, in the order to be sorted: properties used in equality filters first, followed by the property used in inequality filters, then the sort orders and their directions.</p><p id="s9v2a8_43">Each element in this list has the following elements:</p><p id="s9v2a8_44"><code class="code" id="s9v2a8_53">name</code><br> The datastore name of the property.</p><p id="s9v2a8_45"><code class="code" id="s9v2a8_55">direction</code><br> The direction to sort, either <code class="code" id="s9v2a8_57">asc</code> for ascending or <code class="code" id="s9v2a8_58">desc</code> for descending. This is only required for properties used in sort orders of the query, and must match the direction used by the query. The default is <code class="code" id="s9v2a8_59">asc</code>.</p><p id="s9v2a8_46"><code class="code" id="s9v2a8_60">ancestor</code><br> The ancestor attribute is <code class="code" id="s9v2a8_62">true</code> if the index supports a query that filters entities by the entity group parent, <code class="code" id="s9v2a8_63">false</code> otherwise.</p></section><section class="chapter"><h3 id="automatic-indexes" data-toc="automatic-indexes">Automatic Indexes</h3><p id="s9v2a8_64">Determining the indexes required by your application's queries manually can be tedious and error-prone. Thankfully, when you use <code class="code" id="s9v2a8_67">index.yaml</code>, the development server automatically determines the index configuration for you.</p><p id="s9v2a8_65">The development server maintains the auto-generated index in a file named <code class="code" id="s9v2a8_68">datastore-indexes-auto.xml</code> in the directory <code class="code" id="s9v2a8_69">WEB-INF/appengine-generated/</code> in your application's WAR. AppCfg uses both <code class="code" id="s9v2a8_70">index.yaml</code> and <code class="code" id="s9v2a8_71">datastore-indexes-auto.xml</code> to determine which indexes need to be built for your app on App Engine.</p><p id="s9v2a8_66">If you have an app running in the development server, and it attempts a datastore query for which there is no corresponding index in either <code class="code" id="s9v2a8_72">index.yaml</code> or <code class="code" id="s9v2a8_73">datastore-indexes-auto.xml</code>, then the server adds the appropriate configuration to <code class="code" id="s9v2a8_74">datastore-indexes-auto.xml</code>.</p></section></section><div class="last-modified">10 April 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="java-backends-configuration.html" class="navigation-links__prev">Java Backends Configuration</a><a href="java-task-scheduling-with-cron-using-yaml.html" class="navigation-links__next">Java Task Scheduling with Cron Using YAML</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>