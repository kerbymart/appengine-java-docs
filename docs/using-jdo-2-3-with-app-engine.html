<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-13T01:56:45.110676293"><title>Using JDO 2.3 with App Engine | Google App Engine Java Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"contents","level":0,"title":"Contents","anchor":"#contents"},{"id":"setting-up-jdo-2-3","level":0,"title":"Setting Up JDO 2.3","anchor":"#setting-up-jdo-2-3"},{"id":"enhancing-data-classes","level":0,"title":"Enhancing Data Classes","anchor":"#enhancing-data-classes"},{"id":"getting-a-persistencemanager-instance","level":0,"title":"Getting a PersistenceManager Instance","anchor":"#getting-a-persistencemanager-instance"},{"id":"unsupported-features-of-jdo-2-3","level":0,"title":"Unsupported Features of JDO 2.3","anchor":"#unsupported-features-of-jdo-2-3"},{"id":"disabling-transactions-and-porting-existing-jdo-apps","level":0,"title":"Disabling Transactions and Porting Existing JDO Apps","anchor":"#disabling-transactions-and-porting-existing-jdo-apps"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Using JDO 2.3 with App Engine | Google App Engine Java Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Google App Engine Java Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/using-jdo-2-3-with-app-engine.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Using JDO 2.3 with App Engine | Google App Engine Java Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/using-jdo-2-3-with-app-engine.html#webpage",
    "url": "writerside-documentation/using-jdo-2-3-with-app-engine.html",
    "name": "Using JDO 2.3 with App Engine | Google App Engine Java Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Google App Engine Java Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Using-JDO-2.3-with-App-Engine" data-main-title="Using JDO 2.3 with App Engine" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Guides.md|Guides///Storing-Data.md|Storing Data///Superseded-Storage-Solutions.md|Superseded Storage Solutions///JDO-for-Cloud-Datastore.md|JDO for Cloud Datastore"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Google App Engine Java Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Using-JDO-2.3-with-App-Engine" id="Using-JDO-2.3-with-App-Engine.md">Using JDO 2.3 with App Engine</h1><p id="tjayn_3">Java Data Objects (JDO) is a standard interface for accessing databases in Java, providing a mapping between Java classes and database tables. There is an open-source plugin available for using JDO with Datastore, and this page provides information on how to get started with it.</p><p id="tjayn_4"><span class="control" id="tjayn_14">Warning:</span> We think most developers will have a better experience using the low-level Datastore API, or one of the open-source APIs developed specifically for Datastore, such as <a href="https://web.archive.org/web/20160424230348/https://github.com/objectify/objectify" id="tjayn_15" data-external="true" rel="noopener noreferrer" target="_blank">Objectify</a>. JDO was designed for use with traditional relational databases, and so has no way to explicitly represent some of the aspects of Datastore that make it different from relational databases, such as entity groups and ancestor queries. This can lead to subtle issues that are difficult to understand and fix.</p><p id="tjayn_5">The App Engine Java SDK includes an implementation of JDO 2.3 for the App Engine Datastore. The implementation is based on version 1.0 of the DataNucleus Access Platform, the open-source reference implementation for JDO 2.3.</p><p id="tjayn_6">See <a href="https://web.archive.org/web/20160424230348/http://www.datanucleus.org/products/accessplatform_1_1.html" id="tjayn_16" data-external="true" rel="noopener noreferrer" target="_blank">the Access Platform 1.1 documentation</a> for more information about JDO.</p><p id="tjayn_7"><span class="control" id="tjayn_17">Note:</span> The instructions on this page apply to JDO version 2.3, which uses version 1.0 of the DataNucleus plugin for App Engine. App Engine now offers the DataNucleus 2.x plugin that allows you to run JDO 3.0. The new plugin supports unowned relationships and provides a number of new APIs and features. This upgrade is not fully backwards-compatible with the previous version. If you rebuild an application using JDO 3.0, you need to update and retest your code. For more information on the new version, see <a href="https://web.archive.org/web/20160424230348/http://www.datanucleus.org/products/accessplatform_2_2/guides/jdo/jdo_3.html" id="tjayn_18" data-external="true" rel="noopener noreferrer" target="_blank">JDO 3.0</a>. For more information about upgrading, see <a href="https://web.archive.org/web/20160424230348/https://cloud.google.com/appengine/docs/java/datastore/jdo/overview-dn2.html" id="tjayn_19" data-external="true" rel="noopener noreferrer" target="_blank">Using JDO 3.0 with App Engine</a>.</p><section class="chapter"><h2 id="contents" data-toc="contents">Contents</h2><ol class="list _decimal" id="tjayn_20" type="1"><li class="list__item" id="tjayn_21"><p id="tjayn_26"><span id="tjayn_28">Setting Up JDO 2.3</span></p><ol class="list _decimal" id="tjayn_27" type="1"><li class="list__item" id="tjayn_29"><p id="tjayn_32"><span id="tjayn_33">Copying the JARs</span></p></li><li class="list__item" id="tjayn_30"><p id="tjayn_34"><span id="tjayn_35">Creating the jdoconfig.xml File</span></p></li><li class="list__item" id="tjayn_31"><p id="tjayn_36"><span id="tjayn_37">Setting the Datastore Read Policy and Call Deadline</span></p></li></ol></li><li class="list__item" id="tjayn_22"><p id="tjayn_38"><span id="tjayn_39">Enhancing Data Classes</span></p></li><li class="list__item" id="tjayn_23"><p id="tjayn_40"><span id="tjayn_41">Getting a PersistenceManager Instance</span></p></li><li class="list__item" id="tjayn_24"><p id="tjayn_42"><span id="tjayn_43">Unsupported Features of JDO 2.3</span></p></li><li class="list__item" id="tjayn_25"><p id="tjayn_44"><span id="tjayn_45">Disabling Transactions and Porting Existing JDO Apps</span></p></li></ol></section><section class="chapter"><h2 id="setting-up-jdo-2-3" data-toc="setting-up-jdo-2-3">Setting Up JDO 2.3</h2><p id="tjayn_46">To use JDO to access the datastore, an App Engine app needs the following:</p><ul class="list _bullet" id="tjayn_47"><li class="list__item" id="tjayn_53"><p id="tjayn_56">The JDO and DataNucleus App Engine plugin JARs must be in the app's <code class="code" id="tjayn_57">war/WEB-INF/lib/</code> directory.</p></li><li class="list__item" id="tjayn_54"><p id="tjayn_58">A configuration file named <code class="code" id="tjayn_59">jdoconfig.xml</code> must be in the app's <code class="code" id="tjayn_60">war/WEB-INF/classes/META-INF/</code> directory, with configuration that tells JDO to use the App Engine datastore.</p></li><li class="list__item" id="tjayn_55"><p id="tjayn_61">The project's build process must perform a post-compilation &quot;enhancement&quot; step on the compiled data classes to associate them with the JDO implementation.</p></li></ul><p id="tjayn_48">If you are using <a href="https://web.archive.org/web/20160424230348/https://developers.google.com/eclipse/docs/appengine" id="tjayn_62" data-external="true" rel="noopener noreferrer" target="_blank">the Google Plugin for Eclipse</a>, these three things are taken care of for you. The new project wizard puts the JDO and DataNucleus App Engine plugin JARs in the correct location, and creates the <code class="code" id="tjayn_63">jdoconfig.xml</code> file. The build process performs the &quot;enhancement&quot; step automatically.</p><p id="tjayn_49">If you are using Apache Ant to build your project, you can use an Ant task included with the SDK to perform the enhancement step. You must copy the JARs and create the configuration file when you set up your project. See <a href="https://web.archive.org/web/20160424230348/https://cloud.google.com/appengine/docs/java/tools/ant" id="tjayn_64" data-external="true" rel="noopener noreferrer" target="_blank">Using Apache Ant</a> for more information about the Ant task.</p><section class="chapter"><h3 id="copying-the-jars" data-toc="copying-the-jars">Copying the JARs</h3><p id="tjayn_65">The JDO and datastore JARs are included with the App Engine Java SDK. You can find them in the <code class="code" id="tjayn_68">appengine-java-sdk/lib/user/orm/</code> directory.</p><p id="tjayn_66">Copy the JARs to your application's <code class="code" id="tjayn_69">war/WEB-INF/lib/</code> directory.</p><p id="tjayn_67">Make sure the <code class="code" id="tjayn_70">appengine-api.jar</code> is also in the <code class="code" id="tjayn_71">war/WEB-INF/lib/</code> directory. (You may have already copied this when creating your project.) The App Engine DataNucleus plugin uses this JAR to access the datastore.</p></section><section class="chapter"><h3 id="creating-the-jdoconfig-xml-file" data-toc="creating-the-jdoconfig-xml-file">Creating the jdoconfig.xml File</h3><p id="tjayn_72">The JDO interface needs a configuration file named <code class="code" id="tjayn_75">jdoconfig.xml</code> in the application's <code class="code" id="tjayn_76">war/WEB-INF/classes/META-INF/</code> directory. You can create this file in this location directly, or have your build process copy this file from a source directory.</p><p id="tjayn_73">Create the file with the following contents:</p><div class="code-block" data-lang="none">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;jdoconfig xmlns=&quot;http://java.sun.com/xml/ns/jdo/jdoconfig&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:noNamespaceSchemaLocation=&quot;http://java.sun.com/xml/ns/jdo/jdoconfig&quot;&gt;

    &lt;persistence-manager-factory name=&quot;transactions-optional&quot;&gt;
        &lt;property name=&quot;javax.jdo.PersistenceManagerFactoryClass&quot;
            value=&quot;org.datanucleus.store.appengine.jdo.DatastoreJDOPersistenceManagerFactory&quot;/&gt;
        &lt;property name=&quot;javax.jdo.option.ConnectionURL&quot; value=&quot;appengine&quot;/&gt;
        &lt;property name=&quot;javax.jdo.option.NontransactionalRead&quot; value=&quot;true&quot;/&gt;
        &lt;property name=&quot;javax.jdo.option.NontransactionalWrite&quot; value=&quot;true&quot;/&gt;
        &lt;property name=&quot;javax.jdo.option.RetainValues&quot; value=&quot;true&quot;/&gt;
        &lt;property name=&quot;datanucleus.appengine.autoCreateDatastoreTxns&quot; value=&quot;true&quot;/&gt;
    &lt;/persistence-manager-factory&gt;
&lt;/jdoconfig&gt;
</div></section><section class="chapter"><h3 id="setting-the-datastore-read-policy-and-call-deadline" data-toc="setting-the-datastore-read-policy-and-call-deadline">Setting the Datastore Read Policy and Call Deadline</h3><p id="tjayn_77">As described on the <a href="https://web.archive.org/web/20160424230348/https://cloud.google.com/appengine/docs/java/datastore/queries#Java_Data_consistency" id="tjayn_87" data-external="true" rel="noopener noreferrer" target="_blank">Datastore Queries</a> page, you can customize the behavior of the Datastore by setting the read policy (strong versus eventual consistency) and call deadline. In JDO, you do this by specifying the desired values in the <code class="code" id="tjayn_88">&lt;persistence-manager-factory&gt;</code> element of the <code class="code" id="tjayn_89">jdoconfig.xml</code> file. All calls made with a given <code class="code" id="tjayn_90">PersistenceManager</code> instance will use the configuration values in effect when the manager was created by the <code class="code" id="tjayn_91">PersistenceManagerFactory</code>. You can also override these settings for a single <code class="code" id="tjayn_92">Query</code> object.</p><p id="tjayn_78">To set the read policy for a <code class="code" id="tjayn_93">PersistenceManagerFactory</code>, include a property named <code class="code" id="tjayn_94">datanucleus.appengine.datastoreReadConsistency</code>. Possible values are <code class="code" id="tjayn_95">EVENTUAL</code> and <code class="code" id="tjayn_96">STRONG</code>: if not specified, the default is <code class="code" id="tjayn_97">STRONG</code>. Note that these settings apply only to ancestor queries within a given entity group. Non-ancestor and cross-group queries are always eventually consistent regardless of the prevailing read policy.</p><div class="code-block" data-lang="none">
        &lt;property name=&quot;datanucleus.appengine.datastoreReadConsistency&quot; value=&quot;EVENTUAL&quot; /&gt;
</div><p id="tjayn_80">You can set separate datastore call deadlines for reads and for writes. For reads, use the JDO standard property <code class="code" id="tjayn_98">javax.jdo.option.DatastoreReadTimeoutMillis</code>. For writes, use <code class="code" id="tjayn_99">javax.jdo.option.DatastoreWriteTimeoutMillis</code>. The value is an amount of time, in milliseconds.</p><div class="code-block" data-lang="none">
        &lt;property name=&quot;javax.jdo.option.DatastoreReadTimeoutMillis&quot; value=&quot;5000&quot; /&gt;
        &lt;property name=&quot;javax.jdo.option.DatastoreWriteTimeoutMillis&quot; value=&quot;10000&quot; /&gt;
</div><p id="tjayn_82">If you want to use cross-group (XG) transactions, add the following property:</p><div class="code-block" data-lang="none">
        &lt;property name=&quot;datanucleus.appengine.datastoreEnableXGTransactions&quot; value=&quot;true&quot; /&gt;
</div><p id="tjayn_84">You can have multiple <code class="code" id="tjayn_100">&lt;persistence-manager-factory&gt;</code> elements in the same <code class="code" id="tjayn_101">jdoconfig.xml</code> file, using different <code class="code" id="tjayn_102">name</code> attributes, to use <code class="code" id="tjayn_103">PersistenceManager</code> instances with different configurations in the same app. For example, the following <code class="code" id="tjayn_104">jdoconfig.xml</code> file establishes two sets of configuration, one named <code class="code" id="tjayn_105">&quot;transactions-optional&quot;</code> and another named <code class="code" id="tjayn_106">&quot;eventual-reads-short-deadlines&quot;</code>:</p><div class="code-block" data-lang="none">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;jdoconfig xmlns=&quot;http://java.sun.com/xml/ns/jdo/jdoconfig&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:noNamespaceSchemaLocation=&quot;http://java.sun.com/xml/ns/jdo/jdoconfig&quot;&gt;

    &lt;persistence-manager-factory name=&quot;transactions-optional&quot;&gt;
        &lt;property name=&quot;javax.jdo.PersistenceManagerFactoryClass&quot;
            value=&quot;org.datanucleus.store.appengine.jdo.DatastoreJDOPersistenceManagerFactory&quot;/&gt;
        &lt;property name=&quot;javax.jdo.option.ConnectionURL&quot; value=&quot;appengine&quot;/&gt;
        &lt;property name=&quot;javax.jdo.option.NontransactionalRead&quot; value=&quot;true&quot;/&gt;
        &lt;property name=&quot;javax.jdo.option.NontransactionalWrite&quot; value=&quot;true&quot;/&gt;
        &lt;property name=&quot;javax.jdo.option.RetainValues&quot; value=&quot;true&quot;/&gt;
        &lt;property name=&quot;datanucleus.appengine.autoCreateDatastoreTxns&quot; value=&quot;true&quot;/&gt;
    &lt;/persistence-manager-factory&gt;

    &lt;persistence-manager-factory name=&quot;eventual-reads-short-deadlines&quot;&gt;
        &lt;property name=&quot;javax.jdo.PersistenceManagerFactoryClass&quot;
            value=&quot;org.datanucleus.store.appengine.jdo.DatastoreJDOPersistenceManagerFactory&quot;/&gt;
        &lt;property name=&quot;javax.jdo.option.ConnectionURL&quot; value=&quot;appengine&quot;/&gt;
        &lt;property name=&quot;javax.jdo.option.NontransactionalRead&quot; value=&quot;true&quot;/&gt;
        &lt;property name=&quot;javax.jdo.option.NontransactionalWrite&quot; value=&quot;true&quot;/&gt;
        &lt;property name=&quot;javax.jdo.option.RetainValues&quot; value=&quot;true&quot;/&gt;
        &lt;property name=&quot;datanucleus.appengine.autoCreateDatastoreTxns&quot; value=&quot;true&quot;/&gt;

        &lt;property name=&quot;datanucleus.appengine.datastoreReadConsistency&quot; value=&quot;EVENTUAL&quot; /&gt;
        &lt;property name=&quot;javax.jdo.option.DatastoreReadTimeoutMillis&quot; value=&quot;5000&quot; /&gt;
        &lt;property name=&quot;javax.jdo.option.DatastoreWriteTimeoutMillis&quot; value=&quot;10000&quot; /&gt;
    &lt;/persistence-manager-factory&gt;
&lt;/jdoconfig&gt;
</div><p id="tjayn_86">See <span id="tjayn_107">Getting a PersistenceManager Instance</span> below for information on creating a <code class="code" id="tjayn_108">PersistenceManager</code> with a named configuration set.</p></section></section><section class="chapter"><h2 id="enhancing-data-classes" data-toc="enhancing-data-classes">Enhancing Data Classes</h2><p id="tjayn_109">JDO uses a post-compilation &quot;enhancement&quot; step in the build process to associate data classes with the JDO implementation.</p><p id="tjayn_110">If you are using Eclipse, <a href="https://web.archive.org/web/20160424230348/https://cloud.google.com/appengine/docs/java/tools/eclipse" id="tjayn_116" data-external="true" rel="noopener noreferrer" target="_blank">the Google Plugin for Eclipse</a> does this step automatically when building.</p><p id="tjayn_111">If you are using Apache Ant, the SDK includes an Ant task to perform this step. See <a href="https://web.archive.org/web/20160424230348/https://cloud.google.com/appengine/docs/java/tools/ant" id="tjayn_117" data-external="true" rel="noopener noreferrer" target="_blank">Using Apache Ant</a> for more information on using the Ant task.</p><p id="tjayn_112">You can perform the enhancement step on compiled classes from the command line with the following command:</p><div class="code-block" data-lang="none">
java -cp classpath com.google.appengine.tools.enhancer.Enhance
class-files
</div><p id="tjayn_114">The <span class="emphasis" id="tjayn_118">classpath</span> must contain the JAR <code class="code" id="tjayn_119">appengine-tools-api.jar</code> from the <code class="code" id="tjayn_120">appengine-java-sdk/lib/</code> directory, as well as all of your data classes.</p><p id="tjayn_115">For more information on the DataNucleus bytecode enhancer, see <a href="https://web.archive.org/web/20160424230348/http://www.datanucleus.org/products/datanucleus/jdo/enhancer.html" id="tjayn_121" data-external="true" rel="noopener noreferrer" target="_blank">the DataNucleus documentation</a>.</p></section><section class="chapter"><h2 id="getting-a-persistencemanager-instance" data-toc="getting-a-persistencemanager-instance">Getting a PersistenceManager Instance</h2><p id="tjayn_122">An app interacts with JDO using an instance of the PersistenceManager class. You get this instance by instantiating and calling a method on an instance of the PersistenceManagerFactory class. The factory uses the JDO configuration to create PersistenceManager instances.</p><p id="tjayn_123">Because a PersistenceManagerFactory instance takes time to initialize, an app should reuse a single instance. To enforce this, an exception is thrown if the app instantiates more than one PersistenceManagerFactory (with the same configuration name). An easy way to manage the PersistenceManagerFactory instance is to create a singleton wrapper class with a static instance, as follows:</p><p id="tjayn_124"><span class="control" id="tjayn_132"><code class="code" id="tjayn_133">PMF.java</code></span></p><div class="code-block" data-lang="none">
import javax.jdo.JDOHelper;
import javax.jdo.PersistenceManagerFactory;

public final class PMF {
    private static final PersistenceManagerFactory pmfInstance =
        JDOHelper.getPersistenceManagerFactory(&quot;transactions-optional&quot;);

    private PMF() {}

    public static PersistenceManagerFactory get() {
        return pmfInstance;
    }
}
</div><p id="tjayn_126"><span class="control" id="tjayn_134">Tip:</span> <code class="code" id="tjayn_135">&quot;transactions-optional&quot;</code> refers to the name of the configuration set in the <code class="code" id="tjayn_136">jdoconfig.xml</code> file. If your app uses multiple configuration sets, you'll have to extend this code to call <code class="code" id="tjayn_137">JDOHelper.getPersistenceManagerFactory()</code> as desired. Your code should cache a singleton instance of each <code class="code" id="tjayn_138">PersistenceManagerFactory</code>.</p><p id="tjayn_127">The app uses the factory instance to create one PersistenceManager instance for each request that accesses the datastore.</p><div class="code-block" data-lang="none">
import javax.jdo.JDOHelper;
import javax.jdo.PersistenceManager;
import javax.jdo.PersistenceManagerFactory;

import PMF;

// ...
    PersistenceManager pm = PMF.get().getPersistenceManager();
</div><p id="tjayn_129">You use the PersistenceManager to store, update, and delete data objects, and to perform datastore queries.</p><p id="tjayn_130">When you are done with the PersistenceManager instance, you must call its <code class="code" id="tjayn_139">close()</code> method. It is an error to use the PersistenceManager instance after calling its <code class="code" id="tjayn_140">close()</code> method.</p><div class="code-block" data-lang="none">
    try {
        // ... do stuff with pm ...
    } finally {
        pm.close();
    }
</div></section><section class="chapter"><h2 id="unsupported-features-of-jdo-2-3" data-toc="unsupported-features-of-jdo-2-3">Unsupported Features of JDO 2.3</h2><p id="tjayn_141">The following features of the JDO interface are not supported by the App Engine implementation:</p><ul class="list _bullet" id="tjayn_142"><li class="list__item" id="tjayn_143"><p id="tjayn_150">Unowned relationships. You can implement unowned relationships using explicit Key values. JDO's syntax for unowned relationships may be supported in a future release.</p></li><li class="list__item" id="tjayn_144"><p id="tjayn_151">Owned many-to-many relationships.</p></li><li class="list__item" id="tjayn_145"><p id="tjayn_152">&quot;Join&quot; queries. You cannot use a field of a child entity in a filter when performing a query on the parent kind. Note that you can test the parent's relationship field directly in query using a key.</p></li><li class="list__item" id="tjayn_146"><p id="tjayn_153">JDOQL grouping and other aggregate queries.</p></li><li class="list__item" id="tjayn_147"><p id="tjayn_154">Polymorphic queries. You cannot perform a query of a class to get instances of a subclass. Each class is represented by a separate entity kind in the datastore.</p></li><li class="list__item" id="tjayn_148"><p id="tjayn_155"><code class="code" id="tjayn_156">IdentityType.DATASTORE</code> for the <code class="code" id="tjayn_157">@PersistenceCapable</code> annotation. Only <code class="code" id="tjayn_158">IdentityType.APPLICATION</code> is supported.</p></li><li class="list__item" id="tjayn_149"><p id="tjayn_159">There is currently a bug preventing owned one-to-many relationships where the parent and the child are the same class, making it difficult to model tree structures. This will be fixed in a future release. You can work around this by storing explicit Key values for either the parent or children.</p></li></ul></section><section class="chapter"><h2 id="disabling-transactions-and-porting-existing-jdo-apps" data-toc="disabling-transactions-and-porting-existing-jdo-apps">Disabling Transactions and Porting Existing JDO Apps</h2><p id="tjayn_160">The JDO configuration we recommend using sets a property named <code class="code" id="tjayn_163">datanucleus.appengine.autoCreateDatastoreTxns</code> to <code class="code" id="tjayn_164">true</code>. This is an App Engine-specific property that tells the JDO implementation to associate datastore transactions with the JDO transactions that are managed in application code. If you are building a new app from scratch, this is probably what you want. However, if you have an existing, JDO-based application that you want to get running on App Engine, you may want to use an alternate persistence configuration which sets the value of this property to <code class="code" id="tjayn_165">false</code>:</p><div class="code-block" data-lang="none">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;jdoconfig xmlns=&quot;http://java.sun.com/xml/ns/jdo/jdoconfig&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:noNamespaceSchemaLocation=&quot;http://java.sun.com/xml/ns/jdo/jdoconfig&quot;&gt;

    &lt;persistence-manager-factory name=&quot;transactions-optional&quot;&gt;
        &lt;property name=&quot;javax.jdo.PersistenceManagerFactoryClass&quot;
            value=&quot;org.datanucleus.store.appengine.jdo.DatastoreJDOPersistenceManagerFactory&quot;/&gt;
        &lt;property name=&quot;javax.jdo.option.ConnectionURL&quot; value=&quot;appengine&quot;/&gt;
        &lt;property name=&quot;javax.jdo.option.NontransactionalRead&quot; value=&quot;true&quot;/&gt;
        &lt;property name=&quot;javax.jdo.option.NontransactionalWrite&quot; value=&quot;true&quot;/&gt;
        &lt;property name=&quot;javax.jdo.option.RetainValues&quot; value=&quot;true&quot;/&gt;
        &lt;property name=&quot;datanucleus.appengine.autoCreateDatastoreTxns&quot; value=&quot;false&quot;/&gt;
    &lt;/persistence-manager-factory&gt;
&lt;/jdoconfig&gt;
</div><p id="tjayn_162">In order to understand why this may be useful, remember that you can only operate on objects that belong to the same entity group within a transaction. Applications built using traditional databases typically assume the availability of global transactions, which allow you to update any set of records inside a transaction. Since the App Engine datastore does not support global transactions, App Engine throws exceptions if your code assumes the availability of global transactions. Instead of going through your (potentially large) codebase and removing all your transaction management code, you can simply disable datastore transactions. This does nothing to address assumptions your code makes about atomicity of multi-record modifications, but it allows you to get your app working so that you can then focus on refactoring your transactional code incrementally and as needed, rather than all at once.</p></section><div class="last-modified">10 April 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="jdo-for-cloud-datastore.html" class="navigation-links__prev">JDO for Cloud Datastore</a><a href="using-jdo-3-0-with-app-engine.html" class="navigation-links__next">Using JDO 3.0 with App Engine</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>